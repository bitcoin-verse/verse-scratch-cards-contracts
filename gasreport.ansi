Compiling 69 files with Solc 0.8.25
Solc 0.8.25 finished in 10.64s
Compiler run successful with warnings:
Warning (2072): Unused local variable.
   --> contracts/tests/Polygon/DeployedContractTest.t.sol:313:9:
    |
313 |         bytes memory inputPath = abi.encodePacked(
    |         ^^^^^^^^^^^^^^^^^^^^^^

Warning (2072): Unused local variable.
   --> contracts/tests/Polygon/DeployedContractTest.t.sol:323:9:
    |
323 |         uint256 smallWethInput = 0.01 * 10**18;
    |         ^^^^^^^^^^^^^^^^^^^^^^

Warning (5667): Unused function parameter. Remove or comment out the variable name to silence this warning.
   --> contracts/tests/Polygon/FlexibleDrawVRF.t.sol:125:74:
    |
125 |     function safeTransferFrom(address from, address to, uint256 tokenId, bytes memory data) public override {
    |                                                                          ^^^^^^^^^^^^^^^^^

Warning (5667): Unused function parameter. Remove or comment out the variable name to silence this warning.
   --> contracts/tests/Polygon/FlexibleDrawVRF.t.sol:147:26:
    |
147 |     function getApproved(uint256 tokenId) external view override returns (address) {
    |                          ^^^^^^^^^^^^^^^

Warning (5667): Unused function parameter. Remove or comment out the variable name to silence this warning.
   --> contracts/tests/Polygon/FlexibleDrawVRF.t.sol:153:31:
    |
153 |     function isApprovedForAll(address owner, address operator) external view override returns (bool) {
    |                               ^^^^^^^^^^^^^

Warning (5667): Unused function parameter. Remove or comment out the variable name to silence this warning.
   --> contracts/tests/Polygon/FlexibleDrawVRF.t.sol:153:46:
    |
153 |     function isApprovedForAll(address owner, address operator) external view override returns (bool) {
    |                                              ^^^^^^^^^^^^^^^^

Warning (2018): Function state mutability can be restricted to pure
   --> contracts/tests/Polygon/FlexibleDrawVRF.t.sol:147:5:
    |
147 |     function getApproved(uint256 tokenId) external view override returns (address) {
    |     ^ (Relevant source part starts here and spans across multiple lines).

Warning (2018): Function state mutability can be restricted to pure
   --> contracts/tests/Polygon/FlexibleDrawVRF.t.sol:153:5:
    |
153 |     function isApprovedForAll(address owner, address operator) external view override returns (bool) {
    |     ^ (Relevant source part starts here and spans across multiple lines).

Warning (2018): Function state mutability can be restricted to pure
   --> contracts/tests/Polygon/FlexibleDrawVRF.t.sol:171:5:
    |
171 |     function supportsInterface(bytes4 interfaceId) external view override returns (bool) {
    |     ^ (Relevant source part starts here and spans across multiple lines).


Ran 11 tests for contracts/tests/Polygon/FlexibleDrawVRF.t.sol:TestFlexibleDrawVRF
[PASS] testBuyFlexibleDraw() (gas: 258121)
Traces:
  [258121] TestFlexibleDrawVRF::testBuyFlexibleDraw()
    ├─ [0] VM::startPrank(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   └─ ← [Return] 
    ├─ [44437] MockERC20::approve(FlexibleDrawVRF: [0xa0Cb889707d426A7A386870A03bc70d1b0697598], 5000000000000000000000 [5e21])
    │   └─ ← [Return] true
    ├─ [202984] FlexibleDrawVRF::buyFlexibleDraw(5000000000000000000000 [5e21])
    │   ├─ [16399] MockERC20::transferFrom(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, FlexibleDrawVRF: [0xa0Cb889707d426A7A386870A03bc70d1b0697598], 5000000000000000000000 [5e21])
    │   │   └─ ← [Return] true
    │   ├─ [45665] VRFCoordinatorV2Mock::requestRandomWords(0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, 1, 3, 2500000 [2.5e6], 3)
    │   │   ├─ emit RandomWordsRequested(keyHash: 0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, requestId: 1, preSeed: 100, subId: 1, minimumRequestConfirmations: 3, callbackGasLimit: 2500000 [2.5e6], numWords: 3, sender: FlexibleDrawVRF: [0xa0Cb889707d426A7A386870A03bc70d1b0697598])
    │   │   └─ ← [Return] 1
    │   ├─ emit DrawRequest(drawId: 1, requestId: 1, requestAddress: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   └─ ← [Stop] 
    ├─ [407] FlexibleDrawVRF::latestDrawId() [staticcall]
    │   └─ ← [Return] 1
    ├─ [526] FlexibleDrawVRF::drawIdToRequestId(1) [staticcall]
    │   └─ ← [Return] 1
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    └─ ← [Stop] 

[PASS] testBuyFlexibleDrawBelowMinimum() (gas: 84110)
Traces:
  [84110] TestFlexibleDrawVRF::testBuyFlexibleDrawBelowMinimum()
    ├─ [0] VM::startPrank(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   └─ ← [Return] 
    ├─ [44425] MockERC20::approve(FlexibleDrawVRF: [0xa0Cb889707d426A7A386870A03bc70d1b0697598], 500000000000000000000 [5e20])
    │   └─ ← [Return] true
    ├─ [0] VM::expectRevert(BelowMinimumDeposit())
    │   └─ ← [Return] 
    ├─ [25916] FlexibleDrawVRF::buyFlexibleDraw(500000000000000000000 [5e20])
    │   └─ ← [Revert] BelowMinimumDeposit()
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    └─ ← [Stop] 

[PASS] testClaimPrize() (gas: 608080)
Traces:
  [608080] TestFlexibleDrawVRF::testClaimPrize()
    ├─ [0] VM::startPrank(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   └─ ← [Return] 
    ├─ [44437] MockERC20::approve(FlexibleDrawVRF: [0xa0Cb889707d426A7A386870A03bc70d1b0697598], 5000000000000000000000 [5e21])
    │   └─ ← [Return] true
    ├─ [202984] FlexibleDrawVRF::buyFlexibleDraw(5000000000000000000000 [5e21])
    │   ├─ [16399] MockERC20::transferFrom(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, FlexibleDrawVRF: [0xa0Cb889707d426A7A386870A03bc70d1b0697598], 5000000000000000000000 [5e21])
    │   │   └─ ← [Return] true
    │   ├─ [45665] VRFCoordinatorV2Mock::requestRandomWords(0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, 1, 3, 2500000 [2.5e6], 3)
    │   │   ├─ emit RandomWordsRequested(keyHash: 0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, requestId: 1, preSeed: 100, subId: 1, minimumRequestConfirmations: 3, callbackGasLimit: 2500000 [2.5e6], numWords: 3, sender: FlexibleDrawVRF: [0xa0Cb889707d426A7A386870A03bc70d1b0697598])
    │   │   └─ ← [Return] 1
    │   ├─ emit DrawRequest(drawId: 1, requestId: 1, requestAddress: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   └─ ← [Stop] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [295324] VRFCoordinatorV2Mock::fulfillRandomWordsWithOverride(1, FlexibleDrawVRF: [0xa0Cb889707d426A7A386870A03bc70d1b0697598], [123456 [1.234e5], 789012 [7.89e5], 345678 [3.456e5]])
    │   ├─ [256834] FlexibleDrawVRF::rawFulfillRandomWords(1, [123456 [1.234e5], 789012 [7.89e5], 345678 [3.456e5]])
    │   │   ├─ [2535] MockERC721Enumerable::balanceOf(FlexibleDrawVRF: [0xa0Cb889707d426A7A386870A03bc70d1b0697598]) [staticcall]
    │   │   │   └─ ← [Return] 10
    │   │   ├─ [2535] MockERC721Enumerable::balanceOf(FlexibleDrawVRF: [0xa0Cb889707d426A7A386870A03bc70d1b0697598]) [staticcall]
    │   │   │   └─ ← [Return] 10
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, tokenId: 1)
    │   │   ├─ emit MintCompleted(ticketId: 1, edition: 3, recipient: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, prize: 1136363636363636360000 [1.136e21])
    │   │   ├─ emit RequestFulfilled(drawId: 1, requestId: 1, resultValue: 0xbcdb354cee6fa011de3e13504c8480ea30880adbd5d776575b1ec310a455266b)
    │   │   └─ ← [Stop] 
    │   ├─ emit RandomWordsFulfilled(requestId: 1, outputSeed: 1, payment: 385691000000 [3.856e11], success: true)
    │   └─ ← [Stop] 
    ├─ [0] VM::startPrank(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   └─ ← [Return] 
    ├─ [75776] FlexibleDrawVRF::claimPrize(1)
    │   ├─ emit SetClaimed(ticketId: 1)
    │   ├─ [2555] MockERC20::balanceOf(FlexibleDrawVRF: [0xa0Cb889707d426A7A386870A03bc70d1b0697598]) [staticcall]
    │   │   └─ ← [Return] 1005000000000000000000000 [1.005e24]
    │   ├─ [8881] MockERC20::transfer(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 1136363636363636360000 [1.136e21])
    │   │   └─ ← [Return] true
    │   ├─ emit PrizeClaimed(ticketId: 1, receiver: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, amount: 1136363636363636360000 [1.136e21])
    │   └─ ← [Stop] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [525] FlexibleDrawVRF::claimed(1) [staticcall]
    │   └─ ← [Return] true
    └─ ← [Stop] 

[PASS] testFulfillRandomWords() (gas: 531030)
Traces:
  [531030] TestFlexibleDrawVRF::testFulfillRandomWords()
    ├─ [0] VM::startPrank(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   └─ ← [Return] 
    ├─ [44437] MockERC20::approve(FlexibleDrawVRF: [0xa0Cb889707d426A7A386870A03bc70d1b0697598], 5000000000000000000000 [5e21])
    │   └─ ← [Return] true
    ├─ [202984] FlexibleDrawVRF::buyFlexibleDraw(5000000000000000000000 [5e21])
    │   ├─ [16399] MockERC20::transferFrom(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, FlexibleDrawVRF: [0xa0Cb889707d426A7A386870A03bc70d1b0697598], 5000000000000000000000 [5e21])
    │   │   └─ ← [Return] true
    │   ├─ [45665] VRFCoordinatorV2Mock::requestRandomWords(0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, 1, 3, 2500000 [2.5e6], 3)
    │   │   ├─ emit RandomWordsRequested(keyHash: 0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, requestId: 1, preSeed: 100, subId: 1, minimumRequestConfirmations: 3, callbackGasLimit: 2500000 [2.5e6], numWords: 3, sender: FlexibleDrawVRF: [0xa0Cb889707d426A7A386870A03bc70d1b0697598])
    │   │   └─ ← [Return] 1
    │   ├─ emit DrawRequest(drawId: 1, requestId: 1, requestAddress: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   └─ ← [Stop] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [295324] VRFCoordinatorV2Mock::fulfillRandomWordsWithOverride(1, FlexibleDrawVRF: [0xa0Cb889707d426A7A386870A03bc70d1b0697598], [123456 [1.234e5], 789012 [7.89e5], 345678 [3.456e5]])
    │   ├─ [256834] FlexibleDrawVRF::rawFulfillRandomWords(1, [123456 [1.234e5], 789012 [7.89e5], 345678 [3.456e5]])
    │   │   ├─ [2535] MockERC721Enumerable::balanceOf(FlexibleDrawVRF: [0xa0Cb889707d426A7A386870A03bc70d1b0697598]) [staticcall]
    │   │   │   └─ ← [Return] 10
    │   │   ├─ [2535] MockERC721Enumerable::balanceOf(FlexibleDrawVRF: [0xa0Cb889707d426A7A386870A03bc70d1b0697598]) [staticcall]
    │   │   │   └─ ← [Return] 10
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, tokenId: 1)
    │   │   ├─ emit MintCompleted(ticketId: 1, edition: 3, recipient: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, prize: 1136363636363636360000 [1.136e21])
    │   │   ├─ emit RequestFulfilled(drawId: 1, requestId: 1, resultValue: 0xbcdb354cee6fa011de3e13504c8480ea30880adbd5d776575b1ec310a455266b)
    │   │   └─ ← [Stop] 
    │   ├─ emit RandomWordsFulfilled(requestId: 1, outputSeed: 1, payment: 385691000000 [3.856e11], success: true)
    │   └─ ← [Stop] 
    ├─ [428] FlexibleDrawVRF::latestTicketId() [staticcall]
    │   └─ ← [Return] 1
    └─ ← [Stop] 

[PASS] testGetNFTCounts() (gas: 21388)
Traces:
  [21388] TestFlexibleDrawVRF::testGetNFTCounts()
    ├─ [7782] FlexibleDrawVRF::getScratcherCount() [staticcall]
    │   ├─ [2535] MockERC721Enumerable::balanceOf(FlexibleDrawVRF: [0xa0Cb889707d426A7A386870A03bc70d1b0697598]) [staticcall]
    │   │   └─ ← [Return] 10
    │   └─ ← [Return] 10
    ├─ [7815] FlexibleDrawVRF::getVoyagerCount() [staticcall]
    │   ├─ [2535] MockERC721Enumerable::balanceOf(FlexibleDrawVRF: [0xa0Cb889707d426A7A386870A03bc70d1b0697598]) [staticcall]
    │   │   └─ ← [Return] 10
    │   └─ ← [Return] 10
    └─ ← [Stop] 

[PASS] testNFTDistribution() (gas: 627440)
Logs:
  Scratchers determined during callback: 0
  Voyagers determined during callback: 0
  Scratchers distributed during claim: 0
  Voyagers distributed during claim: 0

Traces:
  [627440] TestFlexibleDrawVRF::testNFTDistribution()
    ├─ [0] VM::startPrank(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   └─ ← [Return] 
    ├─ [44437] MockERC20::approve(FlexibleDrawVRF: [0xa0Cb889707d426A7A386870A03bc70d1b0697598], 50000000000000000000000 [5e22])
    │   └─ ← [Return] true
    ├─ [202984] FlexibleDrawVRF::buyFlexibleDraw(50000000000000000000000 [5e22])
    │   ├─ [16399] MockERC20::transferFrom(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, FlexibleDrawVRF: [0xa0Cb889707d426A7A386870A03bc70d1b0697598], 50000000000000000000000 [5e22])
    │   │   └─ ← [Return] true
    │   ├─ [45665] VRFCoordinatorV2Mock::requestRandomWords(0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, 1, 3, 2500000 [2.5e6], 3)
    │   │   ├─ emit RandomWordsRequested(keyHash: 0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, requestId: 1, preSeed: 100, subId: 1, minimumRequestConfirmations: 3, callbackGasLimit: 2500000 [2.5e6], numWords: 3, sender: FlexibleDrawVRF: [0xa0Cb889707d426A7A386870A03bc70d1b0697598])
    │   │   └─ ← [Return] 1
    │   ├─ emit DrawRequest(drawId: 1, requestId: 1, requestAddress: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   └─ ← [Stop] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [295469] VRFCoordinatorV2Mock::fulfillRandomWordsWithOverride(1, FlexibleDrawVRF: [0xa0Cb889707d426A7A386870A03bc70d1b0697598], [123456 [1.234e5], 789012 [7.89e5], 10])
    │   ├─ [257003] FlexibleDrawVRF::rawFulfillRandomWords(1, [123456 [1.234e5], 789012 [7.89e5], 10])
    │   │   ├─ [2535] MockERC721Enumerable::balanceOf(FlexibleDrawVRF: [0xa0Cb889707d426A7A386870A03bc70d1b0697598]) [staticcall]
    │   │   │   └─ ← [Return] 10
    │   │   ├─ [2535] MockERC721Enumerable::balanceOf(FlexibleDrawVRF: [0xa0Cb889707d426A7A386870A03bc70d1b0697598]) [staticcall]
    │   │   │   └─ ← [Return] 10
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, tokenId: 1)
    │   │   ├─ emit MintCompleted(ticketId: 1, edition: 3, recipient: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, prize: 11363636363636363635000 [1.136e22])
    │   │   ├─ emit RequestFulfilled(drawId: 1, requestId: 1, resultValue: 0x4d3294f87ae6c0776e7a3032c4918b2caa90fc6bd9ad888cbf56a87beb10ac2e)
    │   │   └─ ← [Stop] 
    │   ├─ emit RandomWordsFulfilled(requestId: 1, outputSeed: 1, payment: 385860000000 [3.858e11], success: true)
    │   └─ ← [Stop] 
    ├─ [428] FlexibleDrawVRF::latestTicketId() [staticcall]
    │   └─ ← [Return] 1
    ├─ [526] FlexibleDrawVRF::ticketToScratcherCount(1) [staticcall]
    │   └─ ← [Return] 0
    ├─ [570] FlexibleDrawVRF::ticketToVoyagerCount(1) [staticcall]
    │   └─ ← [Return] 0
    ├─ [0] console::log("Scratchers determined during callback:", 0) [staticcall]
    │   └─ ← [Stop] 
    ├─ [0] console::log("Voyagers determined during callback:", 0) [staticcall]
    │   └─ ← [Stop] 
    ├─ [535] MockERC721Enumerable::balanceOf(FlexibleDrawVRF: [0xa0Cb889707d426A7A386870A03bc70d1b0697598]) [staticcall]
    │   └─ ← [Return] 10
    ├─ [535] MockERC721Enumerable::balanceOf(FlexibleDrawVRF: [0xa0Cb889707d426A7A386870A03bc70d1b0697598]) [staticcall]
    │   └─ ← [Return] 10
    ├─ [0] VM::startPrank(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   └─ ← [Return] 
    ├─ [75776] FlexibleDrawVRF::claimPrize(1)
    │   ├─ emit SetClaimed(ticketId: 1)
    │   ├─ [2555] MockERC20::balanceOf(FlexibleDrawVRF: [0xa0Cb889707d426A7A386870A03bc70d1b0697598]) [staticcall]
    │   │   └─ ← [Return] 1050000000000000000000000 [1.05e24]
    │   ├─ [8881] MockERC20::transfer(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 11363636363636363635000 [1.136e22])
    │   │   └─ ← [Return] true
    │   ├─ emit PrizeClaimed(ticketId: 1, receiver: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, amount: 11363636363636363635000 [1.136e22])
    │   └─ ← [Stop] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [535] MockERC721Enumerable::balanceOf(FlexibleDrawVRF: [0xa0Cb889707d426A7A386870A03bc70d1b0697598]) [staticcall]
    │   └─ ← [Return] 10
    ├─ [535] MockERC721Enumerable::balanceOf(FlexibleDrawVRF: [0xa0Cb889707d426A7A386870A03bc70d1b0697598]) [staticcall]
    │   └─ ← [Return] 10
    ├─ [0] console::log("Scratchers distributed during claim:", 0) [staticcall]
    │   └─ ← [Stop] 
    ├─ [0] console::log("Voyagers distributed during claim:", 0) [staticcall]
    │   └─ ← [Stop] 
    ├─ [525] FlexibleDrawVRF::claimed(1) [staticcall]
    │   └─ ← [Return] true
    ├─ [526] FlexibleDrawVRF::ticketToScratcherCount(1) [staticcall]
    │   └─ ← [Return] 0
    ├─ [570] FlexibleDrawVRF::ticketToVoyagerCount(1) [staticcall]
    │   └─ ← [Return] 0
    └─ ← [Stop] 

[PASS] testUpdateChances() (gas: 94981)
Traces:
  [94981] TestFlexibleDrawVRF::testUpdateChances()
    ├─ [28736] FlexibleDrawVRF::updateScratcherChance(60)
    │   └─ ← [Stop] 
    ├─ [28716] FlexibleDrawVRF::updateVoyagerChance(40)
    │   └─ ← [Stop] 
    ├─ [28716] FlexibleDrawVRF::updateMinNFTChance(15)
    │   └─ ← [Stop] 
    ├─ [427] FlexibleDrawVRF::scratcherChance() [staticcall]
    │   └─ ← [Return] 60
    ├─ [384] FlexibleDrawVRF::voyagerChance() [staticcall]
    │   └─ ← [Return] 40
    ├─ [406] FlexibleDrawVRF::minNFTChance() [staticcall]
    │   └─ ← [Return] 15
    └─ ← [Stop] 

[PASS] testUpdateChancesExceptions() (gas: 80835)
Traces:
  [80835] TestFlexibleDrawVRF::testUpdateChancesExceptions()
    ├─ [0] VM::expectRevert(InvalidCost())
    │   └─ ← [Return] 
    ├─ [23768] FlexibleDrawVRF::updateScratcherChance(101)
    │   └─ ← [Revert] InvalidCost()
    ├─ [0] VM::expectRevert(InvalidCost())
    │   └─ ← [Return] 
    ├─ [23748] FlexibleDrawVRF::updateVoyagerChance(101)
    │   └─ ← [Revert] InvalidCost()
    ├─ [0] VM::expectRevert(InvalidCost())
    │   └─ ← [Return] 
    ├─ [23748] FlexibleDrawVRF::updateMinNFTChance(101)
    │   └─ ← [Revert] InvalidCost()
    └─ ← [Stop] 

[PASS] testUpdateNFTAddresses() (gas: 1783470)
Traces:
  [1783470] TestFlexibleDrawVRF::testUpdateNFTAddresses()
    ├─ [823939] → new MockERC721Enumerable@0x1d1499e622D69689cdf9004d05Ec547d650Ff211
    │   └─ ← [Return] 3593 bytes of code
    ├─ [823939] → new MockERC721Enumerable@0xA4AD4f68d0b91CFD19687c881e50f3A00242828c
    │   └─ ← [Return] 3593 bytes of code
    ├─ [31105] FlexibleDrawVRF::updateScratcherNFT(MockERC721Enumerable: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211])
    │   └─ ← [Stop] 
    ├─ [31137] FlexibleDrawVRF::updateVoyagerNFT(MockERC721Enumerable: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c])
    │   └─ ← [Stop] 
    ├─ [402] FlexibleDrawVRF::scratcherNFT() [staticcall]
    │   └─ ← [Return] MockERC721Enumerable: [0x1d1499e622D69689cdf9004d05Ec547d650Ff211]
    ├─ [402] FlexibleDrawVRF::voyagerNFT() [staticcall]
    │   └─ ← [Return] MockERC721Enumerable: [0xA4AD4f68d0b91CFD19687c881e50f3A00242828c]
    └─ ← [Stop] 

[PASS] testUpdateNFTAddressesExceptions() (gas: 60517)
Traces:
  [60517] TestFlexibleDrawVRF::testUpdateNFTAddressesExceptions()
    ├─ [0] VM::expectRevert(InvalidNFTAddress())
    │   └─ ← [Return] 
    ├─ [25870] FlexibleDrawVRF::updateScratcherNFT(0x0000000000000000000000000000000000000000)
    │   └─ ← [Revert] InvalidNFTAddress()
    ├─ [0] VM::expectRevert(InvalidNFTAddress())
    │   └─ ← [Return] 
    ├─ [25890] FlexibleDrawVRF::updateVoyagerNFT(0x0000000000000000000000000000000000000000)
    │   └─ ← [Revert] InvalidNFTAddress()
    └─ ← [Stop] 

[PASS] testUpdateNFTCosts() (gas: 65050)
Traces:
  [65050] TestFlexibleDrawVRF::testUpdateNFTCosts()
    ├─ [28774] FlexibleDrawVRF::updateScratcherCost(25000000000000000000000 [2.5e22])
    │   └─ ← [Stop] 
    ├─ [28782] FlexibleDrawVRF::updateVoyagerCost(30000000000000000000000 [3e22])
    │   └─ ← [Stop] 
    ├─ [384] FlexibleDrawVRF::scratcherCost() [staticcall]
    │   └─ ← [Return] 25000000000000000000000 [2.5e22]
    ├─ [407] FlexibleDrawVRF::voyagerCost() [staticcall]
    │   └─ ← [Return] 30000000000000000000000 [3e22]
    └─ ← [Stop] 

Suite result: ok. 11 passed; 0 failed; 0 skipped; finished in 8.79ms (2.21ms CPU time)

Ran 3 tests for contracts/tests/Polygon/ScratchVRF.t.sol:TestScratchVRF_POLYGON
[PASS] testSubscription() (gas: 5568)
Traces:
  [5568] TestScratchVRF_POLYGON::testSubscription()
    ├─ [295] ScratchVRF::SUBSCRIPTION_ID() [staticcall]
    │   └─ ← [Return] 951
    └─ ← [Stop] 

[PASS] testchangeBaseCost() (gas: 37843)
Traces:
  [37843] TestScratchVRF_POLYGON::testchangeBaseCost()
    ├─ [2406] ScratchVRF::baseCost() [staticcall]
    │   └─ ← [Return] 3000000000000000000000 [3e21]
    ├─ [28826] ScratchVRF::changeBaseCost(1000000000000000000000 [1e21])
    │   └─ ← [Stop] 
    ├─ [406] ScratchVRF::baseCost() [staticcall]
    │   └─ ← [Return] 1000000000000000000000 [1e21]
    └─ ← [Stop] 

[PASS] testchangeBaseCostExceptions() (gas: 142623)
Traces:
  [142623] TestScratchVRF_POLYGON::testchangeBaseCostExceptions()
    ├─ [2406] ScratchVRF::baseCost() [staticcall]
    │   └─ ← [Return] 3000000000000000000000 [3e21]
    ├─ [0] VM::startPrank(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   └─ ← [Return] 
    ├─ [0] VM::expectRevert(NotMaster())
    │   └─ ← [Return] 
    ├─ [23806] ScratchVRF::changeBaseCost(1000000000000000000000 [1e21])
    │   └─ ← [Revert] NotMaster()
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::expectRevert(InvalidCost())
    │   └─ ← [Return] 
    ├─ [25958] ScratchVRF::changeBaseCost(3000000000000000000000 [3e21])
    │   └─ ← [Revert] InvalidCost()
    ├─ [0] VM::expectRevert(InvalidCost())
    │   └─ ← [Return] 
    ├─ [23751] ScratchVRF::changeBaseCost(0)
    │   └─ ← [Revert] InvalidCost()
    ├─ [28826] ScratchVRF::changeBaseCost(1000000000000000000000 [1e21])
    │   └─ ← [Stop] 
    ├─ [0] VM::expectRevert(InvalidCost())
    │   └─ ← [Return] 
    ├─ [25958] ScratchVRF::changeBaseCost(1000000000000000000000 [1e21])
    │   └─ ← [Revert] InvalidCost()
    └─ ← [Stop] 

Suite result: ok. 3 passed; 0 failed; 0 skipped; finished in 1.95s (254.63µs CPU time)

Ran 9 tests for contracts/tests/Polygon/TicketRouterV3.t.sol:TestTicketRouterV3_POLYGON
[PASS] test_BuyTicketsWithNative() (gas: 339052)
Logs:
  buyTicketsWithNative executed successfully

Traces:
  [339052] TestTicketRouterV3_POLYGON::test_BuyTicketsWithNative()
    ├─ [0] VM::startPrank(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D])
    │   └─ ← [Return] 
    ├─ [0] VM::mockCall(TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], 0xa3018086000000000000000000000000abce2e6de1bf18722ee06eee85f07fdc90a3bc9c0000000000000000000000000000000000000000000000000000000000000001, 0x000000000000000000000000000000000000000000000000016345785d8a0000)
    │   └─ ← [Return] 
    ├─ [0] VM::mockCall(0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619, 0xd0e30db0, 0x)
    │   └─ ← [Return] 
    ├─ [0] VM::mockCall(0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619, 0x095ea7b3000000000000000000000000e592427a0aece92de3edee1f18e0157c0586156400000000000000000000000000000000000000000000000002c68af0bb140000, 0x0000000000000000000000000000000000000000000000000000000000000001)
    │   └─ ← [Return] 
    ├─ [0] VM::mockCall(0xE592427A0AEce92De3Edee1F18E0157C05861564, 0xdb3e2198, 0x000000000000000000000000000000000000000000000000016345785d8a0000)
    │   └─ ← [Return] 
    ├─ [0] VM::mockCall(0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619, 0x2e1a7d4d000000000000000000000000000000000000000000000000016345785d8a0000, 0x)
    │   └─ ← [Return] 
    ├─ [0] VM::mockCall(0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc, 0x095ea7b3000000000000000000000000abce2e6de1bf18722ee06eee85f07fdc90a3bc9c0000000000000000000000000000000000000000000000008ac7230489e80000, 0x0000000000000000000000000000000000000000000000000000000000000001)
    │   └─ ← [Return] 
    ├─ [0] VM::mockCall(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 0x6cd6b5e70000000000000000000000006ca6d1e2d5347bfab1d91e883f1915560e09129d0000000000000000000000000000000000000000000000000000000000000001, 0x)
    │   └─ ← [Return] 
    ├─ [370806] TicketRouterV3::buyTicketsWithNative{value: 200000000000000000}(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 1)
    │   ├─ [0] 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C::baseCost() [staticcall]
    │   │   └─ ← [Return] 10000000000000000000 [1e19]
    │   ├─ [23977] 0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270::deposit{value: 200000000000000000}()
    │   │   ├─  emit topic 0: 0xe1fffcc4923d04b559f4d29a8bfc6cda04eb5b0d3c460751c2402c5c5cc9109c
    │   │   │       topic 1: 0x0000000000000000000000008ad159a275aee56fb2334dbb69036e9c7bacee9b
    │   │   │           data: 0x00000000000000000000000000000000000000000000000002c68af0bb140000
    │   │   └─ ← [Stop] 
    │   ├─ [0] 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C::baseCost() [staticcall]
    │   │   └─ ← [Return] 10000000000000000000 [1e19]
    │   ├─ [99080] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::quoteExactOutput(0xc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619, 10000000000000000000 [1e19])
    │   │   ├─ [70578] 0xd19A1C8278D0420BFb2c825D99DC31fF86224607::128acb08(000000000000000000000000b27308f9f90d607463bb33ea1bebb41c27ce5ab60000000000000000000000000000000000000000000000000000000000000001ffffffffffffffffffffffffffffffffffffffffffffffff7538dcfb7618000000000000000000000000000000000000000000000000000000000001000276a400000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000000002bc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619000000000000000000000000000000000000000000)
    │   │   │   ├─ [32908] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::transfer(0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, 10000000000000000000 [1e19])
    │   │   │   │   ├─ [30230] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::transfer(0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, 10000000000000000000 [1e19]) [delegatecall]
    │   │   │   │   │   ├─ emit Transfer(from: 0xd19A1C8278D0420BFb2c825D99DC31fF86224607, to: 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, value: 10000000000000000000 [1e19])
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   └─ ← [Return] true
    │   │   │   ├─ [2608] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::balanceOf(0xd19A1C8278D0420BFb2c825D99DC31fF86224607) [staticcall]
    │   │   │   │   └─ ← [Return] 13725398670866980791 [1.372e19]
    │   │   │   ├─ [2565] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::fa461e33(000000000000000000000000000000000000000000000000000001cab07cb655ffffffffffffffffffffffffffffffffffffffffffffffff7538dcfb761800000000000000000000000000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000000000000000002bc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619000000000000000000000000000000000000000000)
    │   │   │   │   └─ ← [Revert] 0x000000000000000000000000000000000000000000000000000001cab07cb655
    │   │   │   └─ ← [Revert] 0x000000000000000000000000000000000000000000000000000001cab07cb655
    │   │   └─ ← [Return] 1970055984725 [1.97e12]
    │   ├─ [91861] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::quoteExactOutput(0x7ceb23fd6bc0add59e62ac25578270cff1b9f619000bb80d500b1d8e8ef31e21c99d1db9a6444d3adf1270, 1970055984725 [1.97e12])
    │   │   ├─ [65459] 0x167384319B41F7094e62f7506409Eb38079AbfF8::128acb08(000000000000000000000000b27308f9f90d607463bb33ea1bebb41c27ce5ab60000000000000000000000000000000000000000000000000000000000000001fffffffffffffffffffffffffffffffffffffffffffffffffffffe354f8349ab00000000000000000000000000000000000000000000000000000001000276a400000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000000002b7ceb23fd6bc0add59e62ac25578270cff1b9f619000bb80d500b1d8e8ef31e21c99d1db9a6444d3adf1270000000000000000000000000000000000000000000)
    │   │   │   ├─ [30338] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::transfer(0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, 1970055984725 [1.97e12])
    │   │   │   │   ├─ emit Transfer(from: 0x167384319B41F7094e62f7506409Eb38079AbfF8, to: 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, value: 1970055984725 [1.97e12])
    │   │   │   │   └─ ← [Return] true
    │   │   │   ├─ [2564] 0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270::balanceOf(0x167384319B41F7094e62f7506409Eb38079AbfF8) [staticcall]
    │   │   │   │   └─ ← [Return] 4655833872707599597031846 [4.655e24]
    │   │   │   ├─ [2565] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::fa461e33(00000000000000000000000000000000000000000000000000140734c5374079fffffffffffffffffffffffffffffffffffffffffffffffffffffe354f8349ab0000000000000000000000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000000000000000002b7ceb23fd6bc0add59e62ac25578270cff1b9f619000bb80d500b1d8e8ef31e21c99d1db9a6444d3adf1270000000000000000000000000000000000000000000)
    │   │   │   │   └─ ← [Revert] 0x00000000000000000000000000000000000000000000000000140734c5374079
    │   │   │   └─ ← [Revert] 0x00000000000000000000000000000000000000000000000000140734c5374079
    │   │   └─ ← [Return] 5637422762639481 [5.637e15]
    │   ├─ [24453] 0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270::approve(0xE592427A0AEce92De3Edee1F18E0157C05861564, 200000000000000000 [2e17])
    │   │   ├─ emit Approval(owner: TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], spender: 0xE592427A0AEce92De3Edee1F18E0157C05861564, value: 200000000000000000 [2e17])
    │   │   └─ ← [Return] true
    │   ├─ [94480] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::quoteExactOutput(0xc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619, 10000000000000000000 [1e19])
    │   │   ├─ [70578] 0xd19A1C8278D0420BFb2c825D99DC31fF86224607::128acb08(000000000000000000000000b27308f9f90d607463bb33ea1bebb41c27ce5ab60000000000000000000000000000000000000000000000000000000000000001ffffffffffffffffffffffffffffffffffffffffffffffff7538dcfb7618000000000000000000000000000000000000000000000000000000000001000276a400000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000000002bc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619000000000000000000000000000000000000000000)
    │   │   │   ├─ [32908] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::transfer(0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, 10000000000000000000 [1e19])
    │   │   │   │   ├─ [30230] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::transfer(0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, 10000000000000000000 [1e19]) [delegatecall]
    │   │   │   │   │   ├─ emit Transfer(from: 0xd19A1C8278D0420BFb2c825D99DC31fF86224607, to: 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, value: 10000000000000000000 [1e19])
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   └─ ← [Return] true
    │   │   │   ├─ [2608] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::balanceOf(0xd19A1C8278D0420BFb2c825D99DC31fF86224607) [staticcall]
    │   │   │   │   └─ ← [Return] 13725398670866980791 [1.372e19]
    │   │   │   ├─ [2565] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::fa461e33(000000000000000000000000000000000000000000000000000001cab07cb655ffffffffffffffffffffffffffffffffffffffffffffffff7538dcfb761800000000000000000000000000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000000000000000002bc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619000000000000000000000000000000000000000000)
    │   │   │   │   └─ ← [Revert] 0x000000000000000000000000000000000000000000000000000001cab07cb655
    │   │   │   └─ ← [Revert] 0x000000000000000000000000000000000000000000000000000001cab07cb655
    │   │   └─ ← [Return] 1970055984725 [1.97e12]
    │   ├─ [0] 0xE592427A0AEce92De3Edee1F18E0157C05861564::exactOutputSingle(ExactOutputSingleParams({ tokenIn: 0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270, tokenOut: 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619, fee: 3000, recipient: 0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b, deadline: 1698587241 [1.698e9], amountOut: 1970055984725 [1.97e12], amountInMaximum: 200000000000000000 [2e17], sqrtPriceLimitX96: 0 }))
    │   │   └─ ← [Return] 100000000000000000 [1e17]
    │   ├─ [24768] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::approve(0xE592427A0AEce92De3Edee1F18E0157C05861564, 1970055984725 [1.97e12])
    │   │   ├─ emit Approval(owner: TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], spender: 0xE592427A0AEce92De3Edee1F18E0157C05861564, value: 1970055984725 [1.97e12])
    │   │   └─ ← [Return] true
    │   ├─ [0] 0xE592427A0AEce92De3Edee1F18E0157C05861564::exactOutputSingle(ExactOutputSingleParams({ tokenIn: 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619, tokenOut: 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc, fee: 3000, recipient: 0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b, deadline: 1698587241 [1.698e9], amountOut: 10000000000000000000 [1e19], amountInMaximum: 1970055984725 [1.97e12], sqrtPriceLimitX96: 0 }))
    │   │   └─ ← [Return] 100000000000000000 [1e17]
    │   ├─ [9230] 0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270::withdraw(100000000000000000 [1e17])
    │   │   ├─ [55] TicketRouterV3::receive{value: 100000000000000000}()
    │   │   │   └─ ← [Stop] 
    │   │   ├─  emit topic 0: 0x7fcf532c15f0a6db0bd6d0e038bea71d30d808c7d98cb3bf7268a95bf5081b65
    │   │   │       topic 1: 0x0000000000000000000000008ad159a275aee56fb2334dbb69036e9c7bacee9b
    │   │   │           data: 0x000000000000000000000000000000000000000000000000016345785d8a0000
    │   │   └─ ← [Stop] 
    │   ├─ [0] user::fallback{value: 100000000000000000}()
    │   │   └─ ← [Stop] 
    │   ├─ [0] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::approve(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 10000000000000000000 [1e19])
    │   │   └─ ← [Return] true
    │   ├─ [0] 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C::bulkPurchase(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], 1)
    │   │   └─ ← [Return] 
    │   ├─ emit TokenPurchase(buyer: user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], token: 0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270, amount: 100000000000000000 [1e17], receivedAmount: 10000000000000000000 [1e19])
    │   └─ ← [Stop] 
    ├─ emit log(val: "buyTicketsWithNative executed successfully")
    ├─ [0] VM::clearMockedCalls()
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    └─ ← [Stop] 

[PASS] test_BuyTicketsWithVerse() (gas: 49682)
Logs:
  buyTickets executed successfully

Traces:
  [49682] TestTicketRouterV3_POLYGON::test_BuyTicketsWithVerse()
    ├─ [0] VM::startPrank(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D])
    │   └─ ← [Return] 
    ├─ [0] VM::mockCall(0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc, 0x23b872dd0000000000000000000000006ca6d1e2d5347bfab1d91e883f1915560e09129d0000000000000000000000008ad159a275aee56fb2334dbb69036e9c7bacee9b0000000000000000000000000000000000000000000000008ac7230489e80000, 0x0000000000000000000000000000000000000000000000000000000000000001)
    │   └─ ← [Return] 
    ├─ [0] VM::mockCall(0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc, 0x095ea7b3000000000000000000000000abce2e6de1bf18722ee06eee85f07fdc90a3bc9c0000000000000000000000000000000000000000000000008ac7230489e80000, 0x0000000000000000000000000000000000000000000000000000000000000001)
    │   └─ ← [Return] 
    ├─ [0] VM::mockCall(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 0x6cd6b5e70000000000000000000000006ca6d1e2d5347bfab1d91e883f1915560e09129d0000000000000000000000000000000000000000000000000000000000000001, 0x)
    │   └─ ← [Return] 
    ├─ [30757] TicketRouterV3::buyTickets(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 1)
    │   ├─ [0] 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C::baseCost() [staticcall]
    │   │   └─ ← [Return] 10000000000000000000 [1e19]
    │   ├─ [0] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::transferFrom(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], 10000000000000000000 [1e19])
    │   │   └─ ← [Return] true
    │   ├─ [0] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::approve(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 10000000000000000000 [1e19])
    │   │   └─ ← [Return] true
    │   ├─ [0] 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C::bulkPurchase(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], 1)
    │   │   └─ ← [Return] 
    │   ├─ emit TokenPurchase(buyer: user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], token: 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc, amount: 10000000000000000000 [1e19], receivedAmount: 10000000000000000000 [1e19])
    │   └─ ← [Stop] 
    ├─ emit log(val: "buyTickets executed successfully")
    ├─ [0] VM::clearMockedCalls()
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    └─ ← [Stop] 

[PASS] test_BuyWithToken_VERSE() (gas: 50817)
Logs:
  buyWithToken with VERSE executed successfully

Traces:
  [50817] TestTicketRouterV3_POLYGON::test_BuyWithToken_VERSE()
    ├─ [0] VM::startPrank(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D])
    │   └─ ← [Return] 
    ├─ [0] VM::mockCall(0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc, 0x23b872dd0000000000000000000000006ca6d1e2d5347bfab1d91e883f1915560e09129d0000000000000000000000008ad159a275aee56fb2334dbb69036e9c7bacee9b0000000000000000000000000000000000000000000000008ac7230489e80000, 0x0000000000000000000000000000000000000000000000000000000000000001)
    │   └─ ← [Return] 
    ├─ [0] VM::mockCall(0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc, 0x095ea7b3000000000000000000000000abce2e6de1bf18722ee06eee85f07fdc90a3bc9c0000000000000000000000000000000000000000000000008ac7230489e80000, 0x0000000000000000000000000000000000000000000000000000000000000001)
    │   └─ ← [Return] 
    ├─ [0] VM::mockCall(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 0x6cd6b5e70000000000000000000000006ca6d1e2d5347bfab1d91e883f1915560e09129d0000000000000000000000000000000000000000000000000000000000000001, 0x)
    │   └─ ← [Return] 
    ├─ [31566] TicketRouterV3::buyWithToken(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 1, 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc, 10000000000000000000 [1e19])
    │   ├─ [0] 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C::baseCost() [staticcall]
    │   │   └─ ← [Return] 10000000000000000000 [1e19]
    │   ├─ [0] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::transferFrom(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], 10000000000000000000 [1e19])
    │   │   └─ ← [Return] true
    │   ├─ [0] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::approve(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 10000000000000000000 [1e19])
    │   │   └─ ← [Return] true
    │   ├─ [0] 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C::bulkPurchase(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], 1)
    │   │   └─ ← [Return] 
    │   ├─ emit TokenPurchase(buyer: user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], token: 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc, amount: 10000000000000000000 [1e19], receivedAmount: 10000000000000000000 [1e19])
    │   └─ ← [Stop] 
    ├─ emit log(val: "buyWithToken with VERSE executed successfully")
    ├─ [0] VM::clearMockedCalls()
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    └─ ← [Stop] 

[PASS] test_BuyWithToken_WETH() (gas: 192351)
Logs:
  buyWithToken with WETH executed successfully

Traces:
  [196564] TestTicketRouterV3_POLYGON::test_BuyWithToken_WETH()
    ├─ [2608] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::balanceOf(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D]) [staticcall]
    │   └─ ← [Return] 0
    ├─ [0] VM::record()
    │   └─ ← [Return] 
    ├─ [608] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::balanceOf(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D]) [staticcall]
    │   └─ ← [Return] 0
    ├─ [0] VM::accesses(0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619)
    │   └─ ← [Return] [0xb4260ebeada881f749f68942b3f0e36ae8ba2751d11fbbad46a58feb7b4cda51], []
    ├─ [0] VM::load(0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619, 0xb4260ebeada881f749f68942b3f0e36ae8ba2751d11fbbad46a58feb7b4cda51) [staticcall]
    │   └─ ← [Return] 0x0000000000000000000000000000000000000000000000000000000000000000
    ├─ emit WARNING_UninitedSlot(who: 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619, slot: 81483554698576596835570389481286860699230205958993083079619244123112568838737 [8.148e76])
    ├─ emit SlotFound(who: 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619, fsig: 0x70a0823100000000000000000000000000000000000000000000000000000000, keysHash: 0xb4260ebeada881f749f68942b3f0e36ae8ba2751d11fbbad46a58feb7b4cda51, slot: 81483554698576596835570389481286860699230205958993083079619244123112568838737 [8.148e76])
    ├─ [608] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::balanceOf(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D]) [staticcall]
    │   └─ ← [Return] 0
    ├─ [0] VM::load(0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619, 0xb4260ebeada881f749f68942b3f0e36ae8ba2751d11fbbad46a58feb7b4cda51) [staticcall]
    │   └─ ← [Return] 0x0000000000000000000000000000000000000000000000000000000000000000
    ├─ [0] VM::store(0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619, 0xb4260ebeada881f749f68942b3f0e36ae8ba2751d11fbbad46a58feb7b4cda51, 0x00000000000000000000000000000000000000000000003635c9adc5dea00000)
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D])
    │   └─ ← [Return] 
    ├─ [0] VM::mockCall(0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, 0x2f80bb1d00000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000008ac7230489e80000000000000000000000000000000000000000000000000000000000000000002bc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619000000000000000000000000000000000000000000, 0x000000000000000000000000000000000000000000000000016345785d8a0000)
    │   └─ ← [Return] 
    ├─ [0] VM::mockCall(0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619, 0x23b872dd0000000000000000000000006ca6d1e2d5347bfab1d91e883f1915560e09129d0000000000000000000000008ad159a275aee56fb2334dbb69036e9c7bacee9b00000000000000000000000000000000000000000000000002c68af0bb140000, 0x0000000000000000000000000000000000000000000000000000000000000001)
    │   └─ ← [Return] 
    ├─ [0] VM::mockCall(0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619, 0x095ea7b3000000000000000000000000e592427a0aece92de3edee1f18e0157c0586156400000000000000000000000000000000000000000000000002c68af0bb140000, 0x0000000000000000000000000000000000000000000000000000000000000001)
    │   └─ ← [Return] 
    ├─ [0] VM::mockCall(0xE592427A0AEce92De3Edee1F18E0157C05861564, 0xdb3e2198, 0x000000000000000000000000000000000000000000000000016345785d8a0000)
    │   └─ ← [Return] 
    ├─ [0] VM::mockCall(0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619, 0xa9059cbb0000000000000000000000006ca6d1e2d5347bfab1d91e883f1915560e09129d000000000000000000000000000000000000000000000000016345785d8a0000, 0x0000000000000000000000000000000000000000000000000000000000000001)
    │   └─ ← [Return] 
    ├─ [0] VM::mockCall(0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc, 0x095ea7b3000000000000000000000000abce2e6de1bf18722ee06eee85f07fdc90a3bc9c0000000000000000000000000000000000000000000000008ac7230489e80000, 0x0000000000000000000000000000000000000000000000000000000000000001)
    │   └─ ← [Return] 
    ├─ [0] VM::mockCall(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 0x6cd6b5e70000000000000000000000006ca6d1e2d5347bfab1d91e883f1915560e09129d0000000000000000000000000000000000000000000000000000000000000001, 0x)
    │   └─ ← [Return] 
    ├─ [42135] TicketRouterV3::buyWithToken(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 1, 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619, 200000000000000000 [2e17])
    │   ├─ [0] 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C::baseCost() [staticcall]
    │   │   └─ ← [Return] 10000000000000000000 [1e19]
    │   ├─ [0] 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C::baseCost() [staticcall]
    │   │   └─ ← [Return] 10000000000000000000 [1e19]
    │   ├─ [0] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::quoteExactOutput(0xc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619, 10000000000000000000 [1e19])
    │   │   └─ ← [Return] 100000000000000000 [1e17]
    │   ├─ [0] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::transferFrom(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], 200000000000000000 [2e17])
    │   │   └─ ← [Return] true
    │   ├─ [0] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::approve(0xE592427A0AEce92De3Edee1F18E0157C05861564, 200000000000000000 [2e17])
    │   │   └─ ← [Return] true
    │   ├─ [0] 0xE592427A0AEce92De3Edee1F18E0157C05861564::exactOutputSingle(ExactOutputSingleParams({ tokenIn: 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619, tokenOut: 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc, fee: 3000, recipient: 0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b, deadline: 1698587241 [1.698e9], amountOut: 10000000000000000000 [1e19], amountInMaximum: 200000000000000000 [2e17], sqrtPriceLimitX96: 0 }))
    │   │   └─ ← [Return] 100000000000000000 [1e17]
    │   ├─ [0] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::transfer(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], 100000000000000000 [1e17])
    │   │   └─ ← [Return] true
    │   ├─ [0] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::approve(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 10000000000000000000 [1e19])
    │   │   └─ ← [Return] true
    │   ├─ [0] 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C::bulkPurchase(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], 1)
    │   │   └─ ← [Return] 
    │   ├─ emit TokenPurchase(buyer: user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], token: 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619, amount: 100000000000000000 [1e17], receivedAmount: 10000000000000000000 [1e19])
    │   └─ ← [Stop] 
    ├─ emit log(val: "buyWithToken with WETH executed successfully")
    ├─ [0] VM::clearMockedCalls()
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    └─ ← [Stop] 

[PASS] test_EncodePath() (gas: 7528)
Traces:
  [7528] TestTicketRouterV3_POLYGON::test_EncodePath()
    ├─ [1396] TicketRouterV3::testEncodePath(0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619, 0x0000000000000000000000000000000000000123, 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc, 3000, 500) [staticcall]
    │   └─ ← [Return] 0xc708d6f2153933daa50b2d0758955be0a93a8fec0001f40000000000000000000000000000000000000123000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619
    └─ ← [Stop] 

[PASS] test_GetNativePriceForTickets() (gas: 48575)
Traces:
  [48575] TestTicketRouterV3_POLYGON::test_GetNativePriceForTickets()
    ├─ [0] VM::startPrank(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D])
    │   └─ ← [Return] 
    ├─ [0] VM::mockCall(0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, 0x2f80bb1d00000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000008ac7230489e80000000000000000000000000000000000000000000000000000000000000000002bc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619000000000000000000000000000000000000000000, 0x00000000000000000000000000000000000000000000000000b1a2bc2ec50000)
    │   └─ ← [Return] 
    ├─ [0] VM::mockCall(0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, 0x2f80bb1d000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000b1a2bc2ec50000000000000000000000000000000000000000000000000000000000000000002b7ceb23fd6bc0add59e62ac25578270cff1b9f619000bb80d500b1d8e8ef31e21c99d1db9a6444d3adf1270000000000000000000000000000000000000000000, 0x000000000000000000000000000000000000000000000000016345785d8a0000)
    │   └─ ← [Return] 
    ├─ [31474] TicketRouterV3::getNativePriceForTickets(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 1)
    │   ├─ [0] 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C::baseCost() [staticcall]
    │   │   └─ ← [Return] 10000000000000000000 [1e19]
    │   ├─ [0] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::quoteExactOutput(0xc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619, 10000000000000000000 [1e19])
    │   │   └─ ← [Return] 50000000000000000 [5e16]
    │   ├─ [0] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::quoteExactOutput(0x7ceb23fd6bc0add59e62ac25578270cff1b9f619000bb80d500b1d8e8ef31e21c99d1db9a6444d3adf1270, 50000000000000000 [5e16])
    │   │   └─ ← [Return] 100000000000000000 [1e17]
    │   └─ ← [Return] 100000000000000000 [1e17]
    ├─ [0] VM::clearMockedCalls()
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    └─ ← [Stop] 

[PASS] test_GetTokenPriceForTickets() (gas: 70191)
Traces:
  [70191] TestTicketRouterV3_POLYGON::test_GetTokenPriceForTickets()
    ├─ [0] VM::startPrank(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D])
    │   └─ ← [Return] 
    ├─ [25499] TicketRouterV3::getTokenPriceForTickets(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 1, 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc)
    │   ├─ [0] 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C::baseCost() [staticcall]
    │   │   └─ ← [Return] 10000000000000000000 [1e19]
    │   └─ ← [Return] 10000000000000000000 [1e19]
    ├─ [0] VM::mockCall(0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, 0x2f80bb1d00000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000008ac7230489e80000000000000000000000000000000000000000000000000000000000000000002bc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619000000000000000000000000000000000000000000, 0x000000000000000000000000000000000000000000000000016345785d8a0000)
    │   └─ ← [Return] 
    ├─ [28904] TicketRouterV3::getTokenPriceForTickets(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 1, 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619)
    │   ├─ [0] 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C::baseCost() [staticcall]
    │   │   └─ ← [Return] 10000000000000000000 [1e19]
    │   ├─ [0] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::quoteExactOutput(0xc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619, 10000000000000000000 [1e19])
    │   │   └─ ← [Return] 100000000000000000 [1e17]
    │   └─ ← [Return] 100000000000000000 [1e17]
    ├─ [0] VM::clearMockedCalls()
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    └─ ← [Stop] 

[PASS] test_RouterConstruction() (gas: 8406)
Traces:
  [8406] TestTicketRouterV3_POLYGON::test_RouterConstruction()
    ├─ [292] TicketRouterV3::WETH() [staticcall]
    │   └─ ← [Return] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619
    ├─ [293] TicketRouterV3::VERSE_TOKEN() [staticcall]
    │   └─ ← [Return] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc
    ├─ [270] TicketRouterV3::SWAP_ROUTER() [staticcall]
    │   └─ ← [Return] 0xE592427A0AEce92De3Edee1F18E0157C05861564
    ├─ [248] TicketRouterV3::QUOTER() [staticcall]
    │   └─ ← [Return] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6
    └─ ← [Stop] 

[PASS] test_SetCustomPoolFee() (gas: 90481)
Traces:
  [90481] TestTicketRouterV3_POLYGON::test_SetCustomPoolFee()
    ├─ [0] VM::startPrank(deployer: [0xaE0bDc4eEAC5E950B67C6819B118761CaAF61946])
    │   └─ ← [Return] 
    ├─ [2651] TicketRouterV3::getPoolFee(0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619) [staticcall]
    │   └─ ← [Return] 3000
    ├─ [47787] TicketRouterV3::setCustomPoolFee(0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619, 500)
    │   ├─ emit FeeUpdated(token: 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619, fee: 500)
    │   └─ ← [Stop] 
    ├─ [641] TicketRouterV3::getPoolFee(0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619) [staticcall]
    │   └─ ← [Return] 500
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D])
    │   └─ ← [Return] 
    ├─ [0] VM::expectRevert(Not the contract owner)
    │   └─ ← [Return] 
    ├─ [24213] TicketRouterV3::setCustomPoolFee(0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619, 100)
    │   └─ ← [Revert] revert: Not the contract owner
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    └─ ← [Stop] 

Suite result: ok. 9 passed; 0 failed; 0 skipped; finished in 1.96s (2.49ms CPU time)

Ran 32 tests for contracts/tests/Polygon/TicketRouterV3NoMock.t.sol:TestTicketRouterV3NoMock_POLYGON
[PASS] test_BulkPurchaseWithDifferentTicketAmounts() (gas: 376967)
Logs:
  Ticket cost in VERSE: 22000000000000000000000
  VERSE allocated to user: 2200000000000000000000000
  ETH allocated to user: 22000000000000000000000000000000000000000
  WETH allocated to user: 22000000000000000000000000000000000000000
  Current scratcher VERSE balance: 6077066280935834200000000
  Updated scratcher VERSE balance: 2200000000000000000000000
  Successfully purchased 2 tickets with VERSE

Traces:
  [381180] TestTicketRouterV3NoMock_POLYGON::test_BulkPurchaseWithDifferentTicketAmounts()
    ├─ [0] VM::startPrank(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D])
    │   └─ ← [Return] 
    ├─ [5253] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::balanceOf(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D]) [staticcall]
    │   ├─ [2581] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::balanceOf(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D]) [delegatecall]
    │   │   └─ ← [Return] 2200000000000000000000000 [2.2e24]
    │   └─ ← [Return] 2200000000000000000000000 [2.2e24]
    ├─ [753] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::balanceOf(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D]) [staticcall]
    │   ├─ [581] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::balanceOf(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D]) [delegatecall]
    │   │   └─ ← [Return] 2200000000000000000000000 [2.2e24]
    │   └─ ← [Return] 2200000000000000000000000 [2.2e24]
    ├─ [0] VM::load(0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc, 0xb4260ebeada881f749f68942b3f0e36ae8ba2751d11fbbad46a58feb7b4cda51) [staticcall]
    │   └─ ← [Return] 0x00000000000000000000000000000000000000000001d1de3d2d5c712f000000
    ├─ [0] VM::store(0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc, 0xb4260ebeada881f749f68942b3f0e36ae8ba2751d11fbbad46a58feb7b4cda51, 0x00000000000000000000000000000000000000000001d1de3d2d5c712f000000)
    │   └─ ← [Return] 
    ├─ [29088] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::approve(TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], 2200000000000000000000000 [2.2e24])
    │   ├─ [4754] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::approve(TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], 2200000000000000000000000 [2.2e24]) [delegatecall]
    │   │   ├─ emit Approval(owner: user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], spender: TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], value: 2200000000000000000000000 [2.2e24])
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [29088] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::approve(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 2200000000000000000000000 [2.2e24])
    │   ├─ [4754] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::approve(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 2200000000000000000000000 [2.2e24]) [delegatecall]
    │   │   ├─ emit Approval(owner: user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], spender: 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, value: 2200000000000000000000000 [2.2e24])
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [283560] TicketRouterV3::buyTickets(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 2)
    │   ├─ [2406] 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C::baseCost() [staticcall]
    │   │   └─ ← [Return] 22000000000000000000000 [2.2e22]
    │   ├─ [40445] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::transferFrom(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], 44000000000000000000000 [4.4e22])
    │   │   ├─ [37761] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::transferFrom(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], 44000000000000000000000 [4.4e22]) [delegatecall]
    │   │   │   ├─ emit Transfer(from: user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], to: TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], value: 44000000000000000000000 [4.4e22])
    │   │   │   ├─ emit Approval(owner: user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], spender: TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], value: 2156000000000000000000000 [2.156e24])
    │   │   │   └─ ← [Return] true
    │   │   └─ ← [Return] true
    │   ├─ [24832] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::approve(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 44000000000000000000000 [4.4e22])
    │   │   ├─ [24654] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::approve(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 44000000000000000000000 [4.4e22]) [delegatecall]
    │   │   │   ├─ emit Approval(owner: TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], spender: 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, value: 44000000000000000000000 [4.4e22])
    │   │   │   └─ ← [Return] true
    │   │   └─ ← [Return] true
    │   ├─ [224920] 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C::bulkPurchase(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], 2)
    │   │   ├─ [11245] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::transferFrom(TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 44000000000000000000000 [4.4e22])
    │   │   │   ├─ [11061] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::transferFrom(TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 44000000000000000000000 [4.4e22]) [delegatecall]
    │   │   │   │   ├─ emit Transfer(from: TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], to: 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, value: 44000000000000000000000 [4.4e22])
    │   │   │   │   ├─ emit Approval(owner: TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], spender: 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, value: 0)
    │   │   │   │   └─ ← [Return] true
    │   │   │   └─ ← [Return] true
    │   │   ├─ [37210] 0xAE975071Be8F8eE67addBC1A82488F1C24858067::requestRandomWords(0xcc294a196eeeb44da2888d17c0625cc88d70d9760a69d58d853ba6581a9ab0cd, 1274, 3, 2000000 [2e6], 2)
    │   │   │   ├─ emit RandomWordsRequested(keyHash: 0xcc294a196eeeb44da2888d17c0625cc88d70d9760a69d58d853ba6581a9ab0cd, requestId: 21066771076421976617879856991736386838457751365046595947016481348665269909939 [2.106e76], preSeed: 85481969558919373883791013522261647843276997907254150006486368987247823989658 [8.548e76], subId: 1274, minimumRequestConfirmations: 3, callbackGasLimit: 2000000 [2e6], numWords: 2, sender: 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C)
    │   │   │   └─ ← [Return] 21066771076421976617879856991736386838457751365046595947016481348665269909939 [2.106e76]
    │   │   ├─ emit DrawRequest(drawId: 1232, requestId: 21066771076421976617879856991736386838457751365046595947016481348665269909939 [2.106e76], requestAddress: TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b])
    │   │   ├─ [28410] 0xAE975071Be8F8eE67addBC1A82488F1C24858067::requestRandomWords(0xcc294a196eeeb44da2888d17c0625cc88d70d9760a69d58d853ba6581a9ab0cd, 1274, 3, 2000000 [2e6], 2)
    │   │   │   ├─ emit RandomWordsRequested(keyHash: 0xcc294a196eeeb44da2888d17c0625cc88d70d9760a69d58d853ba6581a9ab0cd, requestId: 64615734045720328393999036594058083191477363917117965202021540701223537138046 [6.461e76], preSeed: 57137371003904072189197795894439492504806508527292589860252334233934522956504 [5.713e76], subId: 1274, minimumRequestConfirmations: 3, callbackGasLimit: 2000000 [2e6], numWords: 2, sender: 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C)
    │   │   │   └─ ← [Return] 64615734045720328393999036594058083191477363917117965202021540701223537138046 [6.461e76]
    │   │   ├─ emit DrawRequest(drawId: 1233, requestId: 64615734045720328393999036594058083191477363917117965202021540701223537138046 [6.461e76], requestAddress: TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b])
    │   │   └─ ← [Stop] 
    │   ├─ emit TokenPurchase(buyer: user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], token: 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc, amount: 44000000000000000000000 [4.4e22], receivedAmount: 44000000000000000000000 [4.4e22])
    │   └─ ← [Stop] 
    ├─ emit log(val: "Successfully purchased 2 tickets with VERSE")
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    └─ ← [Stop] 

[PASS] test_BuyRefundMechanism() (gas: 450559)
Logs:
  Ticket cost in VERSE: 22000000000000000000000
  VERSE allocated to user: 2200000000000000000000000
  ETH allocated to user: 22000000000000000000000000000000000000000
  WETH allocated to user: 22000000000000000000000000000000000000000
  Current scratcher VERSE balance: 6077066280935834200000000
  Updated scratcher VERSE balance: 2200000000000000000000000
  WETH balance before: 100000000000000000000
  WETH balance after: 99999138934864872706
  Refund mechanism works correctly

Traces:
  [454772] TestTicketRouterV3NoMock_POLYGON::test_BuyRefundMechanism()
    ├─ [0] VM::startPrank(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D])
    │   └─ ← [Return] 
    ├─ [2608] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::balanceOf(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D]) [staticcall]
    │   └─ ← [Return] 22000000000000000000000000000000000000000 [2.2e40]
    ├─ [608] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::balanceOf(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D]) [staticcall]
    │   └─ ← [Return] 22000000000000000000000000000000000000000 [2.2e40]
    ├─ [0] VM::load(0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619, 0xb4260ebeada881f749f68942b3f0e36ae8ba2751d11fbbad46a58feb7b4cda51) [staticcall]
    │   └─ ← [Return] 0x00000000000000000000000000000040a6f5e0adcbd0d8e032b56f0000000000
    ├─ [0] VM::store(0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619, 0xb4260ebeada881f749f68942b3f0e36ae8ba2751d11fbbad46a58feb7b4cda51, 0x0000000000000000000000000000000000000000000000056bc75e2d63100000)
    │   └─ ← [Return] 
    ├─ [29312] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::approve(TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], 100000000000000000000 [1e20])
    │   ├─ emit Approval(owner: user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], spender: TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], value: 100000000000000000000 [1e20])
    │   └─ ← [Return] true
    ├─ [31888] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::approve(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 220000000000000000000000 [2.2e23])
    │   ├─ [7554] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::approve(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 220000000000000000000000 [2.2e23]) [delegatecall]
    │   │   ├─ emit Approval(owner: user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], spender: 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, value: 220000000000000000000000 [2.2e23])
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [608] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::balanceOf(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D]) [staticcall]
    │   └─ ← [Return] 100000000000000000000 [1e20]
    ├─ [367361] TicketRouterV3::buyWithToken(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 1, 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619, 100000000000000000000 [1e20])
    │   ├─ [2406] 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C::baseCost() [staticcall]
    │   │   └─ ← [Return] 22000000000000000000000 [2.2e22]
    │   ├─ [406] 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C::baseCost() [staticcall]
    │   │   └─ ← [Return] 22000000000000000000000 [2.2e22]
    │   ├─ [99377] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::quoteExactOutput(0xc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619, 22000000000000000000000 [2.2e22])
    │   │   ├─ [70875] 0xd19A1C8278D0420BFb2c825D99DC31fF86224607::128acb08(000000000000000000000000b27308f9f90d607463bb33ea1bebb41c27ce5ab60000000000000000000000000000000000000000000000000000000000000001fffffffffffffffffffffffffffffffffffffffffffffb5760ab10fede40000000000000000000000000000000000000000000000000000000000001000276a400000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000000002bc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619000000000000000000000000000000000000000000)
    │   │   │   ├─ [32908] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::transfer(0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, 22000000000000000000000 [2.2e22])
    │   │   │   │   ├─ [30230] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::transfer(0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, 22000000000000000000000 [2.2e22]) [delegatecall]
    │   │   │   │   │   ├─ emit Transfer(from: 0xd19A1C8278D0420BFb2c825D99DC31fF86224607, to: 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, value: 22000000000000000000000 [2.2e22])
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   └─ ← [Return] true
    │   │   │   ├─ [2608] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::balanceOf(0xd19A1C8278D0420BFb2c825D99DC31fF86224607) [staticcall]
    │   │   │   │   └─ ← [Return] 36305562923214511337 [3.63e19]
    │   │   │   ├─ [2565] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::fa461e33(00000000000000000000000000000000000000000000000000030f225981fafefffffffffffffffffffffffffffffffffffffffffffffb5760ab10fede4000000000000000000000000000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000000000000000002bc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619000000000000000000000000000000000000000000)
    │   │   │   │   └─ ← [Revert] 0x00000000000000000000000000000000000000000000000000030f225981fafe
    │   │   │   └─ ← [Revert] 0x00000000000000000000000000000000000000000000000000030f225981fafe
    │   │   └─ ← [Return] 861065135127294 [8.61e14]
    │   ├─ [37949] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::transferFrom(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], 100000000000000000000 [1e20])
    │   │   ├─ emit Transfer(from: user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], to: TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], value: 100000000000000000000 [1e20])
    │   │   ├─ emit Approval(owner: user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], spender: TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], value: 0)
    │   │   └─ ← [Return] true
    │   ├─ [24768] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::approve(0xE592427A0AEce92De3Edee1F18E0157C05861564, 100000000000000000000 [1e20])
    │   │   ├─ emit Approval(owner: TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], spender: 0xE592427A0AEce92De3Edee1F18E0157C05861564, value: 100000000000000000000 [1e20])
    │   │   └─ ← [Return] true
    │   ├─ [94306] 0xE592427A0AEce92De3Edee1F18E0157C05861564::exactOutputSingle(ExactOutputSingleParams({ tokenIn: 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619, tokenOut: 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc, fee: 3000, recipient: 0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b, deadline: 1744903999 [1.744e9], amountOut: 22000000000000000000000 [2.2e22], amountInMaximum: 100000000000000000000 [1e20], sqrtPriceLimitX96: 0 }))
    │   │   ├─ [89152] 0xd19A1C8278D0420BFb2c825D99DC31fF86224607::128acb08(0000000000000000000000008ad159a275aee56fb2334dbb69036e9c7bacee9b0000000000000000000000000000000000000000000000000000000000000001fffffffffffffffffffffffffffffffffffffffffffffb5760ab10fede40000000000000000000000000000000000000000000000000000000000001000276a400000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000c0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000400000000000000000000000008ad159a275aee56fb2334dbb69036e9c7bacee9b000000000000000000000000000000000000000000000000000000000000002bc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619000000000000000000000000000000000000000000)
    │   │   │   ├─ [32908] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::transfer(TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], 22000000000000000000000 [2.2e22])
    │   │   │   │   ├─ [30230] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::transfer(TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], 22000000000000000000000 [2.2e22]) [delegatecall]
    │   │   │   │   │   ├─ emit Transfer(from: 0xd19A1C8278D0420BFb2c825D99DC31fF86224607, to: TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], value: 22000000000000000000000 [2.2e22])
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   └─ ← [Return] true
    │   │   │   ├─ [2608] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::balanceOf(0xd19A1C8278D0420BFb2c825D99DC31fF86224607) [staticcall]
    │   │   │   │   └─ ← [Return] 36305562923214511337 [3.63e19]
    │   │   │   ├─ [18399] 0xE592427A0AEce92De3Edee1F18E0157C05861564::fa461e33(00000000000000000000000000000000000000000000000000030f225981fafefffffffffffffffffffffffffffffffffffffffffffffb5760ab10fede400000000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000c0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000400000000000000000000000008ad159a275aee56fb2334dbb69036e9c7bacee9b000000000000000000000000000000000000000000000000000000000000002bc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619000000000000000000000000000000000000000000)
    │   │   │   │   ├─ [9249] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::transferFrom(TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], 0xd19A1C8278D0420BFb2c825D99DC31fF86224607, 861065135127294 [8.61e14])
    │   │   │   │   │   ├─ emit Transfer(from: TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], to: 0xd19A1C8278D0420BFb2c825D99DC31fF86224607, value: 861065135127294 [8.61e14])
    │   │   │   │   │   ├─ emit Approval(owner: TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], spender: 0xE592427A0AEce92De3Edee1F18E0157C05861564, value: 99999138934864872706 [9.999e19])
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   └─ ← [Stop] 
    │   │   │   ├─ [608] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::balanceOf(0xd19A1C8278D0420BFb2c825D99DC31fF86224607) [staticcall]
    │   │   │   │   └─ ← [Return] 36306423988349638631 [3.63e19]
    │   │   │   ├─  emit topic 0: 0xc42079f94a6350d7e6235f29174924f928cc2ac818eb64fed8004e115fbcca67
    │   │   │   │       topic 1: 0x000000000000000000000000e592427a0aece92de3edee1f18e0157c05861564
    │   │   │   │       topic 2: 0x0000000000000000000000008ad159a275aee56fb2334dbb69036e9c7bacee9b
    │   │   │   │           data: 0x00000000000000000000000000000000000000000000000000030f225981fafefffffffffffffffffffffffffffffffffffffffffffffb5760ab10fede40000000000000000000000000000000000000000013c64464c1f833b51c941aab01f9000000000000000000000000000000000000000000011e89c2c9cd75e63ecc920000000000000000000000000000000000000000000000000000000000029a67
    │   │   │   └─ ← [Return] 0x00000000000000000000000000000000000000000000000000030f225981fafefffffffffffffffffffffffffffffffffffffffffffffb5760ab10fede400000
    │   │   └─ ← [Return] 861065135127294 [8.61e14]
    │   ├─ [3638] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::transfer(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], 99999138934864872706 [9.999e19])
    │   │   ├─ emit Transfer(from: TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], to: user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], value: 99999138934864872706 [9.999e19])
    │   │   └─ ← [Return] true
    │   ├─ [24832] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::approve(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 22000000000000000000000 [2.2e22])
    │   │   ├─ [24654] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::approve(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 22000000000000000000000 [2.2e22]) [delegatecall]
    │   │   │   ├─ emit Approval(owner: TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], spender: 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, value: 22000000000000000000000 [2.2e22])
    │   │   │   └─ ← [Return] true
    │   │   └─ ← [Return] true
    │   ├─ [127232] 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C::bulkPurchase(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], 1)
    │   │   ├─ [11245] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::transferFrom(TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 22000000000000000000000 [2.2e22])
    │   │   │   ├─ [11061] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::transferFrom(TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 22000000000000000000000 [2.2e22]) [delegatecall]
    │   │   │   │   ├─ emit Transfer(from: TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], to: 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, value: 22000000000000000000000 [2.2e22])
    │   │   │   │   ├─ emit Approval(owner: TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], spender: 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, value: 0)
    │   │   │   │   └─ ← [Return] true
    │   │   │   └─ ← [Return] true
    │   │   ├─ [37210] 0xAE975071Be8F8eE67addBC1A82488F1C24858067::requestRandomWords(0xcc294a196eeeb44da2888d17c0625cc88d70d9760a69d58d853ba6581a9ab0cd, 1274, 3, 2000000 [2e6], 2)
    │   │   │   ├─ emit RandomWordsRequested(keyHash: 0xcc294a196eeeb44da2888d17c0625cc88d70d9760a69d58d853ba6581a9ab0cd, requestId: 21066771076421976617879856991736386838457751365046595947016481348665269909939 [2.106e76], preSeed: 85481969558919373883791013522261647843276997907254150006486368987247823989658 [8.548e76], subId: 1274, minimumRequestConfirmations: 3, callbackGasLimit: 2000000 [2e6], numWords: 2, sender: 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C)
    │   │   │   └─ ← [Return] 21066771076421976617879856991736386838457751365046595947016481348665269909939 [2.106e76]
    │   │   ├─ emit DrawRequest(drawId: 1232, requestId: 21066771076421976617879856991736386838457751365046595947016481348665269909939 [2.106e76], requestAddress: TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b])
    │   │   └─ ← [Stop] 
    │   ├─ emit TokenPurchase(buyer: user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], token: 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619, amount: 861065135127294 [8.61e14], receivedAmount: 22000000000000000000000 [2.2e22])
    │   └─ ← [Stop] 
    ├─ [608] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::balanceOf(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D]) [staticcall]
    │   └─ ← [Return] 99999138934864872706 [9.999e19]
    ├─ emit log_named_uint(key: "WETH balance before", val: 100000000000000000000 [1e20])
    ├─ emit log_named_uint(key: "WETH balance after", val: 99999138934864872706 [9.999e19])
    ├─ emit log(val: "Refund mechanism works correctly")
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    └─ ← [Stop] 

[PASS] test_BuyTicketsWithNative() (gas: 531166)
Logs:
  Ticket cost in VERSE: 22000000000000000000000
  VERSE allocated to user: 2200000000000000000000000
  ETH allocated to user: 22000000000000000000000000000000000000000
  WETH allocated to user: 22000000000000000000000000000000000000000
  Current scratcher VERSE balance: 6077066280935834200000000
  Updated scratcher VERSE balance: 2200000000000000000000000
  Sent value: 100000000000000000000
  Actually spent: 7599177865887467014

Traces:
  [535379] TestTicketRouterV3NoMock_POLYGON::test_BuyTicketsWithNative()
    ├─ [0] VM::startPrank(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D])
    │   └─ ← [Return] 
    ├─ [0] VM::deal(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], 200000000000000000000 [2e20])
    │   └─ ← [Return] 
    ├─ [31888] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::approve(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 44000000000000000000000 [4.4e22])
    │   ├─ [7554] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::approve(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 44000000000000000000000 [4.4e22]) [delegatecall]
    │   │   ├─ emit Approval(owner: user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], spender: 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, value: 44000000000000000000000 [4.4e22])
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [609841] TicketRouterV3::buyTicketsWithNative{value: 100000000000000000000}(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 1)
    │   ├─ [2406] 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C::baseCost() [staticcall]
    │   │   └─ ← [Return] 22000000000000000000000 [2.2e22]
    │   ├─ [23977] 0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270::deposit{value: 100000000000000000000}()
    │   │   ├─  emit topic 0: 0xe1fffcc4923d04b559f4d29a8bfc6cda04eb5b0d3c460751c2402c5c5cc9109c
    │   │   │       topic 1: 0x0000000000000000000000008ad159a275aee56fb2334dbb69036e9c7bacee9b
    │   │   │           data: 0x0000000000000000000000000000000000000000000000056bc75e2d63100000
    │   │   └─ ← [Stop] 
    │   ├─ [406] 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C::baseCost() [staticcall]
    │   │   └─ ← [Return] 22000000000000000000000 [2.2e22]
    │   ├─ [99377] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::quoteExactOutput(0xc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619, 22000000000000000000000 [2.2e22])
    │   │   ├─ [70875] 0xd19A1C8278D0420BFb2c825D99DC31fF86224607::128acb08(000000000000000000000000b27308f9f90d607463bb33ea1bebb41c27ce5ab60000000000000000000000000000000000000000000000000000000000000001fffffffffffffffffffffffffffffffffffffffffffffb5760ab10fede40000000000000000000000000000000000000000000000000000000000001000276a400000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000000002bc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619000000000000000000000000000000000000000000)
    │   │   │   ├─ [32908] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::transfer(0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, 22000000000000000000000 [2.2e22])
    │   │   │   │   ├─ [30230] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::transfer(0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, 22000000000000000000000 [2.2e22]) [delegatecall]
    │   │   │   │   │   ├─ emit Transfer(from: 0xd19A1C8278D0420BFb2c825D99DC31fF86224607, to: 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, value: 22000000000000000000000 [2.2e22])
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   └─ ← [Return] true
    │   │   │   ├─ [2608] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::balanceOf(0xd19A1C8278D0420BFb2c825D99DC31fF86224607) [staticcall]
    │   │   │   │   └─ ← [Return] 36305562923214511337 [3.63e19]
    │   │   │   ├─ [2565] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::fa461e33(00000000000000000000000000000000000000000000000000030f225981fafefffffffffffffffffffffffffffffffffffffffffffffb5760ab10fede4000000000000000000000000000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000000000000000002bc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619000000000000000000000000000000000000000000)
    │   │   │   │   └─ ← [Revert] 0x00000000000000000000000000000000000000000000000000030f225981fafe
    │   │   │   └─ ← [Revert] 0x00000000000000000000000000000000000000000000000000030f225981fafe
    │   │   └─ ← [Return] 861065135127294 [8.61e14]
    │   ├─ [91872] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::quoteExactOutput(0x7ceb23fd6bc0add59e62ac25578270cff1b9f619000bb80d500b1d8e8ef31e21c99d1db9a6444d3adf1270, 861065135127294 [8.61e14])
    │   │   ├─ [65470] 0x167384319B41F7094e62f7506409Eb38079AbfF8::128acb08(000000000000000000000000b27308f9f90d607463bb33ea1bebb41c27ce5ab60000000000000000000000000000000000000000000000000000000000000001fffffffffffffffffffffffffffffffffffffffffffffffffffcf0dda67e050200000000000000000000000000000000000000000000000000000001000276a400000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000000002b7ceb23fd6bc0add59e62ac25578270cff1b9f619000bb80d500b1d8e8ef31e21c99d1db9a6444d3adf1270000000000000000000000000000000000000000000)
    │   │   │   ├─ [30338] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::transfer(0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, 861065135127294 [8.61e14])
    │   │   │   │   ├─ emit Transfer(from: 0x167384319B41F7094e62f7506409Eb38079AbfF8, to: 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, value: 861065135127294 [8.61e14])
    │   │   │   │   └─ ← [Return] true
    │   │   │   ├─ [2564] 0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270::balanceOf(0x167384319B41F7094e62f7506409Eb38079AbfF8) [staticcall]
    │   │   │   │   └─ ← [Return] 4875322014175209452751849 [4.875e24]
    │   │   │   ├─ [2565] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::fa461e33(0000000000000000000000000000000000000000000000006975b401c13bc606fffffffffffffffffffffffffffffffffffffffffffffffffffcf0dda67e05020000000000000000000000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000000000000000002b7ceb23fd6bc0add59e62ac25578270cff1b9f619000bb80d500b1d8e8ef31e21c99d1db9a6444d3adf1270000000000000000000000000000000000000000000)
    │   │   │   │   └─ ← [Revert] 0x0000000000000000000000000000000000000000000000006975b401c13bc606
    │   │   │   └─ ← [Revert] 0x0000000000000000000000000000000000000000000000006975b401c13bc606
    │   │   └─ ← [Return] 7599177865887467014 [7.599e18]
    │   ├─ [24453] 0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270::approve(0xE592427A0AEce92De3Edee1F18E0157C05861564, 100000000000000000000 [1e20])
    │   │   ├─ emit Approval(owner: TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], spender: 0xE592427A0AEce92De3Edee1F18E0157C05861564, value: 100000000000000000000 [1e20])
    │   │   └─ ← [Return] true
    │   ├─ [94777] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::quoteExactOutput(0xc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619, 22000000000000000000000 [2.2e22])
    │   │   ├─ [70875] 0xd19A1C8278D0420BFb2c825D99DC31fF86224607::128acb08(000000000000000000000000b27308f9f90d607463bb33ea1bebb41c27ce5ab60000000000000000000000000000000000000000000000000000000000000001fffffffffffffffffffffffffffffffffffffffffffffb5760ab10fede40000000000000000000000000000000000000000000000000000000000001000276a400000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000000002bc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619000000000000000000000000000000000000000000)
    │   │   │   ├─ [32908] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::transfer(0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, 22000000000000000000000 [2.2e22])
    │   │   │   │   ├─ [30230] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::transfer(0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, 22000000000000000000000 [2.2e22]) [delegatecall]
    │   │   │   │   │   ├─ emit Transfer(from: 0xd19A1C8278D0420BFb2c825D99DC31fF86224607, to: 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, value: 22000000000000000000000 [2.2e22])
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   └─ ← [Return] true
    │   │   │   ├─ [2608] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::balanceOf(0xd19A1C8278D0420BFb2c825D99DC31fF86224607) [staticcall]
    │   │   │   │   └─ ← [Return] 36305562923214511337 [3.63e19]
    │   │   │   ├─ [2565] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::fa461e33(00000000000000000000000000000000000000000000000000030f225981fafefffffffffffffffffffffffffffffffffffffffffffffb5760ab10fede4000000000000000000000000000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000000000000000002bc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619000000000000000000000000000000000000000000)
    │   │   │   │   └─ ← [Revert] 0x00000000000000000000000000000000000000000000000000030f225981fafe
    │   │   │   └─ ← [Revert] 0x00000000000000000000000000000000000000000000000000030f225981fafe
    │   │   └─ ← [Return] 861065135127294 [8.61e14]
    │   ├─ [89108] 0xE592427A0AEce92De3Edee1F18E0157C05861564::exactOutputSingle(ExactOutputSingleParams({ tokenIn: 0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270, tokenOut: 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619, fee: 3000, recipient: 0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b, deadline: 1744903999 [1.744e9], amountOut: 861065135127294 [8.61e14], amountInMaximum: 100000000000000000000 [1e20], sqrtPriceLimitX96: 0 }))
    │   │   ├─ [83954] 0x167384319B41F7094e62f7506409Eb38079AbfF8::128acb08(0000000000000000000000008ad159a275aee56fb2334dbb69036e9c7bacee9b0000000000000000000000000000000000000000000000000000000000000001fffffffffffffffffffffffffffffffffffffffffffffffffffcf0dda67e050200000000000000000000000000000000000000000000000000000001000276a400000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000c0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000400000000000000000000000008ad159a275aee56fb2334dbb69036e9c7bacee9b000000000000000000000000000000000000000000000000000000000000002b7ceb23fd6bc0add59e62ac25578270cff1b9f619000bb80d500b1d8e8ef31e21c99d1db9a6444d3adf1270000000000000000000000000000000000000000000)
    │   │   │   ├─ [30338] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::transfer(TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], 861065135127294 [8.61e14])
    │   │   │   │   ├─ emit Transfer(from: 0x167384319B41F7094e62f7506409Eb38079AbfF8, to: TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], value: 861065135127294 [8.61e14])
    │   │   │   │   └─ ← [Return] true
    │   │   │   ├─ [2564] 0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270::balanceOf(0x167384319B41F7094e62f7506409Eb38079AbfF8) [staticcall]
    │   │   │   │   └─ ← [Return] 4875322014175209452751849 [4.875e24]
    │   │   │   ├─ [16150] 0xE592427A0AEce92De3Edee1F18E0157C05861564::fa461e33(0000000000000000000000000000000000000000000000006975b401c13bc606fffffffffffffffffffffffffffffffffffffffffffffffffffcf0dda67e0502000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000c0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000400000000000000000000000008ad159a275aee56fb2334dbb69036e9c7bacee9b000000000000000000000000000000000000000000000000000000000000002b7ceb23fd6bc0add59e62ac25578270cff1b9f619000bb80d500b1d8e8ef31e21c99d1db9a6444d3adf1270000000000000000000000000000000000000000000)
    │   │   │   │   ├─ [6984] 0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270::transferFrom(TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], 0x167384319B41F7094e62f7506409Eb38079AbfF8, 7599177865887467014 [7.599e18])
    │   │   │   │   │   ├─ emit Transfer(from: TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], to: 0x167384319B41F7094e62f7506409Eb38079AbfF8, value: 7599177865887467014 [7.599e18])
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   └─ ← [Stop] 
    │   │   │   ├─ [564] 0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270::balanceOf(0x167384319B41F7094e62f7506409Eb38079AbfF8) [staticcall]
    │   │   │   │   └─ ← [Return] 4875329613353075340218863 [4.875e24]
    │   │   │   ├─  emit topic 0: 0xc42079f94a6350d7e6235f29174924f928cc2ac818eb64fed8004e115fbcca67
    │   │   │   │       topic 1: 0x000000000000000000000000e592427a0aece92de3edee1f18e0157c05861564
    │   │   │   │       topic 2: 0x0000000000000000000000008ad159a275aee56fb2334dbb69036e9c7bacee9b
    │   │   │   │           data: 0x0000000000000000000000000000000000000000000000006975b401c13bc606fffffffffffffffffffffffffffffffffffffffffffffffffffcf0dda67e0502000000000000000000000000000000000000000002baa95f3c4d434a305904540000000000000000000000000000000000000000000015f822460d4c4f2320e9fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe9d33
    │   │   │   └─ ← [Return] 0x0000000000000000000000000000000000000000000000006975b401c13bc606fffffffffffffffffffffffffffffffffffffffffffffffffffcf0dda67e0502
    │   │   └─ ← [Return] 7599177865887467014 [7.599e18]
    │   ├─ [24768] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::approve(0xE592427A0AEce92De3Edee1F18E0157C05861564, 861065135127294 [8.61e14])
    │   │   ├─ emit Approval(owner: TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], spender: 0xE592427A0AEce92De3Edee1F18E0157C05861564, value: 861065135127294 [8.61e14])
    │   │   └─ ← [Return] true
    │   ├─ [92206] 0xE592427A0AEce92De3Edee1F18E0157C05861564::exactOutputSingle(ExactOutputSingleParams({ tokenIn: 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619, tokenOut: 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc, fee: 3000, recipient: 0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b, deadline: 1744903999 [1.744e9], amountOut: 22000000000000000000000 [2.2e22], amountInMaximum: 861065135127294 [8.61e14], sqrtPriceLimitX96: 0 }))
    │   │   ├─ [87052] 0xd19A1C8278D0420BFb2c825D99DC31fF86224607::128acb08(0000000000000000000000008ad159a275aee56fb2334dbb69036e9c7bacee9b0000000000000000000000000000000000000000000000000000000000000001fffffffffffffffffffffffffffffffffffffffffffffb5760ab10fede40000000000000000000000000000000000000000000000000000000000001000276a400000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000c0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000400000000000000000000000008ad159a275aee56fb2334dbb69036e9c7bacee9b000000000000000000000000000000000000000000000000000000000000002bc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619000000000000000000000000000000000000000000)
    │   │   │   ├─ [32908] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::transfer(TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], 22000000000000000000000 [2.2e22])
    │   │   │   │   ├─ [30230] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::transfer(TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], 22000000000000000000000 [2.2e22]) [delegatecall]
    │   │   │   │   │   ├─ emit Transfer(from: 0xd19A1C8278D0420BFb2c825D99DC31fF86224607, to: TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], value: 22000000000000000000000 [2.2e22])
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   └─ ← [Return] true
    │   │   │   ├─ [2608] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::balanceOf(0xd19A1C8278D0420BFb2c825D99DC31fF86224607) [staticcall]
    │   │   │   │   └─ ← [Return] 36305562923214511337 [3.63e19]
    │   │   │   ├─ [16299] 0xE592427A0AEce92De3Edee1F18E0157C05861564::fa461e33(00000000000000000000000000000000000000000000000000030f225981fafefffffffffffffffffffffffffffffffffffffffffffffb5760ab10fede400000000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000c0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000400000000000000000000000008ad159a275aee56fb2334dbb69036e9c7bacee9b000000000000000000000000000000000000000000000000000000000000002bc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619000000000000000000000000000000000000000000)
    │   │   │   │   ├─ [9249] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::transferFrom(TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], 0xd19A1C8278D0420BFb2c825D99DC31fF86224607, 861065135127294 [8.61e14])
    │   │   │   │   │   ├─ emit Transfer(from: TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], to: 0xd19A1C8278D0420BFb2c825D99DC31fF86224607, value: 861065135127294 [8.61e14])
    │   │   │   │   │   ├─ emit Approval(owner: TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], spender: 0xE592427A0AEce92De3Edee1F18E0157C05861564, value: 0)
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   └─ ← [Stop] 
    │   │   │   ├─ [608] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::balanceOf(0xd19A1C8278D0420BFb2c825D99DC31fF86224607) [staticcall]
    │   │   │   │   └─ ← [Return] 36306423988349638631 [3.63e19]
    │   │   │   ├─  emit topic 0: 0xc42079f94a6350d7e6235f29174924f928cc2ac818eb64fed8004e115fbcca67
    │   │   │   │       topic 1: 0x000000000000000000000000e592427a0aece92de3edee1f18e0157c05861564
    │   │   │   │       topic 2: 0x0000000000000000000000008ad159a275aee56fb2334dbb69036e9c7bacee9b
    │   │   │   │           data: 0x00000000000000000000000000000000000000000000000000030f225981fafefffffffffffffffffffffffffffffffffffffffffffffb5760ab10fede40000000000000000000000000000000000000000013c64464c1f833b51c941aab01f9000000000000000000000000000000000000000000011e89c2c9cd75e63ecc920000000000000000000000000000000000000000000000000000000000029a67
    │   │   │   └─ ← [Return] 0x00000000000000000000000000000000000000000000000000030f225981fafefffffffffffffffffffffffffffffffffffffffffffffb5760ab10fede400000
    │   │   └─ ← [Return] 861065135127294 [8.61e14]
    │   ├─ [9230] 0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270::withdraw(92400822134112532986 [9.24e19])
    │   │   ├─ [55] TicketRouterV3::receive{value: 92400822134112532986}()
    │   │   │   └─ ← [Stop] 
    │   │   ├─  emit topic 0: 0x7fcf532c15f0a6db0bd6d0e038bea71d30d808c7d98cb3bf7268a95bf5081b65
    │   │   │       topic 1: 0x0000000000000000000000008ad159a275aee56fb2334dbb69036e9c7bacee9b
    │   │   │           data: 0x0000000000000000000000000000000000000000000000050251aa2ba1d439fa
    │   │   └─ ← [Stop] 
    │   ├─ [0] user::fallback{value: 92400822134112532986}()
    │   │   └─ ← [Stop] 
    │   ├─ [24832] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::approve(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 22000000000000000000000 [2.2e22])
    │   │   ├─ [24654] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::approve(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 22000000000000000000000 [2.2e22]) [delegatecall]
    │   │   │   ├─ emit Approval(owner: TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], spender: 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, value: 22000000000000000000000 [2.2e22])
    │   │   │   └─ ← [Return] true
    │   │   └─ ← [Return] true
    │   ├─ [127232] 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C::bulkPurchase(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], 1)
    │   │   ├─ [11245] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::transferFrom(TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 22000000000000000000000 [2.2e22])
    │   │   │   ├─ [11061] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::transferFrom(TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 22000000000000000000000 [2.2e22]) [delegatecall]
    │   │   │   │   ├─ emit Transfer(from: TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], to: 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, value: 22000000000000000000000 [2.2e22])
    │   │   │   │   ├─ emit Approval(owner: TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], spender: 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, value: 0)
    │   │   │   │   └─ ← [Return] true
    │   │   │   └─ ← [Return] true
    │   │   ├─ [37210] 0xAE975071Be8F8eE67addBC1A82488F1C24858067::requestRandomWords(0xcc294a196eeeb44da2888d17c0625cc88d70d9760a69d58d853ba6581a9ab0cd, 1274, 3, 2000000 [2e6], 2)
    │   │   │   ├─ emit RandomWordsRequested(keyHash: 0xcc294a196eeeb44da2888d17c0625cc88d70d9760a69d58d853ba6581a9ab0cd, requestId: 21066771076421976617879856991736386838457751365046595947016481348665269909939 [2.106e76], preSeed: 85481969558919373883791013522261647843276997907254150006486368987247823989658 [8.548e76], subId: 1274, minimumRequestConfirmations: 3, callbackGasLimit: 2000000 [2e6], numWords: 2, sender: 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C)
    │   │   │   └─ ← [Return] 21066771076421976617879856991736386838457751365046595947016481348665269909939 [2.106e76]
    │   │   ├─ emit DrawRequest(drawId: 1232, requestId: 21066771076421976617879856991736386838457751365046595947016481348665269909939 [2.106e76], requestAddress: TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b])
    │   │   └─ ← [Stop] 
    │   ├─ emit TokenPurchase(buyer: user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], token: 0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270, amount: 7599177865887467014 [7.599e18], receivedAmount: 22000000000000000000000 [2.2e22])
    │   └─ ← [Stop] 
    ├─ emit log_named_uint(key: "Sent value", val: 100000000000000000000 [1e20])
    ├─ emit log_named_uint(key: "Actually spent", val: 7599177865887467014 [7.599e18])
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    └─ ← [Stop] 

[PASS] test_BuyTicketsWithVerse() (gas: 303860)
Logs:
  Ticket cost in VERSE: 22000000000000000000000
  VERSE allocated to user: 2200000000000000000000000
  ETH allocated to user: 22000000000000000000000000000000000000000
  WETH allocated to user: 22000000000000000000000000000000000000000
  Current scratcher VERSE balance: 6077066280935834200000000
  Updated scratcher VERSE balance: 2200000000000000000000000

Traces:
  [308072] TestTicketRouterV3NoMock_POLYGON::test_BuyTicketsWithVerse()
    ├─ [0] VM::startPrank(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D])
    │   └─ ← [Return] 
    ├─ [5253] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::balanceOf(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D]) [staticcall]
    │   ├─ [2581] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::balanceOf(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D]) [delegatecall]
    │   │   └─ ← [Return] 2200000000000000000000000 [2.2e24]
    │   └─ ← [Return] 2200000000000000000000000 [2.2e24]
    ├─ [753] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::balanceOf(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D]) [staticcall]
    │   ├─ [581] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::balanceOf(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D]) [delegatecall]
    │   │   └─ ← [Return] 2200000000000000000000000 [2.2e24]
    │   └─ ← [Return] 2200000000000000000000000 [2.2e24]
    ├─ [0] VM::load(0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc, 0xb4260ebeada881f749f68942b3f0e36ae8ba2751d11fbbad46a58feb7b4cda51) [staticcall]
    │   └─ ← [Return] 0x00000000000000000000000000000000000000000001d1de3d2d5c712f000000
    ├─ [0] VM::store(0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc, 0xb4260ebeada881f749f68942b3f0e36ae8ba2751d11fbbad46a58feb7b4cda51, 0x000000000000000000000000000000000000000000084595161401484a000000)
    │   └─ ← [Return] 
    ├─ [31888] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::approve(TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], 44000000000000000000000 [4.4e22])
    │   ├─ [7554] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::approve(TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], 44000000000000000000000 [4.4e22]) [delegatecall]
    │   │   ├─ emit Approval(owner: user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], spender: TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], value: 44000000000000000000000 [4.4e22])
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [31888] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::approve(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 44000000000000000000000 [4.4e22])
    │   ├─ [7554] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::approve(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 44000000000000000000000 [4.4e22]) [delegatecall]
    │   │   ├─ emit Approval(owner: user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], spender: 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, value: 44000000000000000000000 [4.4e22])
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [753] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::balanceOf(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D]) [staticcall]
    │   ├─ [581] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::balanceOf(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D]) [delegatecall]
    │   │   └─ ← [Return] 10000000000000000000000000 [1e25]
    │   └─ ← [Return] 10000000000000000000000000 [1e25]
    ├─ [185872] TicketRouterV3::buyTickets(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 1)
    │   ├─ [2406] 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C::baseCost() [staticcall]
    │   │   └─ ← [Return] 22000000000000000000000 [2.2e22]
    │   ├─ [40445] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::transferFrom(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], 22000000000000000000000 [2.2e22])
    │   │   ├─ [37761] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::transferFrom(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], 22000000000000000000000 [2.2e22]) [delegatecall]
    │   │   │   ├─ emit Transfer(from: user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], to: TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], value: 22000000000000000000000 [2.2e22])
    │   │   │   ├─ emit Approval(owner: user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], spender: TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], value: 22000000000000000000000 [2.2e22])
    │   │   │   └─ ← [Return] true
    │   │   └─ ← [Return] true
    │   ├─ [24832] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::approve(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 22000000000000000000000 [2.2e22])
    │   │   ├─ [24654] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::approve(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 22000000000000000000000 [2.2e22]) [delegatecall]
    │   │   │   ├─ emit Approval(owner: TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], spender: 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, value: 22000000000000000000000 [2.2e22])
    │   │   │   └─ ← [Return] true
    │   │   └─ ← [Return] true
    │   ├─ [127232] 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C::bulkPurchase(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], 1)
    │   │   ├─ [11245] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::transferFrom(TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 22000000000000000000000 [2.2e22])
    │   │   │   ├─ [11061] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::transferFrom(TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 22000000000000000000000 [2.2e22]) [delegatecall]
    │   │   │   │   ├─ emit Transfer(from: TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], to: 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, value: 22000000000000000000000 [2.2e22])
    │   │   │   │   ├─ emit Approval(owner: TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], spender: 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, value: 0)
    │   │   │   │   └─ ← [Return] true
    │   │   │   └─ ← [Return] true
    │   │   ├─ [37210] 0xAE975071Be8F8eE67addBC1A82488F1C24858067::requestRandomWords(0xcc294a196eeeb44da2888d17c0625cc88d70d9760a69d58d853ba6581a9ab0cd, 1274, 3, 2000000 [2e6], 2)
    │   │   │   ├─ emit RandomWordsRequested(keyHash: 0xcc294a196eeeb44da2888d17c0625cc88d70d9760a69d58d853ba6581a9ab0cd, requestId: 21066771076421976617879856991736386838457751365046595947016481348665269909939 [2.106e76], preSeed: 85481969558919373883791013522261647843276997907254150006486368987247823989658 [8.548e76], subId: 1274, minimumRequestConfirmations: 3, callbackGasLimit: 2000000 [2e6], numWords: 2, sender: 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C)
    │   │   │   └─ ← [Return] 21066771076421976617879856991736386838457751365046595947016481348665269909939 [2.106e76]
    │   │   ├─ emit DrawRequest(drawId: 1232, requestId: 21066771076421976617879856991736386838457751365046595947016481348665269909939 [2.106e76], requestAddress: TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b])
    │   │   └─ ← [Stop] 
    │   ├─ emit TokenPurchase(buyer: user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], token: 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc, amount: 22000000000000000000000 [2.2e22], receivedAmount: 22000000000000000000000 [2.2e22])
    │   └─ ← [Stop] 
    ├─ [753] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::balanceOf(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D]) [staticcall]
    │   ├─ [581] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::balanceOf(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D]) [delegatecall]
    │   │   └─ ← [Return] 9978000000000000000000000 [9.978e24]
    │   └─ ← [Return] 9978000000000000000000000 [9.978e24]
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    └─ ← [Stop] 

[PASS] test_BuyWithToken_VERSE() (gas: 304647)
Logs:
  Ticket cost in VERSE: 22000000000000000000000
  VERSE allocated to user: 2200000000000000000000000
  ETH allocated to user: 22000000000000000000000000000000000000000
  WETH allocated to user: 22000000000000000000000000000000000000000
  Current scratcher VERSE balance: 6077066280935834200000000
  Updated scratcher VERSE balance: 2200000000000000000000000

Traces:
  [308860] TestTicketRouterV3NoMock_POLYGON::test_BuyWithToken_VERSE()
    ├─ [0] VM::startPrank(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D])
    │   └─ ← [Return] 
    ├─ [5253] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::balanceOf(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D]) [staticcall]
    │   ├─ [2581] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::balanceOf(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D]) [delegatecall]
    │   │   └─ ← [Return] 2200000000000000000000000 [2.2e24]
    │   └─ ← [Return] 2200000000000000000000000 [2.2e24]
    ├─ [753] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::balanceOf(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D]) [staticcall]
    │   ├─ [581] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::balanceOf(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D]) [delegatecall]
    │   │   └─ ← [Return] 2200000000000000000000000 [2.2e24]
    │   └─ ← [Return] 2200000000000000000000000 [2.2e24]
    ├─ [0] VM::load(0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc, 0xb4260ebeada881f749f68942b3f0e36ae8ba2751d11fbbad46a58feb7b4cda51) [staticcall]
    │   └─ ← [Return] 0x00000000000000000000000000000000000000000001d1de3d2d5c712f000000
    ├─ [0] VM::store(0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc, 0xb4260ebeada881f749f68942b3f0e36ae8ba2751d11fbbad46a58feb7b4cda51, 0x000000000000000000000000000000000000000000084595161401484a000000)
    │   └─ ← [Return] 
    ├─ [31888] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::approve(TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], 44000000000000000000000 [4.4e22])
    │   ├─ [7554] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::approve(TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], 44000000000000000000000 [4.4e22]) [delegatecall]
    │   │   ├─ emit Approval(owner: user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], spender: TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], value: 44000000000000000000000 [4.4e22])
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [31888] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::approve(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 44000000000000000000000 [4.4e22])
    │   ├─ [7554] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::approve(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 44000000000000000000000 [4.4e22]) [delegatecall]
    │   │   ├─ emit Approval(owner: user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], spender: 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, value: 44000000000000000000000 [4.4e22])
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [753] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::balanceOf(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D]) [staticcall]
    │   ├─ [581] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::balanceOf(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D]) [delegatecall]
    │   │   └─ ← [Return] 10000000000000000000000000 [1e25]
    │   └─ ← [Return] 10000000000000000000000000 [1e25]
    ├─ [186705] TicketRouterV3::buyWithToken(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 1, 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc, 22000000000000000000000 [2.2e22])
    │   ├─ [2406] 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C::baseCost() [staticcall]
    │   │   └─ ← [Return] 22000000000000000000000 [2.2e22]
    │   ├─ [40445] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::transferFrom(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], 22000000000000000000000 [2.2e22])
    │   │   ├─ [37761] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::transferFrom(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], 22000000000000000000000 [2.2e22]) [delegatecall]
    │   │   │   ├─ emit Transfer(from: user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], to: TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], value: 22000000000000000000000 [2.2e22])
    │   │   │   ├─ emit Approval(owner: user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], spender: TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], value: 22000000000000000000000 [2.2e22])
    │   │   │   └─ ← [Return] true
    │   │   └─ ← [Return] true
    │   ├─ [24832] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::approve(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 22000000000000000000000 [2.2e22])
    │   │   ├─ [24654] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::approve(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 22000000000000000000000 [2.2e22]) [delegatecall]
    │   │   │   ├─ emit Approval(owner: TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], spender: 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, value: 22000000000000000000000 [2.2e22])
    │   │   │   └─ ← [Return] true
    │   │   └─ ← [Return] true
    │   ├─ [127232] 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C::bulkPurchase(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], 1)
    │   │   ├─ [11245] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::transferFrom(TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 22000000000000000000000 [2.2e22])
    │   │   │   ├─ [11061] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::transferFrom(TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 22000000000000000000000 [2.2e22]) [delegatecall]
    │   │   │   │   ├─ emit Transfer(from: TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], to: 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, value: 22000000000000000000000 [2.2e22])
    │   │   │   │   ├─ emit Approval(owner: TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], spender: 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, value: 0)
    │   │   │   │   └─ ← [Return] true
    │   │   │   └─ ← [Return] true
    │   │   ├─ [37210] 0xAE975071Be8F8eE67addBC1A82488F1C24858067::requestRandomWords(0xcc294a196eeeb44da2888d17c0625cc88d70d9760a69d58d853ba6581a9ab0cd, 1274, 3, 2000000 [2e6], 2)
    │   │   │   ├─ emit RandomWordsRequested(keyHash: 0xcc294a196eeeb44da2888d17c0625cc88d70d9760a69d58d853ba6581a9ab0cd, requestId: 21066771076421976617879856991736386838457751365046595947016481348665269909939 [2.106e76], preSeed: 85481969558919373883791013522261647843276997907254150006486368987247823989658 [8.548e76], subId: 1274, minimumRequestConfirmations: 3, callbackGasLimit: 2000000 [2e6], numWords: 2, sender: 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C)
    │   │   │   └─ ← [Return] 21066771076421976617879856991736386838457751365046595947016481348665269909939 [2.106e76]
    │   │   ├─ emit DrawRequest(drawId: 1232, requestId: 21066771076421976617879856991736386838457751365046595947016481348665269909939 [2.106e76], requestAddress: TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b])
    │   │   └─ ← [Stop] 
    │   ├─ emit TokenPurchase(buyer: user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], token: 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc, amount: 22000000000000000000000 [2.2e22], receivedAmount: 22000000000000000000000 [2.2e22])
    │   └─ ← [Stop] 
    ├─ [753] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::balanceOf(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D]) [staticcall]
    │   ├─ [581] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::balanceOf(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D]) [delegatecall]
    │   │   └─ ← [Return] 9978000000000000000000000 [9.978e24]
    │   └─ ← [Return] 9978000000000000000000000 [9.978e24]
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    └─ ← [Stop] 

[PASS] test_BuyWithToken_WETH() (gas: 449468)
Logs:
  Ticket cost in VERSE: 22000000000000000000000
  VERSE allocated to user: 2200000000000000000000000
  ETH allocated to user: 22000000000000000000000000000000000000000
  WETH allocated to user: 22000000000000000000000000000000000000000
  Current scratcher VERSE balance: 6077066280935834200000000
  Updated scratcher VERSE balance: 2200000000000000000000000
  Max WETH amount: 1000000000000000000000
  Actually spent WETH: 861065135127294

Traces:
  [453680] TestTicketRouterV3NoMock_POLYGON::test_BuyWithToken_WETH()
    ├─ [0] VM::startPrank(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D])
    │   └─ ← [Return] 
    ├─ [2608] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::balanceOf(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D]) [staticcall]
    │   └─ ← [Return] 22000000000000000000000000000000000000000 [2.2e40]
    ├─ [608] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::balanceOf(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D]) [staticcall]
    │   └─ ← [Return] 22000000000000000000000000000000000000000 [2.2e40]
    ├─ [0] VM::load(0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619, 0xb4260ebeada881f749f68942b3f0e36ae8ba2751d11fbbad46a58feb7b4cda51) [staticcall]
    │   └─ ← [Return] 0x00000000000000000000000000000040a6f5e0adcbd0d8e032b56f0000000000
    ├─ [0] VM::store(0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619, 0xb4260ebeada881f749f68942b3f0e36ae8ba2751d11fbbad46a58feb7b4cda51, 0x00000000000000000000000000000000000000000000006c6b935b8bbd400000)
    │   └─ ← [Return] 
    ├─ [29312] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::approve(TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], 1000000000000000000000 [1e21])
    │   ├─ emit Approval(owner: user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], spender: TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], value: 1000000000000000000000 [1e21])
    │   └─ ← [Return] true
    ├─ [31888] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::approve(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 44000000000000000000000 [4.4e22])
    │   ├─ [7554] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::approve(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 44000000000000000000000 [4.4e22]) [delegatecall]
    │   │   ├─ emit Approval(owner: user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], spender: 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, value: 44000000000000000000000 [4.4e22])
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [608] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::balanceOf(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D]) [staticcall]
    │   └─ ← [Return] 2000000000000000000000 [2e21]
    ├─ [367361] TicketRouterV3::buyWithToken(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 1, 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619, 1000000000000000000000 [1e21])
    │   ├─ [2406] 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C::baseCost() [staticcall]
    │   │   └─ ← [Return] 22000000000000000000000 [2.2e22]
    │   ├─ [406] 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C::baseCost() [staticcall]
    │   │   └─ ← [Return] 22000000000000000000000 [2.2e22]
    │   ├─ [99377] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::quoteExactOutput(0xc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619, 22000000000000000000000 [2.2e22])
    │   │   ├─ [70875] 0xd19A1C8278D0420BFb2c825D99DC31fF86224607::128acb08(000000000000000000000000b27308f9f90d607463bb33ea1bebb41c27ce5ab60000000000000000000000000000000000000000000000000000000000000001fffffffffffffffffffffffffffffffffffffffffffffb5760ab10fede40000000000000000000000000000000000000000000000000000000000001000276a400000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000000002bc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619000000000000000000000000000000000000000000)
    │   │   │   ├─ [32908] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::transfer(0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, 22000000000000000000000 [2.2e22])
    │   │   │   │   ├─ [30230] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::transfer(0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, 22000000000000000000000 [2.2e22]) [delegatecall]
    │   │   │   │   │   ├─ emit Transfer(from: 0xd19A1C8278D0420BFb2c825D99DC31fF86224607, to: 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, value: 22000000000000000000000 [2.2e22])
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   └─ ← [Return] true
    │   │   │   ├─ [2608] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::balanceOf(0xd19A1C8278D0420BFb2c825D99DC31fF86224607) [staticcall]
    │   │   │   │   └─ ← [Return] 36305562923214511337 [3.63e19]
    │   │   │   ├─ [2565] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::fa461e33(00000000000000000000000000000000000000000000000000030f225981fafefffffffffffffffffffffffffffffffffffffffffffffb5760ab10fede4000000000000000000000000000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000000000000000002bc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619000000000000000000000000000000000000000000)
    │   │   │   │   └─ ← [Revert] 0x00000000000000000000000000000000000000000000000000030f225981fafe
    │   │   │   └─ ← [Revert] 0x00000000000000000000000000000000000000000000000000030f225981fafe
    │   │   └─ ← [Return] 861065135127294 [8.61e14]
    │   ├─ [37949] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::transferFrom(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], 1000000000000000000000 [1e21])
    │   │   ├─ emit Transfer(from: user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], to: TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], value: 1000000000000000000000 [1e21])
    │   │   ├─ emit Approval(owner: user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], spender: TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], value: 0)
    │   │   └─ ← [Return] true
    │   ├─ [24768] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::approve(0xE592427A0AEce92De3Edee1F18E0157C05861564, 1000000000000000000000 [1e21])
    │   │   ├─ emit Approval(owner: TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], spender: 0xE592427A0AEce92De3Edee1F18E0157C05861564, value: 1000000000000000000000 [1e21])
    │   │   └─ ← [Return] true
    │   ├─ [94306] 0xE592427A0AEce92De3Edee1F18E0157C05861564::exactOutputSingle(ExactOutputSingleParams({ tokenIn: 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619, tokenOut: 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc, fee: 3000, recipient: 0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b, deadline: 1744903999 [1.744e9], amountOut: 22000000000000000000000 [2.2e22], amountInMaximum: 1000000000000000000000 [1e21], sqrtPriceLimitX96: 0 }))
    │   │   ├─ [89152] 0xd19A1C8278D0420BFb2c825D99DC31fF86224607::128acb08(0000000000000000000000008ad159a275aee56fb2334dbb69036e9c7bacee9b0000000000000000000000000000000000000000000000000000000000000001fffffffffffffffffffffffffffffffffffffffffffffb5760ab10fede40000000000000000000000000000000000000000000000000000000000001000276a400000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000c0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000400000000000000000000000008ad159a275aee56fb2334dbb69036e9c7bacee9b000000000000000000000000000000000000000000000000000000000000002bc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619000000000000000000000000000000000000000000)
    │   │   │   ├─ [32908] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::transfer(TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], 22000000000000000000000 [2.2e22])
    │   │   │   │   ├─ [30230] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::transfer(TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], 22000000000000000000000 [2.2e22]) [delegatecall]
    │   │   │   │   │   ├─ emit Transfer(from: 0xd19A1C8278D0420BFb2c825D99DC31fF86224607, to: TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], value: 22000000000000000000000 [2.2e22])
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   └─ ← [Return] true
    │   │   │   ├─ [2608] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::balanceOf(0xd19A1C8278D0420BFb2c825D99DC31fF86224607) [staticcall]
    │   │   │   │   └─ ← [Return] 36305562923214511337 [3.63e19]
    │   │   │   ├─ [18399] 0xE592427A0AEce92De3Edee1F18E0157C05861564::fa461e33(00000000000000000000000000000000000000000000000000030f225981fafefffffffffffffffffffffffffffffffffffffffffffffb5760ab10fede400000000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000c0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000400000000000000000000000008ad159a275aee56fb2334dbb69036e9c7bacee9b000000000000000000000000000000000000000000000000000000000000002bc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619000000000000000000000000000000000000000000)
    │   │   │   │   ├─ [9249] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::transferFrom(TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], 0xd19A1C8278D0420BFb2c825D99DC31fF86224607, 861065135127294 [8.61e14])
    │   │   │   │   │   ├─ emit Transfer(from: TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], to: 0xd19A1C8278D0420BFb2c825D99DC31fF86224607, value: 861065135127294 [8.61e14])
    │   │   │   │   │   ├─ emit Approval(owner: TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], spender: 0xE592427A0AEce92De3Edee1F18E0157C05861564, value: 999999138934864872706 [9.999e20])
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   └─ ← [Stop] 
    │   │   │   ├─ [608] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::balanceOf(0xd19A1C8278D0420BFb2c825D99DC31fF86224607) [staticcall]
    │   │   │   │   └─ ← [Return] 36306423988349638631 [3.63e19]
    │   │   │   ├─  emit topic 0: 0xc42079f94a6350d7e6235f29174924f928cc2ac818eb64fed8004e115fbcca67
    │   │   │   │       topic 1: 0x000000000000000000000000e592427a0aece92de3edee1f18e0157c05861564
    │   │   │   │       topic 2: 0x0000000000000000000000008ad159a275aee56fb2334dbb69036e9c7bacee9b
    │   │   │   │           data: 0x00000000000000000000000000000000000000000000000000030f225981fafefffffffffffffffffffffffffffffffffffffffffffffb5760ab10fede40000000000000000000000000000000000000000013c64464c1f833b51c941aab01f9000000000000000000000000000000000000000000011e89c2c9cd75e63ecc920000000000000000000000000000000000000000000000000000000000029a67
    │   │   │   └─ ← [Return] 0x00000000000000000000000000000000000000000000000000030f225981fafefffffffffffffffffffffffffffffffffffffffffffffb5760ab10fede400000
    │   │   └─ ← [Return] 861065135127294 [8.61e14]
    │   ├─ [3638] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::transfer(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], 999999138934864872706 [9.999e20])
    │   │   ├─ emit Transfer(from: TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], to: user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], value: 999999138934864872706 [9.999e20])
    │   │   └─ ← [Return] true
    │   ├─ [24832] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::approve(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 22000000000000000000000 [2.2e22])
    │   │   ├─ [24654] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::approve(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 22000000000000000000000 [2.2e22]) [delegatecall]
    │   │   │   ├─ emit Approval(owner: TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], spender: 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, value: 22000000000000000000000 [2.2e22])
    │   │   │   └─ ← [Return] true
    │   │   └─ ← [Return] true
    │   ├─ [127232] 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C::bulkPurchase(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], 1)
    │   │   ├─ [11245] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::transferFrom(TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 22000000000000000000000 [2.2e22])
    │   │   │   ├─ [11061] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::transferFrom(TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 22000000000000000000000 [2.2e22]) [delegatecall]
    │   │   │   │   ├─ emit Transfer(from: TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], to: 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, value: 22000000000000000000000 [2.2e22])
    │   │   │   │   ├─ emit Approval(owner: TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], spender: 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, value: 0)
    │   │   │   │   └─ ← [Return] true
    │   │   │   └─ ← [Return] true
    │   │   ├─ [37210] 0xAE975071Be8F8eE67addBC1A82488F1C24858067::requestRandomWords(0xcc294a196eeeb44da2888d17c0625cc88d70d9760a69d58d853ba6581a9ab0cd, 1274, 3, 2000000 [2e6], 2)
    │   │   │   ├─ emit RandomWordsRequested(keyHash: 0xcc294a196eeeb44da2888d17c0625cc88d70d9760a69d58d853ba6581a9ab0cd, requestId: 21066771076421976617879856991736386838457751365046595947016481348665269909939 [2.106e76], preSeed: 85481969558919373883791013522261647843276997907254150006486368987247823989658 [8.548e76], subId: 1274, minimumRequestConfirmations: 3, callbackGasLimit: 2000000 [2e6], numWords: 2, sender: 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C)
    │   │   │   └─ ← [Return] 21066771076421976617879856991736386838457751365046595947016481348665269909939 [2.106e76]
    │   │   ├─ emit DrawRequest(drawId: 1232, requestId: 21066771076421976617879856991736386838457751365046595947016481348665269909939 [2.106e76], requestAddress: TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b])
    │   │   └─ ← [Stop] 
    │   ├─ emit TokenPurchase(buyer: user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], token: 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619, amount: 861065135127294 [8.61e14], receivedAmount: 22000000000000000000000 [2.2e22])
    │   └─ ← [Stop] 
    ├─ [608] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::balanceOf(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D]) [staticcall]
    │   └─ ← [Return] 1999999138934864872706 [1.999e21]
    ├─ emit log_named_uint(key: "Max WETH amount", val: 1000000000000000000000 [1e21])
    ├─ emit log_named_uint(key: "Actually spent WETH", val: 861065135127294 [8.61e14])
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    └─ ← [Stop] 

[PASS] test_BuyWithWETH() (gas: 538430)
Logs:
  Ticket cost in VERSE: 22000000000000000000000
  VERSE allocated to user: 2200000000000000000000000
  ETH allocated to user: 22000000000000000000000000000000000000000
  WETH allocated to user: 22000000000000000000000000000000000000000
  Current scratcher VERSE balance: 6077066280935834200000000
  Updated scratcher VERSE balance: 2200000000000000000000000
  Ticket cost in VERSE: 22000000000000000000000
  WETH needed for 1 ticket: 861065135127294
  WETH allocated to user: 1722130270254588
  Testing buyWithToken using WETH
  SUCCESS: Purchased tickets with WETH

Traces:
  [542643] TestTicketRouterV3NoMock_POLYGON::test_BuyWithWETH()
    ├─ [2406] 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C::baseCost() [staticcall]
    │   └─ ← [Return] 22000000000000000000000 [2.2e22]
    ├─ emit log_named_uint(key: "Ticket cost in VERSE", val: 22000000000000000000000 [2.2e22])
    ├─ [101805] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::quoteExactOutput(0xc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619, 22000000000000000000000 [2.2e22])
    │   ├─ [70875] 0xd19A1C8278D0420BFb2c825D99DC31fF86224607::128acb08(000000000000000000000000b27308f9f90d607463bb33ea1bebb41c27ce5ab60000000000000000000000000000000000000000000000000000000000000001fffffffffffffffffffffffffffffffffffffffffffffb5760ab10fede40000000000000000000000000000000000000000000000000000000000001000276a400000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000000002bc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619000000000000000000000000000000000000000000)
    │   │   ├─ [32908] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::transfer(0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, 22000000000000000000000 [2.2e22])
    │   │   │   ├─ [30230] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::transfer(0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, 22000000000000000000000 [2.2e22]) [delegatecall]
    │   │   │   │   ├─ emit Transfer(from: 0xd19A1C8278D0420BFb2c825D99DC31fF86224607, to: 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, value: 22000000000000000000000 [2.2e22])
    │   │   │   │   └─ ← [Return] true
    │   │   │   └─ ← [Return] true
    │   │   ├─ [2608] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::balanceOf(0xd19A1C8278D0420BFb2c825D99DC31fF86224607) [staticcall]
    │   │   │   └─ ← [Return] 36305562923214511337 [3.63e19]
    │   │   ├─ [2565] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::fa461e33(00000000000000000000000000000000000000000000000000030f225981fafefffffffffffffffffffffffffffffffffffffffffffffb5760ab10fede4000000000000000000000000000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000000000000000002bc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619000000000000000000000000000000000000000000)
    │   │   │   └─ ← [Revert] 0x00000000000000000000000000000000000000000000000000030f225981fafe
    │   │   └─ ← [Revert] 0x00000000000000000000000000000000000000000000000000030f225981fafe
    │   └─ ← [Return] 861065135127294 [8.61e14]
    ├─ emit log_named_uint(key: "WETH needed for 1 ticket", val: 861065135127294 [8.61e14])
    ├─ [2608] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::balanceOf(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D]) [staticcall]
    │   └─ ← [Return] 22000000000000000000000000000000000000000 [2.2e40]
    ├─ [608] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::balanceOf(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D]) [staticcall]
    │   └─ ← [Return] 22000000000000000000000000000000000000000 [2.2e40]
    ├─ [0] VM::load(0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619, 0xb4260ebeada881f749f68942b3f0e36ae8ba2751d11fbbad46a58feb7b4cda51) [staticcall]
    │   └─ ← [Return] 0x00000000000000000000000000000040a6f5e0adcbd0d8e032b56f0000000000
    ├─ [0] VM::store(0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619, 0xb4260ebeada881f749f68942b3f0e36ae8ba2751d11fbbad46a58feb7b4cda51, 0x00000000000000000000000000000000000000000000000000061e44b303f5fc)
    │   └─ ← [Return] 
    ├─ emit log_named_uint(key: "WETH allocated to user", val: 1722130270254588 [1.722e15])
    ├─ [0] VM::startPrank(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D])
    │   └─ ← [Return] 
    ├─ [29312] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::approve(TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], 1722130270254588 [1.722e15])
    │   ├─ emit Approval(owner: user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], spender: TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], value: 1722130270254588 [1.722e15])
    │   └─ ← [Return] true
    ├─ [31888] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::approve(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 44000000000000000000000 [4.4e22])
    │   ├─ [7554] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::approve(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 44000000000000000000000 [4.4e22]) [delegatecall]
    │   │   ├─ emit Approval(owner: user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], spender: 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, value: 44000000000000000000000 [4.4e22])
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ emit log_string(val: "Testing buyWithToken using WETH")
    ├─ [367361] TicketRouterV3::buyWithToken(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 1, 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619, 1722130270254588 [1.722e15])
    │   ├─ [2406] 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C::baseCost() [staticcall]
    │   │   └─ ← [Return] 22000000000000000000000 [2.2e22]
    │   ├─ [406] 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C::baseCost() [staticcall]
    │   │   └─ ← [Return] 22000000000000000000000 [2.2e22]
    │   ├─ [99377] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::quoteExactOutput(0xc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619, 22000000000000000000000 [2.2e22])
    │   │   ├─ [70875] 0xd19A1C8278D0420BFb2c825D99DC31fF86224607::128acb08(000000000000000000000000b27308f9f90d607463bb33ea1bebb41c27ce5ab60000000000000000000000000000000000000000000000000000000000000001fffffffffffffffffffffffffffffffffffffffffffffb5760ab10fede40000000000000000000000000000000000000000000000000000000000001000276a400000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000000002bc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619000000000000000000000000000000000000000000)
    │   │   │   ├─ [32908] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::transfer(0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, 22000000000000000000000 [2.2e22])
    │   │   │   │   ├─ [30230] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::transfer(0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, 22000000000000000000000 [2.2e22]) [delegatecall]
    │   │   │   │   │   ├─ emit Transfer(from: 0xd19A1C8278D0420BFb2c825D99DC31fF86224607, to: 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, value: 22000000000000000000000 [2.2e22])
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   └─ ← [Return] true
    │   │   │   ├─ [2608] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::balanceOf(0xd19A1C8278D0420BFb2c825D99DC31fF86224607) [staticcall]
    │   │   │   │   └─ ← [Return] 36305562923214511337 [3.63e19]
    │   │   │   ├─ [2565] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::fa461e33(00000000000000000000000000000000000000000000000000030f225981fafefffffffffffffffffffffffffffffffffffffffffffffb5760ab10fede4000000000000000000000000000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000000000000000002bc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619000000000000000000000000000000000000000000)
    │   │   │   │   └─ ← [Revert] 0x00000000000000000000000000000000000000000000000000030f225981fafe
    │   │   │   └─ ← [Revert] 0x00000000000000000000000000000000000000000000000000030f225981fafe
    │   │   └─ ← [Return] 861065135127294 [8.61e14]
    │   ├─ [37949] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::transferFrom(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], 1722130270254588 [1.722e15])
    │   │   ├─ emit Transfer(from: user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], to: TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], value: 1722130270254588 [1.722e15])
    │   │   ├─ emit Approval(owner: user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], spender: TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], value: 0)
    │   │   └─ ← [Return] true
    │   ├─ [24768] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::approve(0xE592427A0AEce92De3Edee1F18E0157C05861564, 1722130270254588 [1.722e15])
    │   │   ├─ emit Approval(owner: TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], spender: 0xE592427A0AEce92De3Edee1F18E0157C05861564, value: 1722130270254588 [1.722e15])
    │   │   └─ ← [Return] true
    │   ├─ [94306] 0xE592427A0AEce92De3Edee1F18E0157C05861564::exactOutputSingle(ExactOutputSingleParams({ tokenIn: 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619, tokenOut: 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc, fee: 3000, recipient: 0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b, deadline: 1744903999 [1.744e9], amountOut: 22000000000000000000000 [2.2e22], amountInMaximum: 1722130270254588 [1.722e15], sqrtPriceLimitX96: 0 }))
    │   │   ├─ [89152] 0xd19A1C8278D0420BFb2c825D99DC31fF86224607::128acb08(0000000000000000000000008ad159a275aee56fb2334dbb69036e9c7bacee9b0000000000000000000000000000000000000000000000000000000000000001fffffffffffffffffffffffffffffffffffffffffffffb5760ab10fede40000000000000000000000000000000000000000000000000000000000001000276a400000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000c0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000400000000000000000000000008ad159a275aee56fb2334dbb69036e9c7bacee9b000000000000000000000000000000000000000000000000000000000000002bc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619000000000000000000000000000000000000000000)
    │   │   │   ├─ [32908] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::transfer(TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], 22000000000000000000000 [2.2e22])
    │   │   │   │   ├─ [30230] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::transfer(TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], 22000000000000000000000 [2.2e22]) [delegatecall]
    │   │   │   │   │   ├─ emit Transfer(from: 0xd19A1C8278D0420BFb2c825D99DC31fF86224607, to: TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], value: 22000000000000000000000 [2.2e22])
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   └─ ← [Return] true
    │   │   │   ├─ [2608] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::balanceOf(0xd19A1C8278D0420BFb2c825D99DC31fF86224607) [staticcall]
    │   │   │   │   └─ ← [Return] 36305562923214511337 [3.63e19]
    │   │   │   ├─ [18399] 0xE592427A0AEce92De3Edee1F18E0157C05861564::fa461e33(00000000000000000000000000000000000000000000000000030f225981fafefffffffffffffffffffffffffffffffffffffffffffffb5760ab10fede400000000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000c0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000400000000000000000000000008ad159a275aee56fb2334dbb69036e9c7bacee9b000000000000000000000000000000000000000000000000000000000000002bc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619000000000000000000000000000000000000000000)
    │   │   │   │   ├─ [9249] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::transferFrom(TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], 0xd19A1C8278D0420BFb2c825D99DC31fF86224607, 861065135127294 [8.61e14])
    │   │   │   │   │   ├─ emit Transfer(from: TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], to: 0xd19A1C8278D0420BFb2c825D99DC31fF86224607, value: 861065135127294 [8.61e14])
    │   │   │   │   │   ├─ emit Approval(owner: TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], spender: 0xE592427A0AEce92De3Edee1F18E0157C05861564, value: 861065135127294 [8.61e14])
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   └─ ← [Stop] 
    │   │   │   ├─ [608] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::balanceOf(0xd19A1C8278D0420BFb2c825D99DC31fF86224607) [staticcall]
    │   │   │   │   └─ ← [Return] 36306423988349638631 [3.63e19]
    │   │   │   ├─  emit topic 0: 0xc42079f94a6350d7e6235f29174924f928cc2ac818eb64fed8004e115fbcca67
    │   │   │   │       topic 1: 0x000000000000000000000000e592427a0aece92de3edee1f18e0157c05861564
    │   │   │   │       topic 2: 0x0000000000000000000000008ad159a275aee56fb2334dbb69036e9c7bacee9b
    │   │   │   │           data: 0x00000000000000000000000000000000000000000000000000030f225981fafefffffffffffffffffffffffffffffffffffffffffffffb5760ab10fede40000000000000000000000000000000000000000013c64464c1f833b51c941aab01f9000000000000000000000000000000000000000000011e89c2c9cd75e63ecc920000000000000000000000000000000000000000000000000000000000029a67
    │   │   │   └─ ← [Return] 0x00000000000000000000000000000000000000000000000000030f225981fafefffffffffffffffffffffffffffffffffffffffffffffb5760ab10fede400000
    │   │   └─ ← [Return] 861065135127294 [8.61e14]
    │   ├─ [3638] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::transfer(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], 861065135127294 [8.61e14])
    │   │   ├─ emit Transfer(from: TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], to: user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], value: 861065135127294 [8.61e14])
    │   │   └─ ← [Return] true
    │   ├─ [24832] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::approve(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 22000000000000000000000 [2.2e22])
    │   │   ├─ [24654] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::approve(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 22000000000000000000000 [2.2e22]) [delegatecall]
    │   │   │   ├─ emit Approval(owner: TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], spender: 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, value: 22000000000000000000000 [2.2e22])
    │   │   │   └─ ← [Return] true
    │   │   └─ ← [Return] true
    │   ├─ [127232] 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C::bulkPurchase(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], 1)
    │   │   ├─ [11245] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::transferFrom(TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 22000000000000000000000 [2.2e22])
    │   │   │   ├─ [11061] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::transferFrom(TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 22000000000000000000000 [2.2e22]) [delegatecall]
    │   │   │   │   ├─ emit Transfer(from: TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], to: 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, value: 22000000000000000000000 [2.2e22])
    │   │   │   │   ├─ emit Approval(owner: TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], spender: 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, value: 0)
    │   │   │   │   └─ ← [Return] true
    │   │   │   └─ ← [Return] true
    │   │   ├─ [37210] 0xAE975071Be8F8eE67addBC1A82488F1C24858067::requestRandomWords(0xcc294a196eeeb44da2888d17c0625cc88d70d9760a69d58d853ba6581a9ab0cd, 1274, 3, 2000000 [2e6], 2)
    │   │   │   ├─ emit RandomWordsRequested(keyHash: 0xcc294a196eeeb44da2888d17c0625cc88d70d9760a69d58d853ba6581a9ab0cd, requestId: 21066771076421976617879856991736386838457751365046595947016481348665269909939 [2.106e76], preSeed: 85481969558919373883791013522261647843276997907254150006486368987247823989658 [8.548e76], subId: 1274, minimumRequestConfirmations: 3, callbackGasLimit: 2000000 [2e6], numWords: 2, sender: 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C)
    │   │   │   └─ ← [Return] 21066771076421976617879856991736386838457751365046595947016481348665269909939 [2.106e76]
    │   │   ├─ emit DrawRequest(drawId: 1232, requestId: 21066771076421976617879856991736386838457751365046595947016481348665269909939 [2.106e76], requestAddress: TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b])
    │   │   └─ ← [Stop] 
    │   ├─ emit TokenPurchase(buyer: user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], token: 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619, amount: 861065135127294 [8.61e14], receivedAmount: 22000000000000000000000 [2.2e22])
    │   └─ ← [Stop] 
    ├─ emit log_string(val: "SUCCESS: Purchased tickets with WETH")
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    └─ ← [Stop] 

[FAIL. Reason: Error != expected error: TicketRouterV3: INVALID_COUNT != Insufficient token amount] test_ComprehensiveBuyWithToken() (gas: 859993)
Logs:
  Ticket cost in VERSE: 22000000000000000000000
  VERSE allocated to user: 2200000000000000000000000
  ETH allocated to user: 22000000000000000000000000000000000000000
  WETH allocated to user: 22000000000000000000000000000000000000000
  Current scratcher VERSE balance: 6077066280935834200000000
  Updated scratcher VERSE balance: 2200000000000000000000000
  Successfully purchased tickets with VERSE through buyWithToken

Traces:
  [3248815] TestTicketRouterV3NoMock_POLYGON::setUp()
    ├─ [0] VM::rpcUrl("polygon") [staticcall]
    │   └─ ← [Return] "https://polygon-mainnet.infura.io/v3/777c1ef0473c4c95aea1a4f38721f10c"
    ├─ [0] VM::createSelectFork("https://polygon-mainnet.infura.io/v3/777c1ef0473c4c95aea1a4f38721f10c", 70417301 [7.041e7])
    │   └─ ← [Return] 0
    ├─ [0] VM::startPrank(deployer: [0xaE0bDc4eEAC5E950B67C6819B118761CaAF61946])
    │   └─ ← [Return] 
    ├─ [2406] 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C::baseCost() [staticcall]
    │   └─ ← [Return] 22000000000000000000000 [2.2e22]
    ├─ emit log_named_uint(key: "Ticket cost in VERSE", val: 22000000000000000000000 [2.2e22])
    ├─ [2600756] → new TicketRouterV3@0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b
    │   └─ ← [Return] 11787 bytes of code
    ├─ [5253] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::balanceOf(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D]) [staticcall]
    │   ├─ [2581] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::balanceOf(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D]) [delegatecall]
    │   │   └─ ← [Return] 0
    │   └─ ← [Return] 0
    ├─ [0] VM::record()
    │   └─ ← [Return] 
    ├─ [753] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::balanceOf(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D]) [staticcall]
    │   ├─ [581] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::balanceOf(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D]) [delegatecall]
    │   │   └─ ← [Return] 0
    │   └─ ← [Return] 0
    ├─ [0] VM::accesses(0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc)
    │   └─ ← [Return] [0xb4260ebeada881f749f68942b3f0e36ae8ba2751d11fbbad46a58feb7b4cda51], []
    ├─ [0] VM::load(0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc, 0xb4260ebeada881f749f68942b3f0e36ae8ba2751d11fbbad46a58feb7b4cda51) [staticcall]
    │   └─ ← [Return] 0x0000000000000000000000000000000000000000000000000000000000000000
    ├─ emit WARNING_UninitedSlot(who: 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc, slot: 81483554698576596835570389481286860699230205958993083079619244123112568838737 [8.148e76])
    ├─ emit SlotFound(who: 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc, fsig: 0x70a0823100000000000000000000000000000000000000000000000000000000, keysHash: 0xb4260ebeada881f749f68942b3f0e36ae8ba2751d11fbbad46a58feb7b4cda51, slot: 81483554698576596835570389481286860699230205958993083079619244123112568838737 [8.148e76])
    ├─ [753] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::balanceOf(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D]) [staticcall]
    │   ├─ [581] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::balanceOf(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D]) [delegatecall]
    │   │   └─ ← [Return] 0
    │   └─ ← [Return] 0
    ├─ [0] VM::load(0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc, 0xb4260ebeada881f749f68942b3f0e36ae8ba2751d11fbbad46a58feb7b4cda51) [staticcall]
    │   └─ ← [Return] 0x0000000000000000000000000000000000000000000000000000000000000000
    ├─ [0] VM::store(0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc, 0xb4260ebeada881f749f68942b3f0e36ae8ba2751d11fbbad46a58feb7b4cda51, 0x00000000000000000000000000000000000000000001d1de3d2d5c712f000000)
    │   └─ ← [Return] 
    ├─ emit log_named_uint(key: "VERSE allocated to user", val: 2200000000000000000000000 [2.2e24])
    ├─ [0] VM::deal(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], 22000000000000000000000000000000000000000 [2.2e40])
    │   └─ ← [Return] 
    ├─ emit log_named_uint(key: "ETH allocated to user", val: 22000000000000000000000000000000000000000 [2.2e40])
    ├─ [2608] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::balanceOf(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D]) [staticcall]
    │   └─ ← [Return] 0
    ├─ [0] VM::record()
    │   └─ ← [Return] 
    ├─ [608] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::balanceOf(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D]) [staticcall]
    │   └─ ← [Return] 0
    ├─ [0] VM::accesses(0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619)
    │   └─ ← [Return] [0xb4260ebeada881f749f68942b3f0e36ae8ba2751d11fbbad46a58feb7b4cda51], []
    ├─ [0] VM::load(0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619, 0xb4260ebeada881f749f68942b3f0e36ae8ba2751d11fbbad46a58feb7b4cda51) [staticcall]
    │   └─ ← [Return] 0x0000000000000000000000000000000000000000000000000000000000000000
    ├─ emit WARNING_UninitedSlot(who: 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619, slot: 81483554698576596835570389481286860699230205958993083079619244123112568838737 [8.148e76])
    ├─ emit SlotFound(who: 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619, fsig: 0x70a0823100000000000000000000000000000000000000000000000000000000, keysHash: 0xb4260ebeada881f749f68942b3f0e36ae8ba2751d11fbbad46a58feb7b4cda51, slot: 81483554698576596835570389481286860699230205958993083079619244123112568838737 [8.148e76])
    ├─ [608] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::balanceOf(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D]) [staticcall]
    │   └─ ← [Return] 0
    ├─ [0] VM::load(0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619, 0xb4260ebeada881f749f68942b3f0e36ae8ba2751d11fbbad46a58feb7b4cda51) [staticcall]
    │   └─ ← [Return] 0x0000000000000000000000000000000000000000000000000000000000000000
    ├─ [0] VM::store(0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619, 0xb4260ebeada881f749f68942b3f0e36ae8ba2751d11fbbad46a58feb7b4cda51, 0x00000000000000000000000000000040a6f5e0adcbd0d8e032b56f0000000000)
    │   └─ ← [Return] 
    ├─ emit log_named_uint(key: "WETH allocated to user", val: 22000000000000000000000000000000000000000 [2.2e40])
    ├─ [2753] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::balanceOf(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C) [staticcall]
    │   ├─ [2581] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::balanceOf(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C) [delegatecall]
    │   │   └─ ← [Return] 6077066280935834200000000 [6.077e24]
    │   └─ ← [Return] 6077066280935834200000000 [6.077e24]
    ├─ emit log_named_uint(key: "Current scratcher VERSE balance", val: 6077066280935834200000000 [6.077e24])
    ├─ [753] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::balanceOf(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C) [staticcall]
    │   ├─ [581] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::balanceOf(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C) [delegatecall]
    │   │   └─ ← [Return] 6077066280935834200000000 [6.077e24]
    │   └─ ← [Return] 6077066280935834200000000 [6.077e24]
    ├─ [0] VM::record()
    │   └─ ← [Return] 
    ├─ [753] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::balanceOf(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C) [staticcall]
    │   ├─ [581] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::balanceOf(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C) [delegatecall]
    │   │   └─ ← [Return] 6077066280935834200000000 [6.077e24]
    │   └─ ← [Return] 6077066280935834200000000 [6.077e24]
    ├─ [0] VM::accesses(0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc)
    │   └─ ← [Return] [0xaddca241567f461063bc2f765eda6cc20fc8463b354eb39d5dfbbc8d3d8a6f33], []
    ├─ [0] VM::load(0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc, 0xaddca241567f461063bc2f765eda6cc20fc8463b354eb39d5dfbbc8d3d8a6f33) [staticcall]
    │   └─ ← [Return] 0x0000000000000000000000000000000000000000000506de6c57420dfe134600
    ├─ emit SlotFound(who: 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc, fsig: 0x70a0823100000000000000000000000000000000000000000000000000000000, keysHash: 0xaddca241567f461063bc2f765eda6cc20fc8463b354eb39d5dfbbc8d3d8a6f33, slot: 78639949003570257618951646007360189533179039009876352774353258942662724710195 [7.863e76])
    ├─ [753] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::balanceOf(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C) [staticcall]
    │   ├─ [581] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::balanceOf(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C) [delegatecall]
    │   │   └─ ← [Return] 6077066280935834200000000 [6.077e24]
    │   └─ ← [Return] 6077066280935834200000000 [6.077e24]
    ├─ [0] VM::load(0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc, 0xaddca241567f461063bc2f765eda6cc20fc8463b354eb39d5dfbbc8d3d8a6f33) [staticcall]
    │   └─ ← [Return] 0x0000000000000000000000000000000000000000000506de6c57420dfe134600
    ├─ [0] VM::store(0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc, 0xaddca241567f461063bc2f765eda6cc20fc8463b354eb39d5dfbbc8d3d8a6f33, 0x00000000000000000000000000000000000000000001d1de3d2d5c712f000000)
    │   └─ ← [Return] 
    ├─ emit log_named_uint(key: "Updated scratcher VERSE balance", val: 2200000000000000000000000 [2.2e24])
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D])
    │   └─ ← [Return] 
    ├─ [48988] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::approve(TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], 2200000000000000000000000 [2.2e24])
    │   ├─ [24654] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::approve(TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], 2200000000000000000000000 [2.2e24]) [delegatecall]
    │   │   ├─ emit Approval(owner: user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], spender: TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], value: 2200000000000000000000000 [2.2e24])
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [48988] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::approve(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 2200000000000000000000000 [2.2e24])
    │   ├─ [24654] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::approve(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 2200000000000000000000000 [2.2e24]) [delegatecall]
    │   │   ├─ emit Approval(owner: user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], spender: 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, value: 2200000000000000000000000 [2.2e24])
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [46472] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::approve(TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], 22000000000000000000000000000000000000000 [2.2e40])
    │   ├─ emit Approval(owner: user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], spender: TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], value: 22000000000000000000000000000000000000000 [2.2e40])
    │   └─ ← [Return] true
    ├─ [46472] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::approve(0xE592427A0AEce92De3Edee1F18E0157C05861564, 22000000000000000000000000000000000000000 [2.2e40])
    │   ├─ emit Approval(owner: user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], spender: 0xE592427A0AEce92De3Edee1F18E0157C05861564, value: 22000000000000000000000000000000000000000 [2.2e40])
    │   └─ ← [Return] true
    ├─ [48988] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::approve(0xE592427A0AEce92De3Edee1F18E0157C05861564, 2200000000000000000000000 [2.2e24])
    │   ├─ [24654] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::approve(0xE592427A0AEce92De3Edee1F18E0157C05861564, 2200000000000000000000000 [2.2e24]) [delegatecall]
    │   │   ├─ emit Approval(owner: user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], spender: 0xE592427A0AEce92De3Edee1F18E0157C05861564, value: 2200000000000000000000000 [2.2e24])
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    └─ ← [Stop] 

  [687995] TestTicketRouterV3NoMock_POLYGON::test_ComprehensiveBuyWithToken()
    ├─ [0] VM::startPrank(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D])
    │   └─ ← [Return] 
    ├─ [5253] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::balanceOf(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D]) [staticcall]
    │   ├─ [2581] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::balanceOf(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D]) [delegatecall]
    │   │   └─ ← [Return] 2200000000000000000000000 [2.2e24]
    │   └─ ← [Return] 2200000000000000000000000 [2.2e24]
    ├─ [753] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::balanceOf(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D]) [staticcall]
    │   ├─ [581] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::balanceOf(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D]) [delegatecall]
    │   │   └─ ← [Return] 2200000000000000000000000 [2.2e24]
    │   └─ ← [Return] 2200000000000000000000000 [2.2e24]
    ├─ [0] VM::load(0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc, 0xb4260ebeada881f749f68942b3f0e36ae8ba2751d11fbbad46a58feb7b4cda51) [staticcall]
    │   └─ ← [Return] 0x00000000000000000000000000000000000000000001d1de3d2d5c712f000000
    ├─ [0] VM::store(0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc, 0xb4260ebeada881f749f68942b3f0e36ae8ba2751d11fbbad46a58feb7b4cda51, 0x0000000000000000000000000000000000000000000012a27d53bc0487000000)
    │   └─ ← [Return] 
    ├─ [31888] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::approve(TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], 44000000000000000000000 [4.4e22])
    │   ├─ [7554] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::approve(TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], 44000000000000000000000 [4.4e22]) [delegatecall]
    │   │   ├─ emit Approval(owner: user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], spender: TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], value: 44000000000000000000000 [4.4e22])
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [31888] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::approve(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 44000000000000000000000 [4.4e22])
    │   ├─ [7554] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::approve(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 44000000000000000000000 [4.4e22]) [delegatecall]
    │   │   ├─ emit Approval(owner: user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], spender: 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, value: 44000000000000000000000 [4.4e22])
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [753] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::balanceOf(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D]) [staticcall]
    │   ├─ [581] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::balanceOf(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D]) [delegatecall]
    │   │   └─ ← [Return] 88000000000000000000000 [8.8e22]
    │   └─ ← [Return] 88000000000000000000000 [8.8e22]
    ├─ [279593] TicketRouterV3::buyWithToken(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 2, 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc, 44000000000000000000000 [4.4e22])
    │   ├─ [2406] 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C::baseCost() [staticcall]
    │   │   └─ ← [Return] 22000000000000000000000 [2.2e22]
    │   ├─ [40445] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::transferFrom(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], 44000000000000000000000 [4.4e22])
    │   │   ├─ [37761] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::transferFrom(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], 44000000000000000000000 [4.4e22]) [delegatecall]
    │   │   │   ├─ emit Transfer(from: user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], to: TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], value: 44000000000000000000000 [4.4e22])
    │   │   │   ├─ emit Approval(owner: user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], spender: TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], value: 0)
    │   │   │   └─ ← [Return] true
    │   │   └─ ← [Return] true
    │   ├─ [24832] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::approve(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 44000000000000000000000 [4.4e22])
    │   │   ├─ [24654] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::approve(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 44000000000000000000000 [4.4e22]) [delegatecall]
    │   │   │   ├─ emit Approval(owner: TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], spender: 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, value: 44000000000000000000000 [4.4e22])
    │   │   │   └─ ← [Return] true
    │   │   └─ ← [Return] true
    │   ├─ [224920] 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C::bulkPurchase(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], 2)
    │   │   ├─ [11245] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::transferFrom(TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 44000000000000000000000 [4.4e22])
    │   │   │   ├─ [11061] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::transferFrom(TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 44000000000000000000000 [4.4e22]) [delegatecall]
    │   │   │   │   ├─ emit Transfer(from: TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], to: 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, value: 44000000000000000000000 [4.4e22])
    │   │   │   │   ├─ emit Approval(owner: TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], spender: 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, value: 0)
    │   │   │   │   └─ ← [Return] true
    │   │   │   └─ ← [Return] true
    │   │   ├─ [37210] 0xAE975071Be8F8eE67addBC1A82488F1C24858067::requestRandomWords(0xcc294a196eeeb44da2888d17c0625cc88d70d9760a69d58d853ba6581a9ab0cd, 1274, 3, 2000000 [2e6], 2)
    │   │   │   ├─ emit RandomWordsRequested(keyHash: 0xcc294a196eeeb44da2888d17c0625cc88d70d9760a69d58d853ba6581a9ab0cd, requestId: 21066771076421976617879856991736386838457751365046595947016481348665269909939 [2.106e76], preSeed: 85481969558919373883791013522261647843276997907254150006486368987247823989658 [8.548e76], subId: 1274, minimumRequestConfirmations: 3, callbackGasLimit: 2000000 [2e6], numWords: 2, sender: 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C)
    │   │   │   └─ ← [Return] 21066771076421976617879856991736386838457751365046595947016481348665269909939 [2.106e76]
    │   │   ├─ emit DrawRequest(drawId: 1232, requestId: 21066771076421976617879856991736386838457751365046595947016481348665269909939 [2.106e76], requestAddress: TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b])
    │   │   ├─ [28410] 0xAE975071Be8F8eE67addBC1A82488F1C24858067::requestRandomWords(0xcc294a196eeeb44da2888d17c0625cc88d70d9760a69d58d853ba6581a9ab0cd, 1274, 3, 2000000 [2e6], 2)
    │   │   │   ├─ emit RandomWordsRequested(keyHash: 0xcc294a196eeeb44da2888d17c0625cc88d70d9760a69d58d853ba6581a9ab0cd, requestId: 64615734045720328393999036594058083191477363917117965202021540701223537138046 [6.461e76], preSeed: 57137371003904072189197795894439492504806508527292589860252334233934522956504 [5.713e76], subId: 1274, minimumRequestConfirmations: 3, callbackGasLimit: 2000000 [2e6], numWords: 2, sender: 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C)
    │   │   │   └─ ← [Return] 64615734045720328393999036594058083191477363917117965202021540701223537138046 [6.461e76]
    │   │   ├─ emit DrawRequest(drawId: 1233, requestId: 64615734045720328393999036594058083191477363917117965202021540701223537138046 [6.461e76], requestAddress: TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b])
    │   │   └─ ← [Stop] 
    │   ├─ emit TokenPurchase(buyer: user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], token: 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc, amount: 44000000000000000000000 [4.4e22], receivedAmount: 44000000000000000000000 [4.4e22])
    │   └─ ← [Stop] 
    ├─ [753] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::balanceOf(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D]) [staticcall]
    │   ├─ [581] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::balanceOf(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D]) [delegatecall]
    │   │   └─ ← [Return] 44000000000000000000000 [4.4e22]
    │   └─ ← [Return] 44000000000000000000000 [4.4e22]
    ├─ emit log(val: "Successfully purchased tickets with VERSE through buyWithToken")
    ├─ [110787] TicketRouterV3::getTokenPriceForTickets(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 1, 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619)
    │   ├─ [2406] 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C::baseCost() [staticcall]
    │   │   └─ ← [Return] 22000000000000000000000 [2.2e22]
    │   ├─ [99377] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::quoteExactOutput(0xc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619, 22000000000000000000000 [2.2e22])
    │   │   ├─ [70875] 0xd19A1C8278D0420BFb2c825D99DC31fF86224607::128acb08(000000000000000000000000b27308f9f90d607463bb33ea1bebb41c27ce5ab60000000000000000000000000000000000000000000000000000000000000001fffffffffffffffffffffffffffffffffffffffffffffb5760ab10fede40000000000000000000000000000000000000000000000000000000000001000276a400000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000000002bc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619000000000000000000000000000000000000000000)
    │   │   │   ├─ [32908] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::transfer(0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, 22000000000000000000000 [2.2e22])
    │   │   │   │   ├─ [30230] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::transfer(0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, 22000000000000000000000 [2.2e22]) [delegatecall]
    │   │   │   │   │   ├─ emit Transfer(from: 0xd19A1C8278D0420BFb2c825D99DC31fF86224607, to: 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, value: 22000000000000000000000 [2.2e22])
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   └─ ← [Return] true
    │   │   │   ├─ [2608] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::balanceOf(0xd19A1C8278D0420BFb2c825D99DC31fF86224607) [staticcall]
    │   │   │   │   └─ ← [Return] 36305562923214511337 [3.63e19]
    │   │   │   ├─ [2565] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::fa461e33(00000000000000000000000000000000000000000000000000030f225981fafefffffffffffffffffffffffffffffffffffffffffffffb5760ab10fede4000000000000000000000000000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000000000000000002bc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619000000000000000000000000000000000000000000)
    │   │   │   │   └─ ← [Revert] 0x00000000000000000000000000000000000000000000000000030f225981fafe
    │   │   │   └─ ← [Revert] 0x00000000000000000000000000000000000000000000000000030f225981fafe
    │   │   └─ ← [Return] 861065135127294 [8.61e14]
    │   └─ ← [Return] 861065135127294 [8.61e14]
    ├─ [2608] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::balanceOf(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D]) [staticcall]
    │   └─ ← [Return] 22000000000000000000000000000000000000000 [2.2e40]
    ├─ [608] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::balanceOf(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D]) [staticcall]
    │   └─ ← [Return] 22000000000000000000000000000000000000000 [2.2e40]
    ├─ [0] VM::load(0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619, 0xb4260ebeada881f749f68942b3f0e36ae8ba2751d11fbbad46a58feb7b4cda51) [staticcall]
    │   └─ ← [Return] 0x00000000000000000000000000000040a6f5e0adcbd0d8e032b56f0000000000
    ├─ [0] VM::store(0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619, 0xb4260ebeada881f749f68942b3f0e36ae8ba2751d11fbbad46a58feb7b4cda51, 0x000000000000000000000000000000000000000000000000000187912cc0fd7f)
    │   └─ ← [Return] 
    ├─ [29312] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::approve(TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], 430532567563647 [4.305e14])
    │   ├─ emit Approval(owner: user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], spender: TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], value: 430532567563647 [4.305e14])
    │   └─ ← [Return] true
    ├─ [0] VM::expectRevert(Insufficient token amount)
    │   └─ ← [Return] 
    ├─ [131915] TicketRouterV3::buyWithToken(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 1, 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619, 430532567563647 [4.305e14])
    │   ├─ [2406] 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C::baseCost() [staticcall]
    │   │   └─ ← [Return] 22000000000000000000000 [2.2e22]
    │   ├─ [406] 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C::baseCost() [staticcall]
    │   │   └─ ← [Return] 22000000000000000000000 [2.2e22]
    │   ├─ [99377] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::quoteExactOutput(0xc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619, 22000000000000000000000 [2.2e22])
    │   │   ├─ [70875] 0xd19A1C8278D0420BFb2c825D99DC31fF86224607::128acb08(000000000000000000000000b27308f9f90d607463bb33ea1bebb41c27ce5ab60000000000000000000000000000000000000000000000000000000000000001fffffffffffffffffffffffffffffffffffffffffffffb5760ab10fede40000000000000000000000000000000000000000000000000000000000001000276a400000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000000002bc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619000000000000000000000000000000000000000000)
    │   │   │   ├─ [32908] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::transfer(0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, 22000000000000000000000 [2.2e22])
    │   │   │   │   ├─ [30230] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::transfer(0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, 22000000000000000000000 [2.2e22]) [delegatecall]
    │   │   │   │   │   ├─ emit Transfer(from: 0xd19A1C8278D0420BFb2c825D99DC31fF86224607, to: 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, value: 22000000000000000000000 [2.2e22])
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   └─ ← [Return] true
    │   │   │   ├─ [2608] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::balanceOf(0xd19A1C8278D0420BFb2c825D99DC31fF86224607) [staticcall]
    │   │   │   │   └─ ← [Return] 36305562923214511337 [3.63e19]
    │   │   │   ├─ [2565] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::fa461e33(00000000000000000000000000000000000000000000000000030f225981fafefffffffffffffffffffffffffffffffffffffffffffffb5760ab10fede4000000000000000000000000000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000000000000000002bc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619000000000000000000000000000000000000000000)
    │   │   │   │   └─ ← [Revert] 0x00000000000000000000000000000000000000000000000000030f225981fafe
    │   │   │   └─ ← [Revert] 0x00000000000000000000000000000000000000000000000000030f225981fafe
    │   │   └─ ← [Return] 861065135127294 [8.61e14]
    │   └─ ← [Revert] revert: TicketRouterV3: INVALID_COUNT
    └─ ← [Revert] Error != expected error: TicketRouterV3: INVALID_COUNT != Insufficient token amount

[PASS] test_DeploymentParameters() (gas: 5286590)
Logs:
  Ticket cost in VERSE: 22000000000000000000000
  VERSE allocated to user: 2200000000000000000000000
  ETH allocated to user: 22000000000000000000000000000000000000000
  WETH allocated to user: 22000000000000000000000000000000000000000
  Current scratcher VERSE balance: 6077066280935834200000000
  Updated scratcher VERSE balance: 2200000000000000000000000

Traces:
  [5286590] TestTicketRouterV3NoMock_POLYGON::test_DeploymentParameters()
    ├─ [2600756] → new TicketRouterV3@0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f
    │   └─ ← [Return] 11787 bytes of code
    ├─ [292] TicketRouterV3::WETH() [staticcall]
    │   └─ ← [Return] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619
    ├─ [293] TicketRouterV3::VERSE_TOKEN() [staticcall]
    │   └─ ← [Return] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc
    ├─ [270] TicketRouterV3::SWAP_ROUTER() [staticcall]
    │   └─ ← [Return] 0xE592427A0AEce92De3Edee1F18E0157C05861564
    ├─ [248] TicketRouterV3::QUOTER() [staticcall]
    │   └─ ← [Return] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6
    ├─ [0] VM::addr(<pk>) [staticcall]
    │   └─ ← [Return] customWeth: [0x376A444f024033DF508F64f97015235B94Fd3a97]
    ├─ [0] VM::label(customWeth: [0x376A444f024033DF508F64f97015235B94Fd3a97], "customWeth")
    │   └─ ← [Return] 
    ├─ [0] VM::addr(<pk>) [staticcall]
    │   └─ ← [Return] customVerse: [0x60275503f2d73Db7Df0833D3FEaf0507AdCF65e8]
    ├─ [0] VM::label(customVerse: [0x60275503f2d73Db7Df0833D3FEaf0507AdCF65e8], "customVerse")
    │   └─ ← [Return] 
    ├─ [0] VM::addr(<pk>) [staticcall]
    │   └─ ← [Return] customRouter: [0x87c962bDe7A492a8FCcB200b9766988A125e393D]
    ├─ [0] VM::label(customRouter: [0x87c962bDe7A492a8FCcB200b9766988A125e393D], "customRouter")
    │   └─ ← [Return] 
    ├─ [0] VM::addr(<pk>) [staticcall]
    │   └─ ← [Return] customQuoter: [0x4ba5261883961373DBCa11018CBf062314253de2]
    ├─ [0] VM::label(customQuoter: [0x4ba5261883961373DBCa11018CBf062314253de2], "customQuoter")
    │   └─ ← [Return] 
    ├─ [2600756] → new TicketRouterV3@0x2e234DAe75C793f67A35089C9d99245E1C58470b
    │   └─ ← [Return] 11787 bytes of code
    ├─ [292] TicketRouterV3::WETH() [staticcall]
    │   └─ ← [Return] customWeth: [0x376A444f024033DF508F64f97015235B94Fd3a97]
    ├─ [293] TicketRouterV3::VERSE_TOKEN() [staticcall]
    │   └─ ← [Return] customVerse: [0x60275503f2d73Db7Df0833D3FEaf0507AdCF65e8]
    ├─ [270] TicketRouterV3::SWAP_ROUTER() [staticcall]
    │   └─ ← [Return] customRouter: [0x87c962bDe7A492a8FCcB200b9766988A125e393D]
    ├─ [248] TicketRouterV3::QUOTER() [staticcall]
    │   └─ ← [Return] customQuoter: [0x4ba5261883961373DBCa11018CBf062314253de2]
    └─ ← [Stop] 

[PASS] test_DiagnoseUniswapPool() (gas: 2686068)
Logs:
  Ticket cost in VERSE: 22000000000000000000000
  VERSE allocated to user: 2200000000000000000000000
  ETH allocated to user: 22000000000000000000000000000000000000000
  WETH allocated to user: 22000000000000000000000000000000000000000
  Current scratcher VERSE balance: 6077066280935834200000000
  Updated scratcher VERSE balance: 2200000000000000000000000
  Scratcher baseCost: 22000000000000000000000
  Total VERSE needed: 22000000000000000000000
  WETH address: 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619
  WMATIC address: 0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270
  VERSE token address: 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc
  Uniswap V3 Quoter: 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6
  Uniswap V3 Router: 0xE592427A0AEce92De3Edee1F18E0157C05861564
  VERSE/WETH Pool: 0xd19A1C8278D0420BFb2c825D99DC31fF86224607
  Pool token0: 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619
  Pool token1: 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc
  Pool fee: 3000
  Pool sqrt price: 401075413567821137296972947504112
  Pool tick: 170599
  Pool has valid state - should have liquidity
  ===== ATTEMPTING EXACT INPUT QUOTATION =====
  Current WMATIC pool fee: 3000
  Testing WMATIC/WETH with fee tier: 500
  Trying VERSE to WMATIC direct quotation
  WETH needed for 1 VERSE via quoteExactOutput: 25800347732593374782555151
  Failed to quote WETH for full ticket cost via exactOutputSingle
  Testing WMATIC/WETH with fee tier: 3000
  Trying VERSE to WMATIC direct quotation
  WETH needed for 1 VERSE via quoteExactOutput: 25800347732593374782555151
  Failed to quote WETH for full ticket cost via exactOutputSingle
  Testing WMATIC/WETH with fee tier: 10000
  Trying VERSE to WMATIC direct quotation
  WETH needed for 1 VERSE via quoteExactOutput: 25800347732593374782555151
  Failed to quote WETH for full ticket cost via exactOutputSingle
  Current fork block: 70417301
  If all quote methods fail, we might need a more recent fork block

Traces:
  [2686068] TestTicketRouterV3NoMock_POLYGON::test_DiagnoseUniswapPool()
    ├─ [2406] 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C::baseCost() [staticcall]
    │   └─ ← [Return] 22000000000000000000000 [2.2e22]
    ├─ emit log_named_uint(key: "Scratcher baseCost", val: 22000000000000000000000 [2.2e22])
    ├─ emit log_named_uint(key: "Total VERSE needed", val: 22000000000000000000000 [2.2e22])
    ├─ emit log_named_address(key: "WETH address", val: 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619)
    ├─ emit log_named_address(key: "WMATIC address", val: 0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270)
    ├─ emit log_named_address(key: "VERSE token address", val: 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc)
    ├─ emit log_named_address(key: "Uniswap V3 Quoter", val: 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6)
    ├─ emit log_named_address(key: "Uniswap V3 Router", val: 0xE592427A0AEce92De3Edee1F18E0157C05861564)
    ├─ emit log_named_address(key: "VERSE/WETH Pool", val: 0xd19A1C8278D0420BFb2c825D99DC31fF86224607)
    ├─ [266] 0xd19A1C8278D0420BFb2c825D99DC31fF86224607::token0() [staticcall]
    │   └─ ← [Return] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619
    ├─ emit log_named_address(key: "Pool token0", val: 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619)
    ├─ [308] 0xd19A1C8278D0420BFb2c825D99DC31fF86224607::token1() [staticcall]
    │   └─ ← [Return] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc
    ├─ emit log_named_address(key: "Pool token1", val: 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc)
    ├─ [251] 0xd19A1C8278D0420BFb2c825D99DC31fF86224607::fee() [staticcall]
    │   └─ ← [Return] 3000
    ├─ emit log_named_uint(key: "Pool fee", val: 3000)
    ├─ [2696] 0xd19A1C8278D0420BFb2c825D99DC31fF86224607::slot0() [staticcall]
    │   └─ ← [Return] 401075413567821137296972947504112 [4.01e32], 170599 [1.705e5], 0, 1, 1, 0, true
    ├─ emit log_named_uint(key: "Pool sqrt price", val: 401075413567821137296972947504112 [4.01e32])
    ├─ emit log_named_int(key: "Pool tick", val: 170599 [1.705e5])
    ├─ emit log(val: "Pool has valid state - should have liquidity")
    ├─ emit log_string(val: "===== ATTEMPTING EXACT INPUT QUOTATION =====")
    ├─ [2651] TicketRouterV3::getPoolFee(0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270) [staticcall]
    │   └─ ← [Return] 3000
    ├─ emit log_named_uint(key: "Current WMATIC pool fee", val: 3000)
    ├─ emit log_named_uint(key: "Testing WMATIC/WETH with fee tier", val: 500)
    ├─ [0] VM::startPrank(deployer: [0xaE0bDc4eEAC5E950B67C6819B118761CaAF61946])
    │   └─ ← [Return] 
    ├─ [47787] TicketRouterV3::setCustomPoolFee(0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270, 500)
    │   ├─ emit FeeUpdated(token: 0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270, fee: 500)
    │   └─ ← [Stop] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ emit log_string(val: "Trying VERSE to WMATIC direct quotation")
    ├─ [174008] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::quoteExactOutput(0x7ceb23fd6bc0add59e62ac25578270cff1b9f619000bb8c708d6f2153933daa50b2d0758955be0a93a8fec, 1000000000000000000 [1e18])
    │   ├─ [143083] 0xd19A1C8278D0420BFb2c825D99DC31fF86224607::128acb08(000000000000000000000000b27308f9f90d607463bb33ea1bebb41c27ce5ab60000000000000000000000000000000000000000000000000000000000000000fffffffffffffffffffffffffffffffffffffffffffffffff21f494c589c0000000000000000000000000000fffd8963efd1fc6a506488495d951d5263988d2500000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000000002b7ceb23fd6bc0add59e62ac25578270cff1b9f619000bb8c708d6f2153933daa50b2d0758955be0a93a8fec000000000000000000000000000000000000000000)
    │   │   ├─ [30338] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::transfer(0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, 1000000000000000000 [1e18])
    │   │   │   ├─ emit Transfer(from: 0xd19A1C8278D0420BFb2c825D99DC31fF86224607, to: 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, value: 1000000000000000000 [1e18])
    │   │   │   └─ ← [Return] true
    │   │   ├─ [5253] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::balanceOf(0xd19A1C8278D0420BFb2c825D99DC31fF86224607) [staticcall]
    │   │   │   ├─ [2581] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::balanceOf(0xd19A1C8278D0420BFb2c825D99DC31fF86224607) [delegatecall]
    │   │   │   │   └─ ← [Return] 1088619960062111937423797817 [1.088e27]
    │   │   │   └─ ← [Return] 1088619960062111937423797817 [1.088e27]
    │   │   ├─ [2577] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::fa461e33(fffffffffffffffffffffffffffffffffffffffffffffffff21f494c589c000000000000000000000000000000000000000000000015576fa73364db4e44040f0000000000000000000000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000000000000000002b7ceb23fd6bc0add59e62ac25578270cff1b9f619000bb8c708d6f2153933daa50b2d0758955be0a93a8fec000000000000000000000000000000000000000000)
    │   │   │   └─ ← [Revert] 0x00000000000000000000000000000000000000000015576fa73364db4e44040f
    │   │   └─ ← [Revert] 0x00000000000000000000000000000000000000000015576fa73364db4e44040f
    │   └─ ← [Return] 25800347732593374782555151 [2.58e25]
    ├─ emit log_named_uint(key: "WETH needed for 1 VERSE via quoteExactOutput", val: 25800347732593374782555151 [2.58e25])
    ├─ [672934] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::quoteExactOutput(0x7ceb23fd6bc0add59e62ac25578270cff1b9f619000bb8c708d6f2153933daa50b2d0758955be0a93a8fec, 22000000000000000000000 [2.2e22])
    │   ├─ [622325] 0xd19A1C8278D0420BFb2c825D99DC31fF86224607::128acb08(000000000000000000000000b27308f9f90d607463bb33ea1bebb41c27ce5ab60000000000000000000000000000000000000000000000000000000000000000fffffffffffffffffffffffffffffffffffffffffffffb5760ab10fede400000000000000000000000000000fffd8963efd1fc6a506488495d951d5263988d2500000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000000002b7ceb23fd6bc0add59e62ac25578270cff1b9f619000bb8c708d6f2153933daa50b2d0758955be0a93a8fec000000000000000000000000000000000000000000)
    │   │   ├─ [30338] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::transfer(0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, 36292810473262482215 [3.629e19])
    │   │   │   ├─ emit Transfer(from: 0xd19A1C8278D0420BFb2c825D99DC31fF86224607, to: 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, value: 36292810473262482215 [3.629e19])
    │   │   │   └─ ← [Return] true
    │   │   ├─ [5253] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::balanceOf(0xd19A1C8278D0420BFb2c825D99DC31fF86224607) [staticcall]
    │   │   │   ├─ [2581] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::balanceOf(0xd19A1C8278D0420BFb2c825D99DC31fF86224607) [delegatecall]
    │   │   │   │   └─ ← [Return] 1088619960062111937423797817 [1.088e27]
    │   │   │   └─ ← [Return] 1088619960062111937423797817 [1.088e27]
    │   │   ├─ [2558] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::fa461e33(fffffffffffffffffffffffffffffffffffffffffffffffe08560929809cfcd9000000000000000000000000000000000000000003b306d10cc5cdb312482efc0000000000000000000000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000000000000000002b7ceb23fd6bc0add59e62ac25578270cff1b9f619000bb8c708d6f2153933daa50b2d0758955be0a93a8fec000000000000000000000000000000000000000000)
    │   │   │   └─ ← [Revert] 
    │   │   └─ ← [Revert] 
    │   └─ ← [Revert] revert: Unexpected error
    ├─ emit log(val: "Failed to quote WETH for full ticket cost via exactOutputSingle")
    ├─ emit log_named_uint(key: "Testing WMATIC/WETH with fee tier", val: 3000)
    ├─ [0] VM::startPrank(deployer: [0xaE0bDc4eEAC5E950B67C6819B118761CaAF61946])
    │   └─ ← [Return] 
    ├─ [30687] TicketRouterV3::setCustomPoolFee(0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270, 3000)
    │   ├─ emit FeeUpdated(token: 0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270, fee: 3000)
    │   └─ ← [Stop] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ emit log_string(val: "Trying VERSE to WMATIC direct quotation")
    ├─ [174008] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::quoteExactOutput(0x7ceb23fd6bc0add59e62ac25578270cff1b9f619000bb8c708d6f2153933daa50b2d0758955be0a93a8fec, 1000000000000000000 [1e18])
    │   ├─ [143083] 0xd19A1C8278D0420BFb2c825D99DC31fF86224607::128acb08(000000000000000000000000b27308f9f90d607463bb33ea1bebb41c27ce5ab60000000000000000000000000000000000000000000000000000000000000000fffffffffffffffffffffffffffffffffffffffffffffffff21f494c589c0000000000000000000000000000fffd8963efd1fc6a506488495d951d5263988d2500000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000000002b7ceb23fd6bc0add59e62ac25578270cff1b9f619000bb8c708d6f2153933daa50b2d0758955be0a93a8fec000000000000000000000000000000000000000000)
    │   │   ├─ [30338] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::transfer(0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, 1000000000000000000 [1e18])
    │   │   │   ├─ emit Transfer(from: 0xd19A1C8278D0420BFb2c825D99DC31fF86224607, to: 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, value: 1000000000000000000 [1e18])
    │   │   │   └─ ← [Return] true
    │   │   ├─ [5253] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::balanceOf(0xd19A1C8278D0420BFb2c825D99DC31fF86224607) [staticcall]
    │   │   │   ├─ [2581] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::balanceOf(0xd19A1C8278D0420BFb2c825D99DC31fF86224607) [delegatecall]
    │   │   │   │   └─ ← [Return] 1088619960062111937423797817 [1.088e27]
    │   │   │   └─ ← [Return] 1088619960062111937423797817 [1.088e27]
    │   │   ├─ [2577] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::fa461e33(fffffffffffffffffffffffffffffffffffffffffffffffff21f494c589c000000000000000000000000000000000000000000000015576fa73364db4e44040f0000000000000000000000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000000000000000002b7ceb23fd6bc0add59e62ac25578270cff1b9f619000bb8c708d6f2153933daa50b2d0758955be0a93a8fec000000000000000000000000000000000000000000)
    │   │   │   └─ ← [Revert] 0x00000000000000000000000000000000000000000015576fa73364db4e44040f
    │   │   └─ ← [Revert] 0x00000000000000000000000000000000000000000015576fa73364db4e44040f
    │   └─ ← [Return] 25800347732593374782555151 [2.58e25]
    ├─ emit log_named_uint(key: "WETH needed for 1 VERSE via quoteExactOutput", val: 25800347732593374782555151 [2.58e25])
    ├─ [672934] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::quoteExactOutput(0x7ceb23fd6bc0add59e62ac25578270cff1b9f619000bb8c708d6f2153933daa50b2d0758955be0a93a8fec, 22000000000000000000000 [2.2e22])
    │   ├─ [622325] 0xd19A1C8278D0420BFb2c825D99DC31fF86224607::128acb08(000000000000000000000000b27308f9f90d607463bb33ea1bebb41c27ce5ab60000000000000000000000000000000000000000000000000000000000000000fffffffffffffffffffffffffffffffffffffffffffffb5760ab10fede400000000000000000000000000000fffd8963efd1fc6a506488495d951d5263988d2500000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000000002b7ceb23fd6bc0add59e62ac25578270cff1b9f619000bb8c708d6f2153933daa50b2d0758955be0a93a8fec000000000000000000000000000000000000000000)
    │   │   ├─ [30338] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::transfer(0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, 36292810473262482215 [3.629e19])
    │   │   │   ├─ emit Transfer(from: 0xd19A1C8278D0420BFb2c825D99DC31fF86224607, to: 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, value: 36292810473262482215 [3.629e19])
    │   │   │   └─ ← [Return] true
    │   │   ├─ [5253] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::balanceOf(0xd19A1C8278D0420BFb2c825D99DC31fF86224607) [staticcall]
    │   │   │   ├─ [2581] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::balanceOf(0xd19A1C8278D0420BFb2c825D99DC31fF86224607) [delegatecall]
    │   │   │   │   └─ ← [Return] 1088619960062111937423797817 [1.088e27]
    │   │   │   └─ ← [Return] 1088619960062111937423797817 [1.088e27]
    │   │   ├─ [2558] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::fa461e33(fffffffffffffffffffffffffffffffffffffffffffffffe08560929809cfcd9000000000000000000000000000000000000000003b306d10cc5cdb312482efc0000000000000000000000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000000000000000002b7ceb23fd6bc0add59e62ac25578270cff1b9f619000bb8c708d6f2153933daa50b2d0758955be0a93a8fec000000000000000000000000000000000000000000)
    │   │   │   └─ ← [Revert] 
    │   │   └─ ← [Revert] 
    │   └─ ← [Revert] revert: Unexpected error
    ├─ emit log(val: "Failed to quote WETH for full ticket cost via exactOutputSingle")
    ├─ emit log_named_uint(key: "Testing WMATIC/WETH with fee tier", val: 10000 [1e4])
    ├─ [0] VM::startPrank(deployer: [0xaE0bDc4eEAC5E950B67C6819B118761CaAF61946])
    │   └─ ← [Return] 
    ├─ [30687] TicketRouterV3::setCustomPoolFee(0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270, 10000 [1e4])
    │   ├─ emit FeeUpdated(token: 0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270, fee: 10000 [1e4])
    │   └─ ← [Stop] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ emit log_string(val: "Trying VERSE to WMATIC direct quotation")
    ├─ [174008] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::quoteExactOutput(0x7ceb23fd6bc0add59e62ac25578270cff1b9f619000bb8c708d6f2153933daa50b2d0758955be0a93a8fec, 1000000000000000000 [1e18])
    │   ├─ [143083] 0xd19A1C8278D0420BFb2c825D99DC31fF86224607::128acb08(000000000000000000000000b27308f9f90d607463bb33ea1bebb41c27ce5ab60000000000000000000000000000000000000000000000000000000000000000fffffffffffffffffffffffffffffffffffffffffffffffff21f494c589c0000000000000000000000000000fffd8963efd1fc6a506488495d951d5263988d2500000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000000002b7ceb23fd6bc0add59e62ac25578270cff1b9f619000bb8c708d6f2153933daa50b2d0758955be0a93a8fec000000000000000000000000000000000000000000)
    │   │   ├─ [30338] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::transfer(0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, 1000000000000000000 [1e18])
    │   │   │   ├─ emit Transfer(from: 0xd19A1C8278D0420BFb2c825D99DC31fF86224607, to: 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, value: 1000000000000000000 [1e18])
    │   │   │   └─ ← [Return] true
    │   │   ├─ [5253] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::balanceOf(0xd19A1C8278D0420BFb2c825D99DC31fF86224607) [staticcall]
    │   │   │   ├─ [2581] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::balanceOf(0xd19A1C8278D0420BFb2c825D99DC31fF86224607) [delegatecall]
    │   │   │   │   └─ ← [Return] 1088619960062111937423797817 [1.088e27]
    │   │   │   └─ ← [Return] 1088619960062111937423797817 [1.088e27]
    │   │   ├─ [2577] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::fa461e33(fffffffffffffffffffffffffffffffffffffffffffffffff21f494c589c000000000000000000000000000000000000000000000015576fa73364db4e44040f0000000000000000000000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000000000000000002b7ceb23fd6bc0add59e62ac25578270cff1b9f619000bb8c708d6f2153933daa50b2d0758955be0a93a8fec000000000000000000000000000000000000000000)
    │   │   │   └─ ← [Revert] 0x00000000000000000000000000000000000000000015576fa73364db4e44040f
    │   │   └─ ← [Revert] 0x00000000000000000000000000000000000000000015576fa73364db4e44040f
    │   └─ ← [Return] 25800347732593374782555151 [2.58e25]
    ├─ emit log_named_uint(key: "WETH needed for 1 VERSE via quoteExactOutput", val: 25800347732593374782555151 [2.58e25])
    ├─ [672934] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::quoteExactOutput(0x7ceb23fd6bc0add59e62ac25578270cff1b9f619000bb8c708d6f2153933daa50b2d0758955be0a93a8fec, 22000000000000000000000 [2.2e22])
    │   ├─ [622325] 0xd19A1C8278D0420BFb2c825D99DC31fF86224607::128acb08(000000000000000000000000b27308f9f90d607463bb33ea1bebb41c27ce5ab60000000000000000000000000000000000000000000000000000000000000000fffffffffffffffffffffffffffffffffffffffffffffb5760ab10fede400000000000000000000000000000fffd8963efd1fc6a506488495d951d5263988d2500000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000000002b7ceb23fd6bc0add59e62ac25578270cff1b9f619000bb8c708d6f2153933daa50b2d0758955be0a93a8fec000000000000000000000000000000000000000000)
    │   │   ├─ [30338] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::transfer(0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, 36292810473262482215 [3.629e19])
    │   │   │   ├─ emit Transfer(from: 0xd19A1C8278D0420BFb2c825D99DC31fF86224607, to: 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, value: 36292810473262482215 [3.629e19])
    │   │   │   └─ ← [Return] true
    │   │   ├─ [5253] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::balanceOf(0xd19A1C8278D0420BFb2c825D99DC31fF86224607) [staticcall]
    │   │   │   ├─ [2581] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::balanceOf(0xd19A1C8278D0420BFb2c825D99DC31fF86224607) [delegatecall]
    │   │   │   │   └─ ← [Return] 1088619960062111937423797817 [1.088e27]
    │   │   │   └─ ← [Return] 1088619960062111937423797817 [1.088e27]
    │   │   ├─ [2558] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::fa461e33(fffffffffffffffffffffffffffffffffffffffffffffffe08560929809cfcd9000000000000000000000000000000000000000003b306d10cc5cdb312482efc0000000000000000000000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000000000000000002b7ceb23fd6bc0add59e62ac25578270cff1b9f619000bb8c708d6f2153933daa50b2d0758955be0a93a8fec000000000000000000000000000000000000000000)
    │   │   │   └─ ← [Revert] 
    │   │   └─ ← [Revert] 
    │   └─ ← [Revert] revert: Unexpected error
    ├─ emit log(val: "Failed to quote WETH for full ticket cost via exactOutputSingle")
    ├─ emit log_named_uint(key: "Current fork block", val: 70417301 [7.041e7])
    ├─ emit log_string(val: "If all quote methods fail, we might need a more recent fork block")
    └─ ← [Stop] 

[PASS] test_DirectPathEncoding() (gas: 97993)
Logs:
  Ticket cost in VERSE: 22000000000000000000000
  VERSE allocated to user: 2200000000000000000000000
  ETH allocated to user: 22000000000000000000000000000000000000000
  WETH allocated to user: 22000000000000000000000000000000000000000
  Current scratcher VERSE balance: 6077066280935834200000000
  Updated scratcher VERSE balance: 2200000000000000000000000
  Direct path encoding works through token price function

Traces:
  [97993] TestTicketRouterV3NoMock_POLYGON::test_DirectPathEncoding()
    ├─ [110787] TicketRouterV3::getTokenPriceForTickets(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 1, 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619)
    │   ├─ [2406] 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C::baseCost() [staticcall]
    │   │   └─ ← [Return] 22000000000000000000000 [2.2e22]
    │   ├─ [99377] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::quoteExactOutput(0xc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619, 22000000000000000000000 [2.2e22])
    │   │   ├─ [70875] 0xd19A1C8278D0420BFb2c825D99DC31fF86224607::128acb08(000000000000000000000000b27308f9f90d607463bb33ea1bebb41c27ce5ab60000000000000000000000000000000000000000000000000000000000000001fffffffffffffffffffffffffffffffffffffffffffffb5760ab10fede40000000000000000000000000000000000000000000000000000000000001000276a400000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000000002bc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619000000000000000000000000000000000000000000)
    │   │   │   ├─ [32908] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::transfer(0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, 22000000000000000000000 [2.2e22])
    │   │   │   │   ├─ [30230] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::transfer(0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, 22000000000000000000000 [2.2e22]) [delegatecall]
    │   │   │   │   │   ├─ emit Transfer(from: 0xd19A1C8278D0420BFb2c825D99DC31fF86224607, to: 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, value: 22000000000000000000000 [2.2e22])
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   └─ ← [Return] true
    │   │   │   ├─ [2608] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::balanceOf(0xd19A1C8278D0420BFb2c825D99DC31fF86224607) [staticcall]
    │   │   │   │   └─ ← [Return] 36305562923214511337 [3.63e19]
    │   │   │   ├─ [2565] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::fa461e33(00000000000000000000000000000000000000000000000000030f225981fafefffffffffffffffffffffffffffffffffffffffffffffb5760ab10fede4000000000000000000000000000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000000000000000002bc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619000000000000000000000000000000000000000000)
    │   │   │   │   └─ ← [Revert] 0x00000000000000000000000000000000000000000000000000030f225981fafe
    │   │   │   └─ ← [Revert] 0x00000000000000000000000000000000000000000000000000030f225981fafe
    │   │   └─ ← [Return] 861065135127294 [8.61e14]
    │   └─ ← [Return] 861065135127294 [8.61e14]
    ├─ emit log(val: "Direct path encoding works through token price function")
    └─ ← [Stop] 

[PASS] test_DirectQuoteTest() (gas: 350144)
Logs:
  Ticket cost in VERSE: 22000000000000000000000
  VERSE allocated to user: 2200000000000000000000000
  ETH allocated to user: 22000000000000000000000000000000000000000
  WETH allocated to user: 22000000000000000000000000000000000000000
  Current scratcher VERSE balance: 6077066280935834200000000
  Updated scratcher VERSE balance: 2200000000000000000000000
  Testing direct quotation with router contract
  VERSE/WETH pool fee from router: 3000
  Router VERSE_TOKEN address: 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc
  Router WETH address: 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619
  Router SWAP_ROUTER address: 0xE592427A0AEce92De3Edee1F18E0157C05861564
  Router QUOTER address: 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6
  Scratcher baseCost: 22000000000000000000000
  Testing direct WETH->VERSE quote
  SUCCESS: WETH amount for VERSE: 861065135127294
  Testing WMATIC->WETH quote with fee 500
  SUCCESS: WMATIC amount for WETH: 7569311561610596335
  SUCCESS: Router getNativePriceForTickets returned: 7599177865887467014

Traces:
  [350144] TestTicketRouterV3NoMock_POLYGON::test_DirectQuoteTest()
    ├─ emit log_string(val: "Testing direct quotation with router contract")
    ├─ [291] TicketRouterV3::VERSE_WETH_POOL_FEE() [staticcall]
    │   └─ ← [Return] 3000
    ├─ emit log_named_uint(key: "VERSE/WETH pool fee from router", val: 3000)
    ├─ [293] TicketRouterV3::VERSE_TOKEN() [staticcall]
    │   └─ ← [Return] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc
    ├─ emit log_named_address(key: "Router VERSE_TOKEN address", val: 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc)
    ├─ [292] TicketRouterV3::WETH() [staticcall]
    │   └─ ← [Return] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619
    ├─ emit log_named_address(key: "Router WETH address", val: 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619)
    ├─ [270] TicketRouterV3::SWAP_ROUTER() [staticcall]
    │   └─ ← [Return] 0xE592427A0AEce92De3Edee1F18E0157C05861564
    ├─ emit log_named_address(key: "Router SWAP_ROUTER address", val: 0xE592427A0AEce92De3Edee1F18E0157C05861564)
    ├─ [248] TicketRouterV3::QUOTER() [staticcall]
    │   └─ ← [Return] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6
    ├─ emit log_named_address(key: "Router QUOTER address", val: 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6)
    ├─ [2406] 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C::baseCost() [staticcall]
    │   └─ ← [Return] 22000000000000000000000 [2.2e22]
    ├─ emit log_named_uint(key: "Scratcher baseCost", val: 22000000000000000000000 [2.2e22])
    ├─ emit log_string(val: "Testing direct WETH->VERSE quote")
    ├─ [101805] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::quoteExactOutput(0xc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619, 22000000000000000000000 [2.2e22])
    │   ├─ [70875] 0xd19A1C8278D0420BFb2c825D99DC31fF86224607::128acb08(000000000000000000000000b27308f9f90d607463bb33ea1bebb41c27ce5ab60000000000000000000000000000000000000000000000000000000000000001fffffffffffffffffffffffffffffffffffffffffffffb5760ab10fede40000000000000000000000000000000000000000000000000000000000001000276a400000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000000002bc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619000000000000000000000000000000000000000000)
    │   │   ├─ [32908] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::transfer(0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, 22000000000000000000000 [2.2e22])
    │   │   │   ├─ [30230] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::transfer(0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, 22000000000000000000000 [2.2e22]) [delegatecall]
    │   │   │   │   ├─ emit Transfer(from: 0xd19A1C8278D0420BFb2c825D99DC31fF86224607, to: 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, value: 22000000000000000000000 [2.2e22])
    │   │   │   │   └─ ← [Return] true
    │   │   │   └─ ← [Return] true
    │   │   ├─ [2608] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::balanceOf(0xd19A1C8278D0420BFb2c825D99DC31fF86224607) [staticcall]
    │   │   │   └─ ← [Return] 36305562923214511337 [3.63e19]
    │   │   ├─ [2565] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::fa461e33(00000000000000000000000000000000000000000000000000030f225981fafefffffffffffffffffffffffffffffffffffffffffffffb5760ab10fede4000000000000000000000000000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000000000000000002bc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619000000000000000000000000000000000000000000)
    │   │   │   └─ ← [Revert] 0x00000000000000000000000000000000000000000000000000030f225981fafe
    │   │   └─ ← [Revert] 0x00000000000000000000000000000000000000000000000000030f225981fafe
    │   └─ ← [Return] 861065135127294 [8.61e14]
    ├─ emit log_named_uint(key: "SUCCESS: WETH amount for VERSE", val: 861065135127294 [8.61e14])
    ├─ emit log_string(val: "Testing WMATIC->WETH quote with fee 500")
    ├─ [98907] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::quoteExactOutput(0x7ceb23fd6bc0add59e62ac25578270cff1b9f6190001f40d500b1d8e8ef31e21c99d1db9a6444d3adf1270, 861065135127294 [8.61e14])
    │   ├─ [67989] 0x86f1d8390222A3691C28938eC7404A1661E618e0::128acb08(000000000000000000000000b27308f9f90d607463bb33ea1bebb41c27ce5ab60000000000000000000000000000000000000000000000000000000000000001fffffffffffffffffffffffffffffffffffffffffffffffffffcf0dda67e050200000000000000000000000000000000000000000000000000000001000276a400000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000000002b7ceb23fd6bc0add59e62ac25578270cff1b9f6190001f40d500b1d8e8ef31e21c99d1db9a6444d3adf1270000000000000000000000000000000000000000000)
    │   │   ├─ [30338] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::transfer(0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, 861065135127294 [8.61e14])
    │   │   │   ├─ emit Transfer(from: 0x86f1d8390222A3691C28938eC7404A1661E618e0, to: 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, value: 861065135127294 [8.61e14])
    │   │   │   └─ ← [Return] true
    │   │   ├─ [2564] 0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270::balanceOf(0x86f1d8390222A3691C28938eC7404A1661E618e0) [staticcall]
    │   │   │   └─ ← [Return] 1964647755211509057916027 [1.964e24]
    │   │   ├─ [2565] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::fa461e33(000000000000000000000000000000000000000000000000690b98c2e80e8feffffffffffffffffffffffffffffffffffffffffffffffffffffcf0dda67e05020000000000000000000000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000000000000000002b7ceb23fd6bc0add59e62ac25578270cff1b9f6190001f40d500b1d8e8ef31e21c99d1db9a6444d3adf1270000000000000000000000000000000000000000000)
    │   │   │   └─ ← [Revert] 0x000000000000000000000000000000000000000000000000690b98c2e80e8fef
    │   │   └─ ← [Revert] 0x000000000000000000000000000000000000000000000000690b98c2e80e8fef
    │   └─ ← [Return] 7569311561610596335 [7.569e18]
    ├─ emit log_named_uint(key: "SUCCESS: WMATIC amount for WETH", val: 7569311561610596335 [7.569e18])
    ├─ [187829] TicketRouterV3::getNativePriceForTickets(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 1)
    │   ├─ [2406] 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C::baseCost() [staticcall]
    │   │   └─ ← [Return] 22000000000000000000000 [2.2e22]
    │   ├─ [99377] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::quoteExactOutput(0xc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619, 22000000000000000000000 [2.2e22])
    │   │   ├─ [70875] 0xd19A1C8278D0420BFb2c825D99DC31fF86224607::128acb08(000000000000000000000000b27308f9f90d607463bb33ea1bebb41c27ce5ab60000000000000000000000000000000000000000000000000000000000000001fffffffffffffffffffffffffffffffffffffffffffffb5760ab10fede40000000000000000000000000000000000000000000000000000000000001000276a400000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000000002bc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619000000000000000000000000000000000000000000)
    │   │   │   ├─ [32908] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::transfer(0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, 22000000000000000000000 [2.2e22])
    │   │   │   │   ├─ [30230] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::transfer(0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, 22000000000000000000000 [2.2e22]) [delegatecall]
    │   │   │   │   │   ├─ emit Transfer(from: 0xd19A1C8278D0420BFb2c825D99DC31fF86224607, to: 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, value: 22000000000000000000000 [2.2e22])
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   └─ ← [Return] true
    │   │   │   ├─ [2608] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::balanceOf(0xd19A1C8278D0420BFb2c825D99DC31fF86224607) [staticcall]
    │   │   │   │   └─ ← [Return] 36305562923214511337 [3.63e19]
    │   │   │   ├─ [2565] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::fa461e33(00000000000000000000000000000000000000000000000000030f225981fafefffffffffffffffffffffffffffffffffffffffffffffb5760ab10fede4000000000000000000000000000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000000000000000002bc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619000000000000000000000000000000000000000000)
    │   │   │   │   └─ ← [Revert] 0x00000000000000000000000000000000000000000000000000030f225981fafe
    │   │   │   └─ ← [Revert] 0x00000000000000000000000000000000000000000000000000030f225981fafe
    │   │   └─ ← [Return] 861065135127294 [8.61e14]
    │   ├─ [94372] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::quoteExactOutput(0x7ceb23fd6bc0add59e62ac25578270cff1b9f619000bb80d500b1d8e8ef31e21c99d1db9a6444d3adf1270, 861065135127294 [8.61e14])
    │   │   ├─ [67970] 0x167384319B41F7094e62f7506409Eb38079AbfF8::128acb08(000000000000000000000000b27308f9f90d607463bb33ea1bebb41c27ce5ab60000000000000000000000000000000000000000000000000000000000000001fffffffffffffffffffffffffffffffffffffffffffffffffffcf0dda67e050200000000000000000000000000000000000000000000000000000001000276a400000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000000002b7ceb23fd6bc0add59e62ac25578270cff1b9f619000bb80d500b1d8e8ef31e21c99d1db9a6444d3adf1270000000000000000000000000000000000000000000)
    │   │   │   ├─ [30338] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::transfer(0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, 861065135127294 [8.61e14])
    │   │   │   │   ├─ emit Transfer(from: 0x167384319B41F7094e62f7506409Eb38079AbfF8, to: 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, value: 861065135127294 [8.61e14])
    │   │   │   │   └─ ← [Return] true
    │   │   │   ├─ [2564] 0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270::balanceOf(0x167384319B41F7094e62f7506409Eb38079AbfF8) [staticcall]
    │   │   │   │   └─ ← [Return] 4875322014175209452751849 [4.875e24]
    │   │   │   ├─ [2565] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::fa461e33(0000000000000000000000000000000000000000000000006975b401c13bc606fffffffffffffffffffffffffffffffffffffffffffffffffffcf0dda67e05020000000000000000000000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000000000000000002b7ceb23fd6bc0add59e62ac25578270cff1b9f619000bb80d500b1d8e8ef31e21c99d1db9a6444d3adf1270000000000000000000000000000000000000000000)
    │   │   │   │   └─ ← [Revert] 0x0000000000000000000000000000000000000000000000006975b401c13bc606
    │   │   │   └─ ← [Revert] 0x0000000000000000000000000000000000000000000000006975b401c13bc606
    │   │   └─ ← [Return] 7599177865887467014 [7.599e18]
    │   └─ ← [Return] 7599177865887467014 [7.599e18]
    ├─ emit log_named_uint(key: "SUCCESS: Router getNativePriceForTickets returned", val: 7599177865887467014 [7.599e18])
    └─ ← [Stop] 

[PASS] test_EdgeCases() (gas: 118824)
Logs:
  Ticket cost in VERSE: 22000000000000000000000
  VERSE allocated to user: 2200000000000000000000000
  ETH allocated to user: 22000000000000000000000000000000000000000
  WETH allocated to user: 22000000000000000000000000000000000000000
  Current scratcher VERSE balance: 6077066280935834200000000
  Updated scratcher VERSE balance: 2200000000000000000000000
  Price for 1000 tickets (VERSE): 22000000000000000000000000

Traces:
  [118824] TestTicketRouterV3NoMock_POLYGON::test_EdgeCases()
    ├─ [0] VM::startPrank(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D])
    │   └─ ← [Return] 
    ├─ [0] VM::expectRevert(Ticket count must be greater than 0)
    │   └─ ← [Return] 
    ├─ [22101] TicketRouterV3::buyTickets(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 0)
    │   └─ ← [Revert] revert: Ticket count must be greater than 0
    ├─ [0] VM::expectRevert(Ticket count must be greater than 0)
    │   └─ ← [Return] 
    ├─ [22055] TicketRouterV3::buyTicketsWithNative{value: 1000000000000000000}(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 0)
    │   └─ ← [Revert] revert: Ticket count must be greater than 0
    ├─ [0] VM::expectRevert(Ticket count must be greater than 0)
    │   └─ ← [Return] 
    ├─ [22762] TicketRouterV3::buyWithToken(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 0, 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619, 1000000000000000000 [1e18])
    │   └─ ← [Revert] revert: Ticket count must be greater than 0
    ├─ [27917] TicketRouterV3::getTokenPriceForTickets(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 1000, 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc)
    │   ├─ [2406] 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C::baseCost() [staticcall]
    │   │   └─ ← [Return] 22000000000000000000000 [2.2e22]
    │   └─ ← [Return] 22000000000000000000000000 [2.2e25]
    ├─ emit log_named_uint(key: "Price for 1000 tickets (VERSE)", val: 22000000000000000000000000 [2.2e25])
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    └─ ← [Stop] 

[PASS] test_EncodePath() (gas: 7393)
Logs:
  Ticket cost in VERSE: 22000000000000000000000
  VERSE allocated to user: 2200000000000000000000000
  ETH allocated to user: 22000000000000000000000000000000000000000
  WETH allocated to user: 22000000000000000000000000000000000000000
  Current scratcher VERSE balance: 6077066280935834200000000
  Updated scratcher VERSE balance: 2200000000000000000000000

Traces:
  [7393] TestTicketRouterV3NoMock_POLYGON::test_EncodePath()
    ├─ [1396] TicketRouterV3::testEncodePath(0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619, 0x0000000000000000000000000000000000000123, 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc, 3000, 500) [staticcall]
    │   └─ ← [Return] 0xc708d6f2153933daa50b2d0758955be0a93a8fec0001f40000000000000000000000000000000000000123000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619
    └─ ← [Stop] 

[PASS] test_EventEmission() (gas: 61993)
Logs:
  Ticket cost in VERSE: 22000000000000000000000
  VERSE allocated to user: 2200000000000000000000000
  ETH allocated to user: 22000000000000000000000000000000000000000
  WETH allocated to user: 22000000000000000000000000000000000000000
  Current scratcher VERSE balance: 6077066280935834200000000
  Updated scratcher VERSE balance: 2200000000000000000000000
  TokenPurchase event selector: 0x623b380400000000000000000000000000000000000000000000000000000000

Traces:
  [61993] TestTicketRouterV3NoMock_POLYGON::test_EventEmission()
    ├─ [0] VM::startPrank(deployer: [0xaE0bDc4eEAC5E950B67C6819B118761CaAF61946])
    │   └─ ← [Return] 
    ├─ [0] VM::expectEmit(true, false, false, true)
    │   └─ ← [Return] 
    ├─ emit FeeUpdated(token: 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619, fee: 100)
    ├─ [47775] TicketRouterV3::setCustomPoolFee(0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619, 100)
    │   ├─ emit FeeUpdated(token: 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619, fee: 100)
    │   └─ ← [Stop] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ emit log_named_bytes32(key: "TokenPurchase event selector", val: 0x623b380400000000000000000000000000000000000000000000000000000000)
    └─ ← [Stop] 

[PASS] test_GetNativePriceForTickets() (gas: 466317)
Logs:
  Ticket cost in VERSE: 22000000000000000000000
  VERSE allocated to user: 2200000000000000000000000
  ETH allocated to user: 22000000000000000000000000000000000000000
  WETH allocated to user: 22000000000000000000000000000000000000000
  Current scratcher VERSE balance: 6077066280935834200000000
  Updated scratcher VERSE balance: 2200000000000000000000000
  Native price for 1 ticket (in wei): 7599177865887467014
  Ticket cost in VERSE: 22000000000000000000000
  Native price for 2 tickets (in wei): 15198416377005113936

Traces:
  [468574] TestTicketRouterV3NoMock_POLYGON::test_GetNativePriceForTickets()
    ├─ [0] VM::startPrank(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D])
    │   └─ ← [Return] 
    ├─ [187829] TicketRouterV3::getNativePriceForTickets(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 1)
    │   ├─ [2406] 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C::baseCost() [staticcall]
    │   │   └─ ← [Return] 22000000000000000000000 [2.2e22]
    │   ├─ [99377] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::quoteExactOutput(0xc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619, 22000000000000000000000 [2.2e22])
    │   │   ├─ [70875] 0xd19A1C8278D0420BFb2c825D99DC31fF86224607::128acb08(000000000000000000000000b27308f9f90d607463bb33ea1bebb41c27ce5ab60000000000000000000000000000000000000000000000000000000000000001fffffffffffffffffffffffffffffffffffffffffffffb5760ab10fede40000000000000000000000000000000000000000000000000000000000001000276a400000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000000002bc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619000000000000000000000000000000000000000000)
    │   │   │   ├─ [32908] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::transfer(0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, 22000000000000000000000 [2.2e22])
    │   │   │   │   ├─ [30230] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::transfer(0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, 22000000000000000000000 [2.2e22]) [delegatecall]
    │   │   │   │   │   ├─ emit Transfer(from: 0xd19A1C8278D0420BFb2c825D99DC31fF86224607, to: 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, value: 22000000000000000000000 [2.2e22])
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   └─ ← [Return] true
    │   │   │   ├─ [2608] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::balanceOf(0xd19A1C8278D0420BFb2c825D99DC31fF86224607) [staticcall]
    │   │   │   │   └─ ← [Return] 36305562923214511337 [3.63e19]
    │   │   │   ├─ [2565] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::fa461e33(00000000000000000000000000000000000000000000000000030f225981fafefffffffffffffffffffffffffffffffffffffffffffffb5760ab10fede4000000000000000000000000000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000000000000000002bc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619000000000000000000000000000000000000000000)
    │   │   │   │   └─ ← [Revert] 0x00000000000000000000000000000000000000000000000000030f225981fafe
    │   │   │   └─ ← [Revert] 0x00000000000000000000000000000000000000000000000000030f225981fafe
    │   │   └─ ← [Return] 861065135127294 [8.61e14]
    │   ├─ [94372] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::quoteExactOutput(0x7ceb23fd6bc0add59e62ac25578270cff1b9f619000bb80d500b1d8e8ef31e21c99d1db9a6444d3adf1270, 861065135127294 [8.61e14])
    │   │   ├─ [67970] 0x167384319B41F7094e62f7506409Eb38079AbfF8::128acb08(000000000000000000000000b27308f9f90d607463bb33ea1bebb41c27ce5ab60000000000000000000000000000000000000000000000000000000000000001fffffffffffffffffffffffffffffffffffffffffffffffffffcf0dda67e050200000000000000000000000000000000000000000000000000000001000276a400000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000000002b7ceb23fd6bc0add59e62ac25578270cff1b9f619000bb80d500b1d8e8ef31e21c99d1db9a6444d3adf1270000000000000000000000000000000000000000000)
    │   │   │   ├─ [30338] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::transfer(0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, 861065135127294 [8.61e14])
    │   │   │   │   ├─ emit Transfer(from: 0x167384319B41F7094e62f7506409Eb38079AbfF8, to: 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, value: 861065135127294 [8.61e14])
    │   │   │   │   └─ ← [Return] true
    │   │   │   ├─ [2564] 0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270::balanceOf(0x167384319B41F7094e62f7506409Eb38079AbfF8) [staticcall]
    │   │   │   │   └─ ← [Return] 4875322014175209452751849 [4.875e24]
    │   │   │   ├─ [2565] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::fa461e33(0000000000000000000000000000000000000000000000006975b401c13bc606fffffffffffffffffffffffffffffffffffffffffffffffffffcf0dda67e05020000000000000000000000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000000000000000002b7ceb23fd6bc0add59e62ac25578270cff1b9f619000bb80d500b1d8e8ef31e21c99d1db9a6444d3adf1270000000000000000000000000000000000000000000)
    │   │   │   │   └─ ← [Revert] 0x0000000000000000000000000000000000000000000000006975b401c13bc606
    │   │   │   └─ ← [Revert] 0x0000000000000000000000000000000000000000000000006975b401c13bc606
    │   │   └─ ← [Return] 7599177865887467014 [7.599e18]
    │   └─ ← [Return] 7599177865887467014 [7.599e18]
    ├─ emit log_named_uint(key: "Native price for 1 ticket (in wei)", val: 7599177865887467014 [7.599e18])
    ├─ emit log_named_uint(key: "Ticket cost in VERSE", val: 22000000000000000000000 [2.2e22])
    ├─ [187829] TicketRouterV3::getNativePriceForTickets(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 2)
    │   ├─ [2406] 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C::baseCost() [staticcall]
    │   │   └─ ← [Return] 22000000000000000000000 [2.2e22]
    │   ├─ [99377] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::quoteExactOutput(0xc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619, 44000000000000000000000 [4.4e22])
    │   │   ├─ [70875] 0xd19A1C8278D0420BFb2c825D99DC31fF86224607::128acb08(000000000000000000000000b27308f9f90d607463bb33ea1bebb41c27ce5ab60000000000000000000000000000000000000000000000000000000000000001fffffffffffffffffffffffffffffffffffffffffffff6aec15621fdbc80000000000000000000000000000000000000000000000000000000000001000276a400000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000000002bc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619000000000000000000000000000000000000000000)
    │   │   │   ├─ [32908] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::transfer(0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, 44000000000000000000000 [4.4e22])
    │   │   │   │   ├─ [30230] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::transfer(0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, 44000000000000000000000 [4.4e22]) [delegatecall]
    │   │   │   │   │   ├─ emit Transfer(from: 0xd19A1C8278D0420BFb2c825D99DC31fF86224607, to: 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, value: 44000000000000000000000 [4.4e22])
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   └─ ← [Return] true
    │   │   │   ├─ [2608] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::balanceOf(0xd19A1C8278D0420BFb2c825D99DC31fF86224607) [staticcall]
    │   │   │   │   └─ ← [Return] 36305562923214511337 [3.63e19]
    │   │   │   ├─ [2565] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::fa461e33(00000000000000000000000000000000000000000000000000061e45fcb02d5afffffffffffffffffffffffffffffffffffffffffffff6aec15621fdbc8000000000000000000000000000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000000000000000002bc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619000000000000000000000000000000000000000000)
    │   │   │   │   └─ ← [Revert] 0x00000000000000000000000000000000000000000000000000061e45fcb02d5a
    │   │   │   └─ ← [Revert] 0x00000000000000000000000000000000000000000000000000061e45fcb02d5a
    │   │   └─ ← [Return] 1722135801245018 [1.722e15]
    │   ├─ [94372] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::quoteExactOutput(0x7ceb23fd6bc0add59e62ac25578270cff1b9f619000bb80d500b1d8e8ef31e21c99d1db9a6444d3adf1270, 1722135801245018 [1.722e15])
    │   │   ├─ [67970] 0x167384319B41F7094e62f7506409Eb38079AbfF8::128acb08(000000000000000000000000b27308f9f90d607463bb33ea1bebb41c27ce5ab60000000000000000000000000000000000000000000000000000000000000001fffffffffffffffffffffffffffffffffffffffffffffffffff9e1ba034fd2a600000000000000000000000000000000000000000000000000000001000276a400000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000000002b7ceb23fd6bc0add59e62ac25578270cff1b9f619000bb80d500b1d8e8ef31e21c99d1db9a6444d3adf1270000000000000000000000000000000000000000000)
    │   │   │   ├─ [30338] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::transfer(0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, 1722135801245018 [1.722e15])
    │   │   │   │   ├─ emit Transfer(from: 0x167384319B41F7094e62f7506409Eb38079AbfF8, to: 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, value: 1722135801245018 [1.722e15])
    │   │   │   │   └─ ← [Return] true
    │   │   │   ├─ [2564] 0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270::balanceOf(0x167384319B41F7094e62f7506409Eb38079AbfF8) [staticcall]
    │   │   │   │   └─ ← [Return] 4875322014175209452751849 [4.875e24]
    │   │   │   ├─ [2565] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::fa461e33(000000000000000000000000000000000000000000000000d2eb9f2b93de8250fffffffffffffffffffffffffffffffffffffffffffffffffff9e1ba034fd2a60000000000000000000000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000000000000000002b7ceb23fd6bc0add59e62ac25578270cff1b9f619000bb80d500b1d8e8ef31e21c99d1db9a6444d3adf1270000000000000000000000000000000000000000000)
    │   │   │   │   └─ ← [Revert] 0x000000000000000000000000000000000000000000000000d2eb9f2b93de8250
    │   │   │   └─ ← [Revert] 0x000000000000000000000000000000000000000000000000d2eb9f2b93de8250
    │   │   └─ ← [Return] 15198416377005113936 [1.519e19]
    │   └─ ← [Return] 15198416377005113936 [1.519e19]
    ├─ emit log_named_uint(key: "Native price for 2 tickets (in wei)", val: 15198416377005113936 [1.519e19])
    ├─ [187829] TicketRouterV3::getNativePriceForTickets(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 1)
    │   ├─ [2406] 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C::baseCost() [staticcall]
    │   │   └─ ← [Return] 22000000000000000000000 [2.2e22]
    │   ├─ [99377] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::quoteExactOutput(0xc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619, 22000000000000000000000 [2.2e22])
    │   │   ├─ [70875] 0xd19A1C8278D0420BFb2c825D99DC31fF86224607::128acb08(000000000000000000000000b27308f9f90d607463bb33ea1bebb41c27ce5ab60000000000000000000000000000000000000000000000000000000000000001fffffffffffffffffffffffffffffffffffffffffffffb5760ab10fede40000000000000000000000000000000000000000000000000000000000001000276a400000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000000002bc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619000000000000000000000000000000000000000000)
    │   │   │   ├─ [32908] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::transfer(0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, 22000000000000000000000 [2.2e22])
    │   │   │   │   ├─ [30230] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::transfer(0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, 22000000000000000000000 [2.2e22]) [delegatecall]
    │   │   │   │   │   ├─ emit Transfer(from: 0xd19A1C8278D0420BFb2c825D99DC31fF86224607, to: 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, value: 22000000000000000000000 [2.2e22])
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   └─ ← [Return] true
    │   │   │   ├─ [2608] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::balanceOf(0xd19A1C8278D0420BFb2c825D99DC31fF86224607) [staticcall]
    │   │   │   │   └─ ← [Return] 36305562923214511337 [3.63e19]
    │   │   │   ├─ [2565] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::fa461e33(00000000000000000000000000000000000000000000000000030f225981fafefffffffffffffffffffffffffffffffffffffffffffffb5760ab10fede4000000000000000000000000000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000000000000000002bc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619000000000000000000000000000000000000000000)
    │   │   │   │   └─ ← [Revert] 0x00000000000000000000000000000000000000000000000000030f225981fafe
    │   │   │   └─ ← [Revert] 0x00000000000000000000000000000000000000000000000000030f225981fafe
    │   │   └─ ← [Return] 861065135127294 [8.61e14]
    │   ├─ [94372] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::quoteExactOutput(0x7ceb23fd6bc0add59e62ac25578270cff1b9f619000bb80d500b1d8e8ef31e21c99d1db9a6444d3adf1270, 861065135127294 [8.61e14])
    │   │   ├─ [67970] 0x167384319B41F7094e62f7506409Eb38079AbfF8::128acb08(000000000000000000000000b27308f9f90d607463bb33ea1bebb41c27ce5ab60000000000000000000000000000000000000000000000000000000000000001fffffffffffffffffffffffffffffffffffffffffffffffffffcf0dda67e050200000000000000000000000000000000000000000000000000000001000276a400000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000000002b7ceb23fd6bc0add59e62ac25578270cff1b9f619000bb80d500b1d8e8ef31e21c99d1db9a6444d3adf1270000000000000000000000000000000000000000000)
    │   │   │   ├─ [30338] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::transfer(0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, 861065135127294 [8.61e14])
    │   │   │   │   ├─ emit Transfer(from: 0x167384319B41F7094e62f7506409Eb38079AbfF8, to: 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, value: 861065135127294 [8.61e14])
    │   │   │   │   └─ ← [Return] true
    │   │   │   ├─ [2564] 0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270::balanceOf(0x167384319B41F7094e62f7506409Eb38079AbfF8) [staticcall]
    │   │   │   │   └─ ← [Return] 4875322014175209452751849 [4.875e24]
    │   │   │   ├─ [2565] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::fa461e33(0000000000000000000000000000000000000000000000006975b401c13bc606fffffffffffffffffffffffffffffffffffffffffffffffffffcf0dda67e05020000000000000000000000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000000000000000002b7ceb23fd6bc0add59e62ac25578270cff1b9f619000bb80d500b1d8e8ef31e21c99d1db9a6444d3adf1270000000000000000000000000000000000000000000)
    │   │   │   │   └─ ← [Revert] 0x0000000000000000000000000000000000000000000000006975b401c13bc606
    │   │   │   └─ ← [Revert] 0x0000000000000000000000000000000000000000000000006975b401c13bc606
    │   │   └─ ← [Return] 7599177865887467014 [7.599e18]
    │   └─ ← [Return] 7599177865887467014 [7.599e18]
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    └─ ← [Stop] 

[PASS] test_GetPoolFee() (gas: 13835)
Logs:
  Ticket cost in VERSE: 22000000000000000000000
  VERSE allocated to user: 2200000000000000000000000
  ETH allocated to user: 22000000000000000000000000000000000000000
  WETH allocated to user: 22000000000000000000000000000000000000000
  Current scratcher VERSE balance: 6077066280935834200000000
  Updated scratcher VERSE balance: 2200000000000000000000000

Traces:
  [13835] TestTicketRouterV3NoMock_POLYGON::test_GetPoolFee()
    ├─ [247] TicketRouterV3::DEFAULT_POOL_FEE() [staticcall]
    │   └─ ← [Return] 3000
    ├─ [291] TicketRouterV3::VERSE_WETH_POOL_FEE() [staticcall]
    │   └─ ← [Return] 3000
    ├─ [0] VM::addr(<pk>) [staticcall]
    │   └─ ← [Return] randomToken: [0xba04F27E439B2634363b236460aF22Fd2Fa5ee05]
    ├─ [0] VM::label(randomToken: [0xba04F27E439B2634363b236460aF22Fd2Fa5ee05], "randomToken")
    │   └─ ← [Return] 
    ├─ [2651] TicketRouterV3::getPoolFee(randomToken: [0xba04F27E439B2634363b236460aF22Fd2Fa5ee05]) [staticcall]
    │   └─ ← [Return] 3000
    └─ ← [Stop] 

[PASS] test_GetTokenPriceForTickets() (gas: 313402)
Logs:
  Ticket cost in VERSE: 22000000000000000000000
  VERSE allocated to user: 2200000000000000000000000
  ETH allocated to user: 22000000000000000000000000000000000000000
  WETH allocated to user: 22000000000000000000000000000000000000000
  Current scratcher VERSE balance: 6077066280935834200000000
  Updated scratcher VERSE balance: 2200000000000000000000000
  WETH price for 1 ticket (in wei): 861065135127294
  Native (WMATIC) price for 1 ticket: 7599177865887467014

Traces:
  [313402] TestTicketRouterV3NoMock_POLYGON::test_GetTokenPriceForTickets()
    ├─ [0] VM::startPrank(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D])
    │   └─ ← [Return] 
    ├─ [27905] TicketRouterV3::getTokenPriceForTickets(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 1, 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc)
    │   ├─ [2406] 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C::baseCost() [staticcall]
    │   │   └─ ← [Return] 22000000000000000000000 [2.2e22]
    │   └─ ← [Return] 22000000000000000000000 [2.2e22]
    ├─ [27905] TicketRouterV3::getTokenPriceForTickets(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 3, 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc)
    │   ├─ [2406] 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C::baseCost() [staticcall]
    │   │   └─ ← [Return] 22000000000000000000000 [2.2e22]
    │   └─ ← [Return] 66000000000000000000000 [6.6e22]
    ├─ [110787] TicketRouterV3::getTokenPriceForTickets(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 1, 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619)
    │   ├─ [2406] 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C::baseCost() [staticcall]
    │   │   └─ ← [Return] 22000000000000000000000 [2.2e22]
    │   ├─ [99377] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::quoteExactOutput(0xc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619, 22000000000000000000000 [2.2e22])
    │   │   ├─ [70875] 0xd19A1C8278D0420BFb2c825D99DC31fF86224607::128acb08(000000000000000000000000b27308f9f90d607463bb33ea1bebb41c27ce5ab60000000000000000000000000000000000000000000000000000000000000001fffffffffffffffffffffffffffffffffffffffffffffb5760ab10fede40000000000000000000000000000000000000000000000000000000000001000276a400000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000000002bc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619000000000000000000000000000000000000000000)
    │   │   │   ├─ [32908] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::transfer(0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, 22000000000000000000000 [2.2e22])
    │   │   │   │   ├─ [30230] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::transfer(0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, 22000000000000000000000 [2.2e22]) [delegatecall]
    │   │   │   │   │   ├─ emit Transfer(from: 0xd19A1C8278D0420BFb2c825D99DC31fF86224607, to: 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, value: 22000000000000000000000 [2.2e22])
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   └─ ← [Return] true
    │   │   │   ├─ [2608] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::balanceOf(0xd19A1C8278D0420BFb2c825D99DC31fF86224607) [staticcall]
    │   │   │   │   └─ ← [Return] 36305562923214511337 [3.63e19]
    │   │   │   ├─ [2565] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::fa461e33(00000000000000000000000000000000000000000000000000030f225981fafefffffffffffffffffffffffffffffffffffffffffffffb5760ab10fede4000000000000000000000000000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000000000000000002bc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619000000000000000000000000000000000000000000)
    │   │   │   │   └─ ← [Revert] 0x00000000000000000000000000000000000000000000000000030f225981fafe
    │   │   │   └─ ← [Revert] 0x00000000000000000000000000000000000000000000000000030f225981fafe
    │   │   └─ ← [Return] 861065135127294 [8.61e14]
    │   └─ ← [Return] 861065135127294 [8.61e14]
    ├─ emit log_named_uint(key: "WETH price for 1 ticket (in wei)", val: 861065135127294 [8.61e14])
    ├─ [187829] TicketRouterV3::getNativePriceForTickets(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 1)
    │   ├─ [2406] 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C::baseCost() [staticcall]
    │   │   └─ ← [Return] 22000000000000000000000 [2.2e22]
    │   ├─ [99377] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::quoteExactOutput(0xc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619, 22000000000000000000000 [2.2e22])
    │   │   ├─ [70875] 0xd19A1C8278D0420BFb2c825D99DC31fF86224607::128acb08(000000000000000000000000b27308f9f90d607463bb33ea1bebb41c27ce5ab60000000000000000000000000000000000000000000000000000000000000001fffffffffffffffffffffffffffffffffffffffffffffb5760ab10fede40000000000000000000000000000000000000000000000000000000000001000276a400000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000000002bc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619000000000000000000000000000000000000000000)
    │   │   │   ├─ [32908] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::transfer(0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, 22000000000000000000000 [2.2e22])
    │   │   │   │   ├─ [30230] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::transfer(0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, 22000000000000000000000 [2.2e22]) [delegatecall]
    │   │   │   │   │   ├─ emit Transfer(from: 0xd19A1C8278D0420BFb2c825D99DC31fF86224607, to: 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, value: 22000000000000000000000 [2.2e22])
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   └─ ← [Return] true
    │   │   │   ├─ [2608] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::balanceOf(0xd19A1C8278D0420BFb2c825D99DC31fF86224607) [staticcall]
    │   │   │   │   └─ ← [Return] 36305562923214511337 [3.63e19]
    │   │   │   ├─ [2565] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::fa461e33(00000000000000000000000000000000000000000000000000030f225981fafefffffffffffffffffffffffffffffffffffffffffffffb5760ab10fede4000000000000000000000000000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000000000000000002bc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619000000000000000000000000000000000000000000)
    │   │   │   │   └─ ← [Revert] 0x00000000000000000000000000000000000000000000000000030f225981fafe
    │   │   │   └─ ← [Revert] 0x00000000000000000000000000000000000000000000000000030f225981fafe
    │   │   └─ ← [Return] 861065135127294 [8.61e14]
    │   ├─ [94372] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::quoteExactOutput(0x7ceb23fd6bc0add59e62ac25578270cff1b9f619000bb80d500b1d8e8ef31e21c99d1db9a6444d3adf1270, 861065135127294 [8.61e14])
    │   │   ├─ [67970] 0x167384319B41F7094e62f7506409Eb38079AbfF8::128acb08(000000000000000000000000b27308f9f90d607463bb33ea1bebb41c27ce5ab60000000000000000000000000000000000000000000000000000000000000001fffffffffffffffffffffffffffffffffffffffffffffffffffcf0dda67e050200000000000000000000000000000000000000000000000000000001000276a400000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000000002b7ceb23fd6bc0add59e62ac25578270cff1b9f619000bb80d500b1d8e8ef31e21c99d1db9a6444d3adf1270000000000000000000000000000000000000000000)
    │   │   │   ├─ [30338] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::transfer(0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, 861065135127294 [8.61e14])
    │   │   │   │   ├─ emit Transfer(from: 0x167384319B41F7094e62f7506409Eb38079AbfF8, to: 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, value: 861065135127294 [8.61e14])
    │   │   │   │   └─ ← [Return] true
    │   │   │   ├─ [2564] 0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270::balanceOf(0x167384319B41F7094e62f7506409Eb38079AbfF8) [staticcall]
    │   │   │   │   └─ ← [Return] 4875322014175209452751849 [4.875e24]
    │   │   │   ├─ [2565] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::fa461e33(0000000000000000000000000000000000000000000000006975b401c13bc606fffffffffffffffffffffffffffffffffffffffffffffffffffcf0dda67e05020000000000000000000000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000000000000000002b7ceb23fd6bc0add59e62ac25578270cff1b9f619000bb80d500b1d8e8ef31e21c99d1db9a6444d3adf1270000000000000000000000000000000000000000000)
    │   │   │   │   └─ ← [Revert] 0x0000000000000000000000000000000000000000000000006975b401c13bc606
    │   │   │   └─ ← [Revert] 0x0000000000000000000000000000000000000000000000006975b401c13bc606
    │   │   └─ ← [Return] 7599177865887467014 [7.599e18]
    │   └─ ← [Return] 7599177865887467014 [7.599e18]
    ├─ emit log_named_uint(key: "Native (WMATIC) price for 1 ticket", val: 7599177865887467014 [7.599e18])
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    └─ ← [Stop] 

[PASS] test_MultiHopSwapPathEncoding() (gas: 62530)
Logs:
  Ticket cost in VERSE: 22000000000000000000000
  VERSE allocated to user: 2200000000000000000000000
  ETH allocated to user: 22000000000000000000000000000000000000000
  WETH allocated to user: 22000000000000000000000000000000000000000
  Current scratcher VERSE balance: 6077066280935834200000000
  Updated scratcher VERSE balance: 2200000000000000000000000

Traces:
  [62530] TestTicketRouterV3NoMock_POLYGON::test_MultiHopSwapPathEncoding()
    ├─ [0] VM::addr(<pk>) [staticcall]
    │   └─ ← [Return] testToken: [0x906A4248E79a47Fb0472e43e2E5dbf2799C3d3DE]
    ├─ [0] VM::label(testToken: [0x906A4248E79a47Fb0472e43e2E5dbf2799C3d3DE], "testToken")
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(deployer: [0xaE0bDc4eEAC5E950B67C6819B118761CaAF61946])
    │   └─ ← [Return] 
    ├─ [47787] TicketRouterV3::setCustomPoolFee(testToken: [0x906A4248E79a47Fb0472e43e2E5dbf2799C3d3DE], 500)
    │   ├─ emit FeeUpdated(token: testToken: [0x906A4248E79a47Fb0472e43e2E5dbf2799C3d3DE], fee: 500)
    │   └─ ← [Stop] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [1396] TicketRouterV3::testEncodePath(testToken: [0x906A4248E79a47Fb0472e43e2E5dbf2799C3d3DE], 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619, 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc, 500, 3000) [staticcall]
    │   └─ ← [Return] 0xc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f6190001f4906a4248e79a47fb0472e43e2e5dbf2799c3d3de
    └─ ← [Stop] 

[PASS] test_PathFinding() (gas: 317562)
Logs:
  Ticket cost in VERSE: 22000000000000000000000
  VERSE allocated to user: 2200000000000000000000000
  ETH allocated to user: 22000000000000000000000000000000000000000
  WETH allocated to user: 22000000000000000000000000000000000000000
  Current scratcher VERSE balance: 6077066280935834200000000
  Updated scratcher VERSE balance: 2200000000000000000000000
  Current fork block: 70417301
  Ticket cost (VERSE): 22000000000000000000000
  WMATIC address: 0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270
  WETH address: 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619
  VERSE address: 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc
  UniswapV3 Quoter: 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6
  Testing correctly ordered path for ExactOutput
  SUCCESS: WMATIC needed for 1 VERSE: 345415797502524
  SUCCESS: getNativePriceForTickets returned: 7599177865887467014
  The contract is now working correctly!

Traces:
  [317730] TestTicketRouterV3NoMock_POLYGON::test_PathFinding()
    ├─ emit log_named_uint(key: "Current fork block", val: 70417301 [7.041e7])
    ├─ [2406] 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C::baseCost() [staticcall]
    │   └─ ← [Return] 22000000000000000000000 [2.2e22]
    ├─ emit log_named_uint(key: "Ticket cost (VERSE)", val: 22000000000000000000000 [2.2e22])
    ├─ emit log_named_address(key: "WMATIC address", val: 0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270)
    ├─ emit log_named_address(key: "WETH address", val: 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619)
    ├─ emit log_named_address(key: "VERSE address", val: 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc)
    ├─ emit log_named_address(key: "UniswapV3 Quoter", val: 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6)
    ├─ emit log_string(val: "Testing correctly ordered path for ExactOutput")
    ├─ [176137] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::quoteExactOutput(0xc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619000bb80d500b1d8e8ef31e21c99d1db9a6444d3adf1270, 1000000000000000000 [1e18])
    │   ├─ [70573] 0xd19A1C8278D0420BFb2c825D99DC31fF86224607::128acb08(000000000000000000000000b27308f9f90d607463bb33ea1bebb41c27ce5ab60000000000000000000000000000000000000000000000000000000000000001fffffffffffffffffffffffffffffffffffffffffffffffff21f494c589c000000000000000000000000000000000000000000000000000000000001000276a400000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000000002bc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619000000000000000000000000000000000000000000)
    │   │   ├─ [32908] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::transfer(0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, 1000000000000000000 [1e18])
    │   │   │   ├─ [30230] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::transfer(0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, 1000000000000000000 [1e18]) [delegatecall]
    │   │   │   │   ├─ emit Transfer(from: 0xd19A1C8278D0420BFb2c825D99DC31fF86224607, to: 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, value: 1000000000000000000 [1e18])
    │   │   │   │   └─ ← [Return] true
    │   │   │   └─ ← [Return] true
    │   │   ├─ [2608] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::balanceOf(0xd19A1C8278D0420BFb2c825D99DC31fF86224607) [staticcall]
    │   │   │   └─ ← [Return] 36305562923214511337 [3.63e19]
    │   │   ├─ [2565] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::fa461e33(000000000000000000000000000000000000000000000000000000091ce0c6a3fffffffffffffffffffffffffffffffffffffffffffffffff21f494c589c00000000000000000000000000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000000000000000002bc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619000000000000000000000000000000000000000000)
    │   │   │   └─ ← [Revert] 0x000000000000000000000000000000000000000000000000000000091ce0c6a3
    │   │   └─ ← [Revert] 0x000000000000000000000000000000000000000000000000000000091ce0c6a3
    │   ├─ [67970] 0x167384319B41F7094e62f7506409Eb38079AbfF8::128acb08(000000000000000000000000b27308f9f90d607463bb33ea1bebb41c27ce5ab60000000000000000000000000000000000000000000000000000000000000001fffffffffffffffffffffffffffffffffffffffffffffffffffffff6e31f395d00000000000000000000000000000000000000000000000000000001000276a400000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000000002b7ceb23fd6bc0add59e62ac25578270cff1b9f619000bb80d500b1d8e8ef31e21c99d1db9a6444d3adf1270000000000000000000000000000000000000000000)
    │   │   ├─ [30338] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::transfer(0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, 39139198627 [3.913e10])
    │   │   │   ├─ emit Transfer(from: 0x167384319B41F7094e62f7506409Eb38079AbfF8, to: 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, value: 39139198627 [3.913e10])
    │   │   │   └─ ← [Return] true
    │   │   ├─ [2564] 0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270::balanceOf(0x167384319B41F7094e62f7506409Eb38079AbfF8) [staticcall]
    │   │   │   └─ ← [Return] 4875322014175209452751849 [4.875e24]
    │   │   ├─ [2565] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::fa461e33(00000000000000000000000000000000000000000000000000013a2761e8f23cfffffffffffffffffffffffffffffffffffffffffffffffffffffff6e31f395d0000000000000000000000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000000000000000002b7ceb23fd6bc0add59e62ac25578270cff1b9f619000bb80d500b1d8e8ef31e21c99d1db9a6444d3adf1270000000000000000000000000000000000000000000)
    │   │   │   └─ ← [Revert] 0x00000000000000000000000000000000000000000000000000013a2761e8f23c
    │   │   └─ ← [Revert] 0x00000000000000000000000000000000000000000000000000013a2761e8f23c
    │   └─ ← [Return] 345415797502524 [3.454e14]
    ├─ emit log_named_uint(key: "SUCCESS: WMATIC needed for 1 VERSE", val: 345415797502524 [3.454e14])
    ├─ [187829] TicketRouterV3::getNativePriceForTickets(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 1)
    │   ├─ [2406] 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C::baseCost() [staticcall]
    │   │   └─ ← [Return] 22000000000000000000000 [2.2e22]
    │   ├─ [99377] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::quoteExactOutput(0xc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619, 22000000000000000000000 [2.2e22])
    │   │   ├─ [70875] 0xd19A1C8278D0420BFb2c825D99DC31fF86224607::128acb08(000000000000000000000000b27308f9f90d607463bb33ea1bebb41c27ce5ab60000000000000000000000000000000000000000000000000000000000000001fffffffffffffffffffffffffffffffffffffffffffffb5760ab10fede40000000000000000000000000000000000000000000000000000000000001000276a400000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000000002bc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619000000000000000000000000000000000000000000)
    │   │   │   ├─ [32908] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::transfer(0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, 22000000000000000000000 [2.2e22])
    │   │   │   │   ├─ [30230] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::transfer(0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, 22000000000000000000000 [2.2e22]) [delegatecall]
    │   │   │   │   │   ├─ emit Transfer(from: 0xd19A1C8278D0420BFb2c825D99DC31fF86224607, to: 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, value: 22000000000000000000000 [2.2e22])
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   └─ ← [Return] true
    │   │   │   ├─ [2608] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::balanceOf(0xd19A1C8278D0420BFb2c825D99DC31fF86224607) [staticcall]
    │   │   │   │   └─ ← [Return] 36305562923214511337 [3.63e19]
    │   │   │   ├─ [2565] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::fa461e33(00000000000000000000000000000000000000000000000000030f225981fafefffffffffffffffffffffffffffffffffffffffffffffb5760ab10fede4000000000000000000000000000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000000000000000002bc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619000000000000000000000000000000000000000000)
    │   │   │   │   └─ ← [Revert] 0x00000000000000000000000000000000000000000000000000030f225981fafe
    │   │   │   └─ ← [Revert] 0x00000000000000000000000000000000000000000000000000030f225981fafe
    │   │   └─ ← [Return] 861065135127294 [8.61e14]
    │   ├─ [94372] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::quoteExactOutput(0x7ceb23fd6bc0add59e62ac25578270cff1b9f619000bb80d500b1d8e8ef31e21c99d1db9a6444d3adf1270, 861065135127294 [8.61e14])
    │   │   ├─ [67970] 0x167384319B41F7094e62f7506409Eb38079AbfF8::128acb08(000000000000000000000000b27308f9f90d607463bb33ea1bebb41c27ce5ab60000000000000000000000000000000000000000000000000000000000000001fffffffffffffffffffffffffffffffffffffffffffffffffffcf0dda67e050200000000000000000000000000000000000000000000000000000001000276a400000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000000002b7ceb23fd6bc0add59e62ac25578270cff1b9f619000bb80d500b1d8e8ef31e21c99d1db9a6444d3adf1270000000000000000000000000000000000000000000)
    │   │   │   ├─ [30338] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::transfer(0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, 861065135127294 [8.61e14])
    │   │   │   │   ├─ emit Transfer(from: 0x167384319B41F7094e62f7506409Eb38079AbfF8, to: 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, value: 861065135127294 [8.61e14])
    │   │   │   │   └─ ← [Return] true
    │   │   │   ├─ [2564] 0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270::balanceOf(0x167384319B41F7094e62f7506409Eb38079AbfF8) [staticcall]
    │   │   │   │   └─ ← [Return] 4875322014175209452751849 [4.875e24]
    │   │   │   ├─ [2565] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::fa461e33(0000000000000000000000000000000000000000000000006975b401c13bc606fffffffffffffffffffffffffffffffffffffffffffffffffffcf0dda67e05020000000000000000000000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000000000000000002b7ceb23fd6bc0add59e62ac25578270cff1b9f619000bb80d500b1d8e8ef31e21c99d1db9a6444d3adf1270000000000000000000000000000000000000000000)
    │   │   │   │   └─ ← [Revert] 0x0000000000000000000000000000000000000000000000006975b401c13bc606
    │   │   │   └─ ← [Revert] 0x0000000000000000000000000000000000000000000000006975b401c13bc606
    │   │   └─ ← [Return] 7599177865887467014 [7.599e18]
    │   └─ ← [Return] 7599177865887467014 [7.599e18]
    ├─ emit log_named_uint(key: "SUCCESS: getNativePriceForTickets returned", val: 7599177865887467014 [7.599e18])
    ├─ emit log_string(val: "The contract is now working correctly!")
    └─ ← [Stop] 

[PASS] test_PolygonVERSETokenAddress() (gas: 488)
Logs:
  Ticket cost in VERSE: 22000000000000000000000
  VERSE allocated to user: 2200000000000000000000000
  ETH allocated to user: 22000000000000000000000000000000000000000
  WETH allocated to user: 22000000000000000000000000000000000000000
  Current scratcher VERSE balance: 6077066280935834200000000
  Updated scratcher VERSE balance: 2200000000000000000000000

Traces:
  [488] TestTicketRouterV3NoMock_POLYGON::test_PolygonVERSETokenAddress()
    └─ ← [Stop] 

[PASS] test_RouterConstruction() (gas: 8428)
Logs:
  Ticket cost in VERSE: 22000000000000000000000
  VERSE allocated to user: 2200000000000000000000000
  ETH allocated to user: 22000000000000000000000000000000000000000
  WETH allocated to user: 22000000000000000000000000000000000000000
  Current scratcher VERSE balance: 6077066280935834200000000
  Updated scratcher VERSE balance: 2200000000000000000000000

Traces:
  [8428] TestTicketRouterV3NoMock_POLYGON::test_RouterConstruction()
    ├─ [292] TicketRouterV3::WETH() [staticcall]
    │   └─ ← [Return] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619
    ├─ [293] TicketRouterV3::VERSE_TOKEN() [staticcall]
    │   └─ ← [Return] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc
    ├─ [270] TicketRouterV3::SWAP_ROUTER() [staticcall]
    │   └─ ← [Return] 0xE592427A0AEce92De3Edee1F18E0157C05861564
    ├─ [248] TicketRouterV3::QUOTER() [staticcall]
    │   └─ ← [Return] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6
    └─ ← [Stop] 

[PASS] test_RouterOwnership() (gas: 86774)
Logs:
  Ticket cost in VERSE: 22000000000000000000000
  VERSE allocated to user: 2200000000000000000000000
  ETH allocated to user: 22000000000000000000000000000000000000000
  WETH allocated to user: 22000000000000000000000000000000000000000
  Current scratcher VERSE balance: 6077066280935834200000000
  Updated scratcher VERSE balance: 2200000000000000000000000

Traces:
  [86774] TestTicketRouterV3NoMock_POLYGON::test_RouterOwnership()
    ├─ [0] VM::startPrank(deployer: [0xaE0bDc4eEAC5E950B67C6819B118761CaAF61946])
    │   └─ ← [Return] 
    ├─ [47787] TicketRouterV3::setCustomPoolFee(0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619, 500)
    │   ├─ emit FeeUpdated(token: 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619, fee: 500)
    │   └─ ← [Stop] 
    ├─ [641] TicketRouterV3::getPoolFee(0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619) [staticcall]
    │   └─ ← [Return] 500
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::addr(<pk>) [staticcall]
    │   └─ ← [Return] nonOwner: [0xcBf285639F952Bb8fb557D0532E38219CA5133C3]
    ├─ [0] VM::label(nonOwner: [0xcBf285639F952Bb8fb557D0532E38219CA5133C3], "nonOwner")
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(nonOwner: [0xcBf285639F952Bb8fb557D0532E38219CA5133C3])
    │   └─ ← [Return] 
    ├─ [0] VM::expectRevert(Not the contract owner)
    │   └─ ← [Return] 
    ├─ [24213] TicketRouterV3::setCustomPoolFee(0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619, 100)
    │   └─ ← [Revert] revert: Not the contract owner
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    └─ ← [Stop] 

[PASS] test_RouterReceivePayment() (gas: 33432)
Logs:
  Ticket cost in VERSE: 22000000000000000000000
  VERSE allocated to user: 2200000000000000000000000
  ETH allocated to user: 22000000000000000000000000000000000000000
  WETH allocated to user: 22000000000000000000000000000000000000000
  Current scratcher VERSE balance: 6077066280935834200000000
  Updated scratcher VERSE balance: 2200000000000000000000000

Traces:
  [33432] TestTicketRouterV3NoMock_POLYGON::test_RouterReceivePayment()
    ├─ [21055] TicketRouterV3::receive{value: 1000000000000000000}()
    │   └─ ← [Stop] 
    └─ ← [Stop] 

[PASS] test_ScatcherInterface() (gas: 16998)
Logs:
  Ticket cost in VERSE: 22000000000000000000000
  VERSE allocated to user: 2200000000000000000000000
  ETH allocated to user: 22000000000000000000000000000000000000000
  WETH allocated to user: 22000000000000000000000000000000000000000
  Current scratcher VERSE balance: 6077066280935834200000000
  Updated scratcher VERSE balance: 2200000000000000000000000
  Scratcher baseCost(): 22000000000000000000000

Traces:
  [16998] TestTicketRouterV3NoMock_POLYGON::test_ScatcherInterface()
    ├─ [0] VM::startPrank(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D])
    │   └─ ← [Return] 
    ├─ [2406] 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C::baseCost() [staticcall]
    │   └─ ← [Return] 22000000000000000000000 [2.2e22]
    ├─ emit log_named_uint(key: "Scratcher baseCost()", val: 22000000000000000000000 [2.2e22])
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    └─ ← [Stop] 

[PASS] test_SetCustomPoolFee() (gas: 90504)
Logs:
  Ticket cost in VERSE: 22000000000000000000000
  VERSE allocated to user: 2200000000000000000000000
  ETH allocated to user: 22000000000000000000000000000000000000000
  WETH allocated to user: 22000000000000000000000000000000000000000
  Current scratcher VERSE balance: 6077066280935834200000000
  Updated scratcher VERSE balance: 2200000000000000000000000

Traces:
  [90504] TestTicketRouterV3NoMock_POLYGON::test_SetCustomPoolFee()
    ├─ [0] VM::startPrank(deployer: [0xaE0bDc4eEAC5E950B67C6819B118761CaAF61946])
    │   └─ ← [Return] 
    ├─ [2651] TicketRouterV3::getPoolFee(0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619) [staticcall]
    │   └─ ← [Return] 3000
    ├─ [47787] TicketRouterV3::setCustomPoolFee(0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619, 500)
    │   ├─ emit FeeUpdated(token: 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619, fee: 500)
    │   └─ ← [Stop] 
    ├─ [641] TicketRouterV3::getPoolFee(0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619) [staticcall]
    │   └─ ← [Return] 500
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D])
    │   └─ ← [Return] 
    ├─ [0] VM::expectRevert(Not the contract owner)
    │   └─ ← [Return] 
    ├─ [24213] TicketRouterV3::setCustomPoolFee(0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619, 100)
    │   └─ ← [Revert] revert: Not the contract owner
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    └─ ← [Stop] 

[PASS] test_SwapRouterInterface() (gas: 6581)
Logs:
  Ticket cost in VERSE: 22000000000000000000000
  VERSE allocated to user: 2200000000000000000000000
  ETH allocated to user: 22000000000000000000000000000000000000000
  WETH allocated to user: 22000000000000000000000000000000000000000
  Current scratcher VERSE balance: 6077066280935834200000000
  Updated scratcher VERSE balance: 2200000000000000000000000

Traces:
  [6581] TestTicketRouterV3NoMock_POLYGON::test_SwapRouterInterface()
    ├─ [270] TicketRouterV3::SWAP_ROUTER() [staticcall]
    │   └─ ← [Return] 0xE592427A0AEce92De3Edee1F18E0157C05861564
    ├─ [248] TicketRouterV3::QUOTER() [staticcall]
    │   └─ ← [Return] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6
    └─ ← [Stop] 

[PASS] test_TestBuyTickets() (gas: 307025)
Logs:
  Ticket cost in VERSE: 22000000000000000000000
  VERSE allocated to user: 2200000000000000000000000
  ETH allocated to user: 22000000000000000000000000000000000000000
  WETH allocated to user: 22000000000000000000000000000000000000000
  Current scratcher VERSE balance: 6077066280935834200000000
  Updated scratcher VERSE balance: 2200000000000000000000000
  Testing buyTickets with VERSE
  SUCCESS: Purchased tickets with VERSE

Traces:
  [311238] TestTicketRouterV3NoMock_POLYGON::test_TestBuyTickets()
    ├─ [2406] 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C::baseCost() [staticcall]
    │   └─ ← [Return] 22000000000000000000000 [2.2e22]
    ├─ [5253] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::balanceOf(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D]) [staticcall]
    │   ├─ [2581] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::balanceOf(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D]) [delegatecall]
    │   │   └─ ← [Return] 2200000000000000000000000 [2.2e24]
    │   └─ ← [Return] 2200000000000000000000000 [2.2e24]
    ├─ [753] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::balanceOf(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D]) [staticcall]
    │   ├─ [581] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::balanceOf(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D]) [delegatecall]
    │   │   └─ ← [Return] 2200000000000000000000000 [2.2e24]
    │   └─ ← [Return] 2200000000000000000000000 [2.2e24]
    ├─ [0] VM::load(0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc, 0xb4260ebeada881f749f68942b3f0e36ae8ba2751d11fbbad46a58feb7b4cda51) [staticcall]
    │   └─ ← [Return] 0x00000000000000000000000000000000000000000001d1de3d2d5c712f000000
    ├─ [0] VM::store(0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc, 0xb4260ebeada881f749f68942b3f0e36ae8ba2751d11fbbad46a58feb7b4cda51, 0x000000000000000000000000000000000000000000002e963951560b51800000)
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D])
    │   └─ ← [Return] 
    ├─ [31888] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::approve(TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], 44000000000000000000000 [4.4e22])
    │   ├─ [7554] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::approve(TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], 44000000000000000000000 [4.4e22]) [delegatecall]
    │   │   ├─ emit Approval(owner: user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], spender: TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], value: 44000000000000000000000 [4.4e22])
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [31888] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::approve(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 44000000000000000000000 [4.4e22])
    │   ├─ [7554] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::approve(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 44000000000000000000000 [4.4e22]) [delegatecall]
    │   │   ├─ emit Approval(owner: user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], spender: 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, value: 44000000000000000000000 [4.4e22])
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ emit log_string(val: "Testing buyTickets with VERSE")
    ├─ [185872] TicketRouterV3::buyTickets(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 1)
    │   ├─ [2406] 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C::baseCost() [staticcall]
    │   │   └─ ← [Return] 22000000000000000000000 [2.2e22]
    │   ├─ [40445] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::transferFrom(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], 22000000000000000000000 [2.2e22])
    │   │   ├─ [37761] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::transferFrom(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], 22000000000000000000000 [2.2e22]) [delegatecall]
    │   │   │   ├─ emit Transfer(from: user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], to: TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], value: 22000000000000000000000 [2.2e22])
    │   │   │   ├─ emit Approval(owner: user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], spender: TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], value: 22000000000000000000000 [2.2e22])
    │   │   │   └─ ← [Return] true
    │   │   └─ ← [Return] true
    │   ├─ [24832] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::approve(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 22000000000000000000000 [2.2e22])
    │   │   ├─ [24654] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::approve(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 22000000000000000000000 [2.2e22]) [delegatecall]
    │   │   │   ├─ emit Approval(owner: TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], spender: 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, value: 22000000000000000000000 [2.2e22])
    │   │   │   └─ ← [Return] true
    │   │   └─ ← [Return] true
    │   ├─ [127232] 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C::bulkPurchase(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], 1)
    │   │   ├─ [11245] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::transferFrom(TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 22000000000000000000000 [2.2e22])
    │   │   │   ├─ [11061] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::transferFrom(TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 22000000000000000000000 [2.2e22]) [delegatecall]
    │   │   │   │   ├─ emit Transfer(from: TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], to: 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, value: 22000000000000000000000 [2.2e22])
    │   │   │   │   ├─ emit Approval(owner: TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b], spender: 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, value: 0)
    │   │   │   │   └─ ← [Return] true
    │   │   │   └─ ← [Return] true
    │   │   ├─ [37210] 0xAE975071Be8F8eE67addBC1A82488F1C24858067::requestRandomWords(0xcc294a196eeeb44da2888d17c0625cc88d70d9760a69d58d853ba6581a9ab0cd, 1274, 3, 2000000 [2e6], 2)
    │   │   │   ├─ emit RandomWordsRequested(keyHash: 0xcc294a196eeeb44da2888d17c0625cc88d70d9760a69d58d853ba6581a9ab0cd, requestId: 21066771076421976617879856991736386838457751365046595947016481348665269909939 [2.106e76], preSeed: 85481969558919373883791013522261647843276997907254150006486368987247823989658 [8.548e76], subId: 1274, minimumRequestConfirmations: 3, callbackGasLimit: 2000000 [2e6], numWords: 2, sender: 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C)
    │   │   │   └─ ← [Return] 21066771076421976617879856991736386838457751365046595947016481348665269909939 [2.106e76]
    │   │   ├─ emit DrawRequest(drawId: 1232, requestId: 21066771076421976617879856991736386838457751365046595947016481348665269909939 [2.106e76], requestAddress: TicketRouterV3: [0x8Ad159a275AEE56fb2334DBb69036E9c7baCEe9b])
    │   │   └─ ← [Stop] 
    │   ├─ emit TokenPurchase(buyer: user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D], token: 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc, amount: 22000000000000000000000 [2.2e22], receivedAmount: 22000000000000000000000 [2.2e22])
    │   └─ ← [Stop] 
    ├─ emit log_string(val: "SUCCESS: Purchased tickets with VERSE")
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    └─ ← [Stop] 

[PASS] test_TokenToVersePriceCalculation() (gas: 101252)
Logs:
  Ticket cost in VERSE: 22000000000000000000000
  VERSE allocated to user: 2200000000000000000000000
  ETH allocated to user: 22000000000000000000000000000000000000000
  WETH allocated to user: 22000000000000000000000000000000000000000
  Current scratcher VERSE balance: 6077066280935834200000000
  Updated scratcher VERSE balance: 2200000000000000000000000
  1 ticket VERSE price: 22000000000000000000000
  2 tickets VERSE price: 44000000000000000000000
  3 tickets VERSE price: 66000000000000000000000

Traces:
  [101252] TestTicketRouterV3NoMock_POLYGON::test_TokenToVersePriceCalculation()
    ├─ [0] VM::startPrank(user: [0x6CA6d1e2D5347Bfab1d91e883F1915560e09129D])
    │   └─ ← [Return] 
    ├─ [27905] TicketRouterV3::getTokenPriceForTickets(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 1, 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc)
    │   ├─ [2406] 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C::baseCost() [staticcall]
    │   │   └─ ← [Return] 22000000000000000000000 [2.2e22]
    │   └─ ← [Return] 22000000000000000000000 [2.2e22]
    ├─ [27905] TicketRouterV3::getTokenPriceForTickets(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 2, 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc)
    │   ├─ [2406] 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C::baseCost() [staticcall]
    │   │   └─ ← [Return] 22000000000000000000000 [2.2e22]
    │   └─ ← [Return] 44000000000000000000000 [4.4e22]
    ├─ [27905] TicketRouterV3::getTokenPriceForTickets(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 3, 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc)
    │   ├─ [2406] 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C::baseCost() [staticcall]
    │   │   └─ ← [Return] 22000000000000000000000 [2.2e22]
    │   └─ ← [Return] 66000000000000000000000 [6.6e22]
    ├─ emit log_named_uint(key: "1 ticket VERSE price", val: 22000000000000000000000 [2.2e22])
    ├─ emit log_named_uint(key: "2 tickets VERSE price", val: 44000000000000000000000 [4.4e22])
    ├─ emit log_named_uint(key: "3 tickets VERSE price", val: 66000000000000000000000 [6.6e22])
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    └─ ← [Stop] 

[PASS] test_UniswapV3AddressesOnPolygon() (gas: 784)
Logs:
  Ticket cost in VERSE: 22000000000000000000000
  VERSE allocated to user: 2200000000000000000000000
  ETH allocated to user: 22000000000000000000000000000000000000000
  WETH allocated to user: 22000000000000000000000000000000000000000
  Current scratcher VERSE balance: 6077066280935834200000000
  Updated scratcher VERSE balance: 2200000000000000000000000

Traces:
  [784] TestTicketRouterV3NoMock_POLYGON::test_UniswapV3AddressesOnPolygon()
    └─ ← [Stop] 

[PASS] test_WmaticVerseDirectPath() (gas: 101000)
Logs:
  Ticket cost in VERSE: 22000000000000000000000
  VERSE allocated to user: 2200000000000000000000000
  ETH allocated to user: 22000000000000000000000000000000000000000
  WETH allocated to user: 22000000000000000000000000000000000000000
  Current scratcher VERSE balance: 6077066280935834200000000
  Updated scratcher VERSE balance: 2200000000000000000000000
  Testing WMATIC -> VERSE direct path
  FOUND DIRECT PATH: WMATIC needed for 1 VERSE: 2962592995016896106898
  DIRECT PATH EXISTS! This is the simplest solution.

Traces:
  [101000] TestTicketRouterV3NoMock_POLYGON::test_WmaticVerseDirectPath()
    ├─ emit log_string(val: "Testing WMATIC -> VERSE direct path")
    ├─ [111409] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::quoteExactOutput(0x0d500b1d8e8ef31e21c99d1db9a6444d3adf1270000bb8c708d6f2153933daa50b2d0758955be0a93a8fec, 1000000000000000000 [1e18])
    │   ├─ [80484] 0xEc95C8C8f25C5f3EA842f05bB513bb020C4d1ce7::128acb08(000000000000000000000000b27308f9f90d607463bb33ea1bebb41c27ce5ab60000000000000000000000000000000000000000000000000000000000000000fffffffffffffffffffffffffffffffffffffffffffffffff21f494c589c0000000000000000000000000000fffd8963efd1fc6a506488495d951d5263988d2500000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000000002b0d500b1d8e8ef31e21c99d1db9a6444d3adf1270000bb8c708d6f2153933daa50b2d0758955be0a93a8fec000000000000000000000000000000000000000000)
    │   │   ├─ [29995] 0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270::transfer(0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, 1000000000000000000 [1e18])
    │   │   │   ├─ emit Transfer(from: 0xEc95C8C8f25C5f3EA842f05bB513bb020C4d1ce7, to: 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, value: 1000000000000000000 [1e18])
    │   │   │   └─ ← [Return] true
    │   │   ├─ [5253] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::balanceOf(0xEc95C8C8f25C5f3EA842f05bB513bb020C4d1ce7) [staticcall]
    │   │   │   ├─ [2581] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::balanceOf(0xEc95C8C8f25C5f3EA842f05bB513bb020C4d1ce7) [delegatecall]
    │   │   │   │   └─ ← [Return] 89731506348504863814233 [8.973e22]
    │   │   │   └─ ← [Return] 89731506348504863814233 [8.973e22]
    │   │   ├─ [2577] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::fa461e33(fffffffffffffffffffffffffffffffffffffffffffffffff21f494c589c00000000000000000000000000000000000000000000000000a09a3ca87a3ab351920000000000000000000000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000000000000000002b0d500b1d8e8ef31e21c99d1db9a6444d3adf1270000bb8c708d6f2153933daa50b2d0758955be0a93a8fec000000000000000000000000000000000000000000)
    │   │   │   └─ ← [Revert] 0x0000000000000000000000000000000000000000000000a09a3ca87a3ab35192
    │   │   └─ ← [Revert] 0x0000000000000000000000000000000000000000000000a09a3ca87a3ab35192
    │   └─ ← [Return] 2962592995016896106898 [2.962e21]
    ├─ emit log_named_uint(key: "FOUND DIRECT PATH: WMATIC needed for 1 VERSE", val: 2962592995016896106898 [2.962e21])
    ├─ emit log_string(val: "DIRECT PATH EXISTS! This is the simplest solution.")
    └─ ← [Stop] 

[PASS] test_WmaticWethPath() (gas: 261652)
Logs:
  Ticket cost in VERSE: 22000000000000000000000
  VERSE allocated to user: 2200000000000000000000000
  ETH allocated to user: 22000000000000000000000000000000000000000
  WETH allocated to user: 22000000000000000000000000000000000000000
  Current scratcher VERSE balance: 6077066280935834200000000
  Updated scratcher VERSE balance: 2200000000000000000000000
  Testing WMATIC -> WETH with fee 500
  SUCCESSFUL QUOTE: WMATIC needed for 1 WETH with fee 500: 113871360129455
  Testing WMATIC -> WETH with fee 3000
  SUCCESSFUL QUOTE: WMATIC needed for 1 WETH with fee 3000: 113993335430019

Traces:
  [261652] TestTicketRouterV3NoMock_POLYGON::test_WmaticWethPath()
    ├─ emit log_string(val: "Testing WMATIC -> WETH with fee 500")
    ├─ [99512] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::quoteExactOutput(0x0d500b1d8e8ef31e21c99d1db9a6444d3adf12700001f47ceb23fd6bc0add59e62ac25578270cff1b9f619, 1000000000000000000 [1e18])
    │   ├─ [68587] 0x86f1d8390222A3691C28938eC7404A1661E618e0::128acb08(000000000000000000000000b27308f9f90d607463bb33ea1bebb41c27ce5ab60000000000000000000000000000000000000000000000000000000000000000fffffffffffffffffffffffffffffffffffffffffffffffff21f494c589c0000000000000000000000000000fffd8963efd1fc6a506488495d951d5263988d2500000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000000002b0d500b1d8e8ef31e21c99d1db9a6444d3adf12700001f47ceb23fd6bc0add59e62ac25578270cff1b9f619000000000000000000000000000000000000000000)
    │   │   ├─ [29995] 0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270::transfer(0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, 1000000000000000000 [1e18])
    │   │   │   ├─ emit Transfer(from: 0x86f1d8390222A3691C28938eC7404A1661E618e0, to: 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, value: 1000000000000000000 [1e18])
    │   │   │   └─ ← [Return] true
    │   │   ├─ [2608] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::balanceOf(0x86f1d8390222A3691C28938eC7404A1661E618e0) [staticcall]
    │   │   │   └─ ← [Return] 59918995277832941359 [5.991e19]
    │   │   ├─ [2577] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::fa461e33(fffffffffffffffffffffffffffffffffffffffffffffffff21f494c589c000000000000000000000000000000000000000000000000000000006790bdf879af0000000000000000000000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000000000000000002b0d500b1d8e8ef31e21c99d1db9a6444d3adf12700001f47ceb23fd6bc0add59e62ac25578270cff1b9f619000000000000000000000000000000000000000000)
    │   │   │   └─ ← [Revert] 0x00000000000000000000000000000000000000000000000000006790bdf879af
    │   │   └─ ← [Revert] 0x00000000000000000000000000000000000000000000000000006790bdf879af
    │   └─ ← [Return] 113871360129455 [1.138e14]
    ├─ emit log_named_uint(key: "SUCCESSFUL QUOTE: WMATIC needed for 1 WETH with fee 500", val: 113871360129455 [1.138e14])
    ├─ [0] VM::startPrank(deployer: [0xaE0bDc4eEAC5E950B67C6819B118761CaAF61946])
    │   └─ ← [Return] 
    ├─ [47787] TicketRouterV3::setCustomPoolFee(0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270, 500)
    │   ├─ emit FeeUpdated(token: 0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270, fee: 500)
    │   └─ ← [Stop] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ emit log_string(val: "Testing WMATIC -> WETH with fee 3000")
    ├─ [99486] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::quoteExactOutput(0x0d500b1d8e8ef31e21c99d1db9a6444d3adf1270000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619, 1000000000000000000 [1e18])
    │   ├─ [68561] 0x167384319B41F7094e62f7506409Eb38079AbfF8::128acb08(000000000000000000000000b27308f9f90d607463bb33ea1bebb41c27ce5ab60000000000000000000000000000000000000000000000000000000000000000fffffffffffffffffffffffffffffffffffffffffffffffff21f494c589c0000000000000000000000000000fffd8963efd1fc6a506488495d951d5263988d2500000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000000002b0d500b1d8e8ef31e21c99d1db9a6444d3adf1270000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619000000000000000000000000000000000000000000)
    │   │   ├─ [29995] 0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270::transfer(0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, 1000000000000000000 [1e18])
    │   │   │   ├─ emit Transfer(from: 0x167384319B41F7094e62f7506409Eb38079AbfF8, to: 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, value: 1000000000000000000 [1e18])
    │   │   │   └─ ← [Return] true
    │   │   ├─ [2608] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::balanceOf(0x167384319B41F7094e62f7506409Eb38079AbfF8) [staticcall]
    │   │   │   └─ ← [Return] 91337140528132288910 [9.133e19]
    │   │   ├─ [2577] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::fa461e33(fffffffffffffffffffffffffffffffffffffffffffffffff21f494c589c0000000000000000000000000000000000000000000000000000000067ad2443db830000000000000000000000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000000000000000002b0d500b1d8e8ef31e21c99d1db9a6444d3adf1270000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619000000000000000000000000000000000000000000)
    │   │   │   └─ ← [Revert] 0x000000000000000000000000000000000000000000000000000067ad2443db83
    │   │   └─ ← [Revert] 0x000000000000000000000000000000000000000000000000000067ad2443db83
    │   └─ ← [Return] 113993335430019 [1.139e14]
    ├─ emit log_named_uint(key: "SUCCESSFUL QUOTE: WMATIC needed for 1 WETH with fee 3000", val: 113993335430019 [1.139e14])
    ├─ [0] VM::startPrank(deployer: [0xaE0bDc4eEAC5E950B67C6819B118761CaAF61946])
    │   └─ ← [Return] 
    ├─ [30687] TicketRouterV3::setCustomPoolFee(0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270, 3000)
    │   ├─ emit FeeUpdated(token: 0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270, fee: 3000)
    │   └─ ← [Stop] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    └─ ← [Stop] 

Suite result: FAILED. 31 passed; 1 failed; 0 skipped; finished in 1.95s (30.18ms CPU time)

Ran 1 test for contracts/tests/Polygon/QuoterDirectTest.t.sol:QuoterDirectTest
[PASS] test_GetNativePriceForTickets() (gas: 178399)
Logs:
  Step 1: Getting WETH needed for VERSE
  WETH needed: 860774658383098
  Step 2: Getting WMATIC needed for WETH
  WMATIC needed: 7542123053616566230
  Total VERSE needed: 22000000000000000000000
  WETH intermediate: 860774658383098
  Final WMATIC needed: 7542123053616566230

Traces:
  [178399] QuoterDirectTest::test_GetNativePriceForTickets()
    ├─ emit log(val: "Step 1: Getting WETH needed for VERSE")
    ├─ [101793] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::quoteExactOutput(0xc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619, 22000000000000000000000 [2.2e22])
    │   ├─ [70863] 0xd19A1C8278D0420BFb2c825D99DC31fF86224607::128acb08(000000000000000000000000b27308f9f90d607463bb33ea1bebb41c27ce5ab60000000000000000000000000000000000000000000000000000000000000001fffffffffffffffffffffffffffffffffffffffffffffb5760ab10fede40000000000000000000000000000000000000000000000000000000000001000276a400000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000000002bc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619000000000000000000000000000000000000000000)
    │   │   ├─ [32908] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::transfer(0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, 22000000000000000000000 [2.2e22])
    │   │   │   ├─ [30230] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::transfer(0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, 22000000000000000000000 [2.2e22]) [delegatecall]
    │   │   │   │   ├─ emit Transfer(from: 0xd19A1C8278D0420BFb2c825D99DC31fF86224607, to: 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, value: 22000000000000000000000 [2.2e22])
    │   │   │   │   └─ ← [Return] true
    │   │   │   └─ ← [Return] true
    │   │   ├─ [2608] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::balanceOf(0xd19A1C8278D0420BFb2c825D99DC31fF86224607) [staticcall]
    │   │   │   └─ ← [Return] 36260475280224335946 [3.626e19]
    │   │   ├─ [2565] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::fa461e33(00000000000000000000000000000000000000000000000000030edeb7be9cfafffffffffffffffffffffffffffffffffffffffffffffb5760ab10fede4000000000000000000000000000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000000000000000002bc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619000000000000000000000000000000000000000000)
    │   │   │   └─ ← [Revert] 0x00000000000000000000000000000000000000000000000000030edeb7be9cfa
    │   │   └─ ← [Revert] 0x00000000000000000000000000000000000000000000000000030edeb7be9cfa
    │   └─ ← [Return] 860774658383098 [8.607e14]
    ├─ emit log_named_uint(key: "WETH needed", val: 860774658383098 [8.607e14])
    ├─ emit log(val: "Step 2: Getting WMATIC needed for WETH")
    ├─ [98865] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::quoteExactOutput(0x7ceb23fd6bc0add59e62ac25578270cff1b9f619000bb80d500b1d8e8ef31e21c99d1db9a6444d3adf1270, 860774658383098 [8.607e14])
    │   ├─ [67947] 0x167384319B41F7094e62f7506409Eb38079AbfF8::128acb08(000000000000000000000000b27308f9f90d607463bb33ea1bebb41c27ce5ab60000000000000000000000000000000000000000000000000000000000000001fffffffffffffffffffffffffffffffffffffffffffffffffffcf1214841630600000000000000000000000000000000000000000000000000000001000276a400000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000000002b7ceb23fd6bc0add59e62ac25578270cff1b9f619000bb80d500b1d8e8ef31e21c99d1db9a6444d3adf1270000000000000000000000000000000000000000000)
    │   │   ├─ [30338] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::transfer(0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, 860774658383098 [8.607e14])
    │   │   │   ├─ emit Transfer(from: 0x167384319B41F7094e62f7506409Eb38079AbfF8, to: 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, value: 860774658383098 [8.607e14])
    │   │   │   └─ ← [Return] true
    │   │   ├─ [2564] 0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270::balanceOf(0x167384319B41F7094e62f7506409Eb38079AbfF8) [staticcall]
    │   │   │   └─ ← [Return] 4834346736386370070810997 [4.834e24]
    │   │   ├─ [2565] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::fa461e33(00000000000000000000000000000000000000000000000068ab00f517198fd6fffffffffffffffffffffffffffffffffffffffffffffffffffcf121484163060000000000000000000000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000000000000000002b7ceb23fd6bc0add59e62ac25578270cff1b9f619000bb80d500b1d8e8ef31e21c99d1db9a6444d3adf1270000000000000000000000000000000000000000000)
    │   │   │   └─ ← [Revert] 0x00000000000000000000000000000000000000000000000068ab00f517198fd6
    │   │   └─ ← [Revert] 0x00000000000000000000000000000000000000000000000068ab00f517198fd6
    │   └─ ← [Return] 7542123053616566230 [7.542e18]
    ├─ emit log_named_uint(key: "WMATIC needed", val: 7542123053616566230 [7.542e18])
    ├─ emit log_named_uint(key: "Total VERSE needed", val: 22000000000000000000000 [2.2e22])
    ├─ emit log_named_uint(key: "WETH intermediate", val: 860774658383098 [8.607e14])
    ├─ emit log_named_uint(key: "Final WMATIC needed", val: 7542123053616566230 [7.542e18])
    └─ ← [Stop] 

Suite result: ok. 1 passed; 0 failed; 0 skipped; finished in 1.97s (999.54µs CPU time)

Ran 8 tests for contracts/tests/Polygon/DeployedContractTest.t.sol:DeployedContractTest
[PASS] test_DeployedRouterConfiguration() (gas: 8341)
Logs:
  Deployed router address: 0xc7EEf0C726D43CA13D99eB2CBeD4BE230cB3620d
  Existing scratcher address: 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C
  WETH address: 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619
  WMATIC address: 0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270
  VERSE token address: 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc
  Testing at block: 70420856

Traces:
  [8341] DeployedContractTest::test_DeployedRouterConfiguration()
    ├─ [248] 0xc7EEf0C726D43CA13D99eB2CBeD4BE230cB3620d::WETH() [staticcall]
    │   └─ ← [Return] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619
    ├─ [293] 0xc7EEf0C726D43CA13D99eB2CBeD4BE230cB3620d::VERSE_TOKEN() [staticcall]
    │   └─ ← [Return] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc
    ├─ [247] 0xc7EEf0C726D43CA13D99eB2CBeD4BE230cB3620d::SWAP_ROUTER() [staticcall]
    │   └─ ← [Return] 0xE592427A0AEce92De3Edee1F18E0157C05861564
    ├─ [270] 0xc7EEf0C726D43CA13D99eB2CBeD4BE230cB3620d::QUOTER() [staticcall]
    │   └─ ← [Return] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6
    └─ ← [Stop] 

[PASS] test_DirectUniswapQuotation() (gas: 188603)
Logs:
  Deployed router address: 0xc7EEf0C726D43CA13D99eB2CBeD4BE230cB3620d
  Existing scratcher address: 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C
  WETH address: 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619
  WMATIC address: 0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270
  VERSE token address: 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc
  Testing at block: 70420856
  Total VERSE needed for 1 ticket: 22000000000000000000000
  Testing direct quotation: VERSE -> WETH
  Path bytes (expected: output token -> fee -> input token): 0xc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619
  WETH needed for VERSE tokens: 860774658383098
  Testing direct quotation: WETH -> WMATIC
  Path bytes (expected: output token -> fee -> input token): 0x7ceb23fd6bc0add59e62ac25578270cff1b9f619000bb80d500b1d8e8ef31e21c99d1db9a6444d3adf1270
  WMATIC needed for WETH tokens: 7542123053616566230
  Both quotes succeeded - problem is likely in the contract's path construction

Traces:
  [188603] DeployedContractTest::test_DirectUniswapQuotation()
    ├─ [2406] 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C::baseCost() [staticcall]
    │   └─ ← [Return] 22000000000000000000000 [2.2e22]
    ├─ emit log_named_uint(key: "Total VERSE needed for 1 ticket", val: 22000000000000000000000 [2.2e22])
    ├─ emit log(val: "Testing direct quotation: VERSE -> WETH")
    ├─ emit log_named_bytes(key: "Path bytes (expected: output token -> fee -> input token)", val: 0xc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619)
    ├─ [101793] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::quoteExactOutput(0xc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619, 22000000000000000000000 [2.2e22])
    │   ├─ [70863] 0xd19A1C8278D0420BFb2c825D99DC31fF86224607::128acb08(000000000000000000000000b27308f9f90d607463bb33ea1bebb41c27ce5ab60000000000000000000000000000000000000000000000000000000000000001fffffffffffffffffffffffffffffffffffffffffffffb5760ab10fede40000000000000000000000000000000000000000000000000000000000001000276a400000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000000002bc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619000000000000000000000000000000000000000000)
    │   │   ├─ [32908] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::transfer(0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, 22000000000000000000000 [2.2e22])
    │   │   │   ├─ [30230] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::transfer(0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, 22000000000000000000000 [2.2e22]) [delegatecall]
    │   │   │   │   ├─ emit Transfer(from: 0xd19A1C8278D0420BFb2c825D99DC31fF86224607, to: 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, value: 22000000000000000000000 [2.2e22])
    │   │   │   │   └─ ← [Return] true
    │   │   │   └─ ← [Return] true
    │   │   ├─ [2608] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::balanceOf(0xd19A1C8278D0420BFb2c825D99DC31fF86224607) [staticcall]
    │   │   │   └─ ← [Return] 36260475280224335946 [3.626e19]
    │   │   ├─ [2565] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::fa461e33(00000000000000000000000000000000000000000000000000030edeb7be9cfafffffffffffffffffffffffffffffffffffffffffffffb5760ab10fede4000000000000000000000000000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000000000000000002bc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619000000000000000000000000000000000000000000)
    │   │   │   └─ ← [Revert] 0x00000000000000000000000000000000000000000000000000030edeb7be9cfa
    │   │   └─ ← [Revert] 0x00000000000000000000000000000000000000000000000000030edeb7be9cfa
    │   └─ ← [Return] 860774658383098 [8.607e14]
    ├─ emit log_named_uint(key: "WETH needed for VERSE tokens", val: 860774658383098 [8.607e14])
    ├─ emit log(val: "Testing direct quotation: WETH -> WMATIC")
    ├─ emit log_named_bytes(key: "Path bytes (expected: output token -> fee -> input token)", val: 0x7ceb23fd6bc0add59e62ac25578270cff1b9f619000bb80d500b1d8e8ef31e21c99d1db9a6444d3adf1270)
    ├─ [98865] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::quoteExactOutput(0x7ceb23fd6bc0add59e62ac25578270cff1b9f619000bb80d500b1d8e8ef31e21c99d1db9a6444d3adf1270, 860774658383098 [8.607e14])
    │   ├─ [67947] 0x167384319B41F7094e62f7506409Eb38079AbfF8::128acb08(000000000000000000000000b27308f9f90d607463bb33ea1bebb41c27ce5ab60000000000000000000000000000000000000000000000000000000000000001fffffffffffffffffffffffffffffffffffffffffffffffffffcf1214841630600000000000000000000000000000000000000000000000000000001000276a400000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000000002b7ceb23fd6bc0add59e62ac25578270cff1b9f619000bb80d500b1d8e8ef31e21c99d1db9a6444d3adf1270000000000000000000000000000000000000000000)
    │   │   ├─ [30338] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::transfer(0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, 860774658383098 [8.607e14])
    │   │   │   ├─ emit Transfer(from: 0x167384319B41F7094e62f7506409Eb38079AbfF8, to: 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, value: 860774658383098 [8.607e14])
    │   │   │   └─ ← [Return] true
    │   │   ├─ [2564] 0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270::balanceOf(0x167384319B41F7094e62f7506409Eb38079AbfF8) [staticcall]
    │   │   │   └─ ← [Return] 4834346736386370070810997 [4.834e24]
    │   │   ├─ [2565] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::fa461e33(00000000000000000000000000000000000000000000000068ab00f517198fd6fffffffffffffffffffffffffffffffffffffffffffffffffffcf121484163060000000000000000000000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000000000000000002b7ceb23fd6bc0add59e62ac25578270cff1b9f619000bb80d500b1d8e8ef31e21c99d1db9a6444d3adf1270000000000000000000000000000000000000000000)
    │   │   │   └─ ← [Revert] 0x00000000000000000000000000000000000000000000000068ab00f517198fd6
    │   │   └─ ← [Revert] 0x00000000000000000000000000000000000000000000000068ab00f517198fd6
    │   └─ ← [Return] 7542123053616566230 [7.542e18]
    ├─ emit log_named_uint(key: "WMATIC needed for WETH tokens", val: 7542123053616566230 [7.542e18])
    ├─ emit log(val: "Both quotes succeeded - problem is likely in the contract's path construction")
    └─ ← [Stop] 

[PASS] test_ExactOutputQuoteCall() (gas: 183188)
Logs:
  Deployed router address: 0xc7EEf0C726D43CA13D99eB2CBeD4BE230cB3620d
  Existing scratcher address: 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C
  WETH address: 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619
  WMATIC address: 0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270
  VERSE token address: 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc
  Testing at block: 70420856
  === TESTING WITH SMALL AMOUNT (1 VERSE) ===
  Trying path with output token first: VERSE -> WETH
  SUCCESS - WETH needed for 1 VERSE: 39125995202
  === TESTING WITH FULL AMOUNT (22,000 VERSE) ===
  Trying path with output token first: VERSE -> WETH
  SUCCESS - WETH needed for 22,000 VERSE: 860774658383098
  === TESTING EXACT INPUT INSTEAD ===
  Trying ExactInput: WETH -> VERSE

Traces:
  [183188] DeployedContractTest::test_ExactOutputQuoteCall()
    ├─ emit log_string(val: "=== TESTING WITH SMALL AMOUNT (1 VERSE) ===")
    ├─ emit log(val: "Trying path with output token first: VERSE -> WETH")
    ├─ [101467] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::quoteExactOutput(0xc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619, 1000000000000000000 [1e18])
    │   ├─ [70561] 0xd19A1C8278D0420BFb2c825D99DC31fF86224607::128acb08(000000000000000000000000b27308f9f90d607463bb33ea1bebb41c27ce5ab60000000000000000000000000000000000000000000000000000000000000001fffffffffffffffffffffffffffffffffffffffffffffffff21f494c589c000000000000000000000000000000000000000000000000000000000001000276a400000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000000002bc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619000000000000000000000000000000000000000000)
    │   │   ├─ [32908] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::transfer(0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, 1000000000000000000 [1e18])
    │   │   │   ├─ [30230] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::transfer(0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, 1000000000000000000 [1e18]) [delegatecall]
    │   │   │   │   ├─ emit Transfer(from: 0xd19A1C8278D0420BFb2c825D99DC31fF86224607, to: 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, value: 1000000000000000000 [1e18])
    │   │   │   │   └─ ← [Return] true
    │   │   │   └─ ← [Return] true
    │   │   ├─ [2608] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::balanceOf(0xd19A1C8278D0420BFb2c825D99DC31fF86224607) [staticcall]
    │   │   │   └─ ← [Return] 36260475280224335946 [3.626e19]
    │   │   ├─ [2565] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::fa461e33(000000000000000000000000000000000000000000000000000000091c174ec2fffffffffffffffffffffffffffffffffffffffffffffffff21f494c589c00000000000000000000000000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000000000000000002bc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619000000000000000000000000000000000000000000)
    │   │   │   └─ ← [Revert] 0x000000000000000000000000000000000000000000000000000000091c174ec2
    │   │   └─ ← [Revert] 0x000000000000000000000000000000000000000000000000000000091c174ec2
    │   └─ ← [Return] 39125995202 [3.912e10]
    ├─ emit log_named_uint(key: "SUCCESS - WETH needed for 1 VERSE", val: 39125995202 [3.912e10])
    ├─ emit log_string(val: "=== TESTING WITH FULL AMOUNT (22,000 VERSE) ===")
    ├─ emit log(val: "Trying path with output token first: VERSE -> WETH")
    ├─ [101793] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::quoteExactOutput(0xc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619, 22000000000000000000000 [2.2e22])
    │   ├─ [70863] 0xd19A1C8278D0420BFb2c825D99DC31fF86224607::128acb08(000000000000000000000000b27308f9f90d607463bb33ea1bebb41c27ce5ab60000000000000000000000000000000000000000000000000000000000000001fffffffffffffffffffffffffffffffffffffffffffffb5760ab10fede40000000000000000000000000000000000000000000000000000000000001000276a400000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000000002bc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619000000000000000000000000000000000000000000)
    │   │   ├─ [32908] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::transfer(0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, 22000000000000000000000 [2.2e22])
    │   │   │   ├─ [30230] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::transfer(0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, 22000000000000000000000 [2.2e22]) [delegatecall]
    │   │   │   │   ├─ emit Transfer(from: 0xd19A1C8278D0420BFb2c825D99DC31fF86224607, to: 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6, value: 22000000000000000000000 [2.2e22])
    │   │   │   │   └─ ← [Return] true
    │   │   │   └─ ← [Return] true
    │   │   ├─ [2608] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::balanceOf(0xd19A1C8278D0420BFb2c825D99DC31fF86224607) [staticcall]
    │   │   │   └─ ← [Return] 36260475280224335946 [3.626e19]
    │   │   ├─ [2565] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::fa461e33(00000000000000000000000000000000000000000000000000030edeb7be9cfafffffffffffffffffffffffffffffffffffffffffffffb5760ab10fede4000000000000000000000000000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000000000000000002bc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619000000000000000000000000000000000000000000)
    │   │   │   └─ ← [Revert] 0x00000000000000000000000000000000000000000000000000030edeb7be9cfa
    │   │   └─ ← [Revert] 0x00000000000000000000000000000000000000000000000000030edeb7be9cfa
    │   └─ ← [Return] 860774658383098 [8.607e14]
    ├─ emit log_named_uint(key: "SUCCESS - WETH needed for 22,000 VERSE", val: 860774658383098 [8.607e14])
    ├─ emit log_string(val: "=== TESTING EXACT INPUT INSTEAD ===")
    ├─ emit log(val: "Trying ExactInput: WETH -> VERSE")
    └─ ← [Stop] 

[PASS] test_GetBaseCost() (gas: 7486)
Logs:
  Deployed router address: 0xc7EEf0C726D43CA13D99eB2CBeD4BE230cB3620d
  Existing scratcher address: 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C
  WETH address: 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619
  WMATIC address: 0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270
  VERSE token address: 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc
  Testing at block: 70420856
  Scratch card base cost (VERSE): 22000000000000000000000

Traces:
  [7486] DeployedContractTest::test_GetBaseCost()
    ├─ [2406] 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C::baseCost() [staticcall]
    │   └─ ← [Return] 22000000000000000000000 [2.2e22]
    ├─ emit log_named_uint(key: "Scratch card base cost (VERSE)", val: 22000000000000000000000 [2.2e22])
    └─ ← [Stop] 

[PASS] test_GetNativePriceForTickets() (gas: 29540679)
Logs:
  Deployed router address: 0xc7EEf0C726D43CA13D99eB2CBeD4BE230cB3620d
  Existing scratcher address: 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C
  WETH address: 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619
  WMATIC address: 0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270
  VERSE token address: 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc
  Testing at block: 70420856
  getNativePriceForTickets reverted with unknown reason
  This indicates an issue with the quoter or path construction

Traces:
  [29540679] DeployedContractTest::test_GetNativePriceForTickets()
    ├─ [29531764] 0xc7EEf0C726D43CA13D99eB2CBeD4BE230cB3620d::getNativePriceForTickets(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 1)
    │   ├─ [2406] 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C::baseCost() [staticcall]
    │   │   └─ ← [Return] 22000000000000000000000 [2.2e22]
    │   ├─ [29501192] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::quoteExactOutput(0xc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619, 22000000000000000000000 [2.2e22]) [staticcall]
    │   │   └─ ← [StateChangeDuringStaticCall] EvmError: StateChangeDuringStaticCall
    │   └─ ← [Revert] EvmError: Revert
    ├─ emit log(val: "getNativePriceForTickets reverted with unknown reason")
    ├─ emit log(val: "This indicates an issue with the quoter or path construction")
    └─ ← [Stop] 

[PASS] test_GetTokenPriceForTicketsVerse() (gas: 35131)
Logs:
  Deployed router address: 0xc7EEf0C726D43CA13D99eB2CBeD4BE230cB3620d
  Existing scratcher address: 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C
  WETH address: 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619
  WMATIC address: 0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270
  VERSE token address: 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc
  Testing at block: 70420856
  Price for 1 ticket in VERSE: 22000000000000000000000

Traces:
  [35131] DeployedContractTest::test_GetTokenPriceForTicketsVerse()
    ├─ [27905] 0xc7EEf0C726D43CA13D99eB2CBeD4BE230cB3620d::getTokenPriceForTickets(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 1, 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc)
    │   ├─ [2406] 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C::baseCost() [staticcall]
    │   │   └─ ← [Return] 22000000000000000000000 [2.2e22]
    │   └─ ← [Return] 22000000000000000000000 [2.2e22]
    ├─ emit log_named_uint(key: "Price for 1 ticket in VERSE", val: 22000000000000000000000 [2.2e22])
    └─ ← [Stop] 

[PASS] test_GetTokenPriceForTicketsWETH() (gas: 29540998)
Logs:
  Deployed router address: 0xc7EEf0C726D43CA13D99eB2CBeD4BE230cB3620d
  Existing scratcher address: 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C
  WETH address: 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619
  WMATIC address: 0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270
  VERSE token address: 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc
  Testing at block: 70420856
  getTokenPriceForTickets(WETH) reverted with unknown reason
  Direct query of price in WETH failed - this may indicate a pool liquidity issue

Traces:
  [29540998] DeployedContractTest::test_GetTokenPriceForTicketsWETH()
    ├─ [29531772] 0xc7EEf0C726D43CA13D99eB2CBeD4BE230cB3620d::getTokenPriceForTickets(0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C, 1, 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619)
    │   ├─ [2406] 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C::baseCost() [staticcall]
    │   │   └─ ← [Return] 22000000000000000000000 [2.2e22]
    │   ├─ [29500683] 0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6::quoteExactOutput(0xc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619, 22000000000000000000000 [2.2e22]) [staticcall]
    │   │   └─ ← [StateChangeDuringStaticCall] EvmError: StateChangeDuringStaticCall
    │   └─ ← [Revert] EvmError: Revert
    ├─ emit log(val: "getTokenPriceForTickets(WETH) reverted with unknown reason")
    ├─ emit log(val: "Direct query of price in WETH failed - this may indicate a pool liquidity issue")
    └─ ← [Stop] 

[PASS] test_TokenOrdering() (gas: 53386)
Logs:
  Deployed router address: 0xc7EEf0C726D43CA13D99eB2CBeD4BE230cB3620d
  Existing scratcher address: 0xABce2e6DE1bf18722ee06eEE85f07Fdc90a3Bc9C
  WETH address: 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619
  WMATIC address: 0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270
  VERSE token address: 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc
  Testing at block: 70420856
  VERSE tokens in VERSE/WETH pool: 1089779183988596788424759981
  WETH tokens in VERSE/WETH pool: 36260475280224335946
  WMATIC tokens in WMATIC/WETH pool: 1932510329843900785695977
  WETH tokens in WMATIC/WETH pool: 61384622459637962720
  VERSE/WETH Pool token0: 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619
  VERSE/WETH Pool token1: 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc
  VERSE/WETH Pool fee: 3000
  Pool ordering: token0 = WETH, token1 = VERSE
  Attempting to check WETH/WMATIC pool info
  Possible WETH/WMATIC Pool token0: 0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270
  Possible WETH/WMATIC Pool token1: 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619
  Found valid WETH/WMATIC pool

Traces:
  [53386] DeployedContractTest::test_TokenOrdering()
    ├─ [5253] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::balanceOf(0xd19A1C8278D0420BFb2c825D99DC31fF86224607) [staticcall]
    │   ├─ [2581] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::balanceOf(0xd19A1C8278D0420BFb2c825D99DC31fF86224607) [delegatecall]
    │   │   └─ ← [Return] 1089779183988596788424759981 [1.089e27]
    │   └─ ← [Return] 1089779183988596788424759981 [1.089e27]
    ├─ [2608] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::balanceOf(0xd19A1C8278D0420BFb2c825D99DC31fF86224607) [staticcall]
    │   └─ ← [Return] 36260475280224335946 [3.626e19]
    ├─ emit log_named_uint(key: "VERSE tokens in VERSE/WETH pool", val: 1089779183988596788424759981 [1.089e27])
    ├─ emit log_named_uint(key: "WETH tokens in VERSE/WETH pool", val: 36260475280224335946 [3.626e19])
    ├─ [2564] 0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270::balanceOf(0x86f1d8390222A3691C28938eC7404A1661E618e0) [staticcall]
    │   └─ ← [Return] 1932510329843900785695977 [1.932e24]
    ├─ [2608] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::balanceOf(0x86f1d8390222A3691C28938eC7404A1661E618e0) [staticcall]
    │   └─ ← [Return] 61384622459637962720 [6.138e19]
    ├─ emit log_named_uint(key: "WMATIC tokens in WMATIC/WETH pool", val: 1932510329843900785695977 [1.932e24])
    ├─ emit log_named_uint(key: "WETH tokens in WMATIC/WETH pool", val: 61384622459637962720 [6.138e19])
    ├─ [266] 0xd19A1C8278D0420BFb2c825D99DC31fF86224607::token0() [staticcall]
    │   └─ ← [Return] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619
    ├─ emit log_named_address(key: "VERSE/WETH Pool token0", val: 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619)
    ├─ [308] 0xd19A1C8278D0420BFb2c825D99DC31fF86224607::token1() [staticcall]
    │   └─ ← [Return] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc
    ├─ emit log_named_address(key: "VERSE/WETH Pool token1", val: 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc)
    ├─ [251] 0xd19A1C8278D0420BFb2c825D99DC31fF86224607::fee() [staticcall]
    │   └─ ← [Return] 3000
    ├─ emit log_named_uint(key: "VERSE/WETH Pool fee", val: 3000)
    ├─ emit log(val: "Pool ordering: token0 = WETH, token1 = VERSE")
    ├─ emit log(val: "Attempting to check WETH/WMATIC pool info")
    ├─ [266] 0x86f1d8390222A3691C28938eC7404A1661E618e0::token0() [staticcall]
    │   └─ ← [Return] 0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270
    ├─ emit log_named_address(key: "Possible WETH/WMATIC Pool token0", val: 0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270)
    ├─ [308] 0x86f1d8390222A3691C28938eC7404A1661E618e0::token1() [staticcall]
    │   └─ ← [Return] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619
    ├─ emit log_named_address(key: "Possible WETH/WMATIC Pool token1", val: 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619)
    ├─ emit log(val: "Found valid WETH/WMATIC pool")
    └─ ← [Stop] 

Suite result: ok. 8 passed; 0 failed; 0 skipped; finished in 1.97s (3.29ms CPU time)

Ran 14 tests for contracts/tests/Mainnet/ReelVRF.t.sol:TestReelVRF_MAINNET
[PASS] testBuyCharacter() (gas: 1049541)
Logs:
  None badgeName
  Saffron Sunrise backgroundColor
  Armored Pack backType
  Gravitas Shade bodyType
  Leafline Hoodie gearType
  Star Visor headType
  None extraType
  None badgeType
  462 tr[0]

Traces:
  [1049541] TestReelVRF_MAINNET::testBuyCharacter()
    ├─ [2385] ReelVRF::baseCost() [staticcall]
    │   └─ ← [Return] 3000000000000000000000 [3e21]
    ├─ [0] VM::startPrank(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   └─ ← [Return] 
    ├─ [46218] 0x249cA82617eC3DfB2589c4c17ab7EC9765350a18::approve(ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], 3000000000000000000000 [3e21])
    │   ├─ emit Approval(owner: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, spender: ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], value: 3000000000000000000000 [3e21])
    │   └─ ← [Return] true
    ├─ [2383] ReelVRF::latestCharacterId() [staticcall]
    │   └─ ← [Return] 0
    ├─ [414252] ReelVRF::buyCharacter()
    │   ├─ [35454] 0x249cA82617eC3DfB2589c4c17ab7EC9765350a18::transferFrom(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], 3000000000000000000000 [3e21])
    │   │   ├─ emit Transfer(from: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, to: ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], value: 3000000000000000000000 [3e21])
    │   │   └─ ← [Return] true
    │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, tokenId: 1)
    │   ├─ [45665] VRFCoordinatorV2Mock::requestRandomWords(0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, 1, 3, 2500000 [2.5e6], 7)
    │   │   ├─ emit RandomWordsRequested(keyHash: 0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, requestId: 1, preSeed: 100, subId: 1, minimumRequestConfirmations: 3, callbackGasLimit: 2500000 [2.5e6], numWords: 7, sender: ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   │   └─ ← [Return] 1
    │   ├─ emit DrawRequest(drawId: 1, requestId: 1, requestAddress: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   └─ ← [Stop] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [241666] VRFCoordinatorV2Mock::fulfillRandomWords(1, ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   ├─ [201507] ReelVRF::rawFulfillRandomWords(1, [78541660797044910968829902406342334108369226379826116161446442989268089806461 [7.854e76], 92458281274488595289803937127152923398167637295201432141969818930235769911599 [9.245e76], 105409183525425523237923285454331214386340807945685310246717412709691342439136 [1.054e77], 72984518589826227531578991903372844090998219903258077796093728159832249402700 [7.298e76], 77725202164364049732730867459915098663759625749236281158857587643401898360325 [7.772e76], 9247535584797915451057180664748820695544591120644449140157971996739901653371 [9.247e75], 28212876883947467128917703474378516019173305230661588919942657668795042982449 [2.821e76]])
    │   │   ├─ emit InitialMint(astroId: 1, numbers: [462, 600, 137, 701, 326, 372, 450])
    │   │   ├─ emit RequestFulfilled(drawId: 1, requestId: 1, resultValue: 0x3e75ee913510d066e9ea18095530b1d27513829e91165221538a0b5ff6534b6b)
    │   │   └─ ← [Stop] 
    │   ├─ emit RandomWordsFulfilled(requestId: 1, outputSeed: 1, payment: 331180000000 [3.311e11], success: true)
    │   └─ ← [Stop] 
    ├─ [26588] ReelVRF::getBadgeName(1) [staticcall]
    │   └─ ← [Return] "None"
    ├─ [301657] ReelVRF::getTraitNames(1) [staticcall]
    │   └─ ← [Return] Character({ backgroundColor: "Saffron Sunrise", backType: "Armored Pack", bodyType: "Gravitas Shade", gearType: "Leafline Hoodie", headType: "Star Visor", extraType: "None", saleBadge: "None" })
    ├─ [0] console::log("None", "badgeName") [staticcall]
    │   └─ ← [Stop] 
    ├─ [0] console::log("Saffron Sunrise", "backgroundColor") [staticcall]
    │   └─ ← [Stop] 
    ├─ [0] console::log("Armored Pack", "backType") [staticcall]
    │   └─ ← [Stop] 
    ├─ [0] console::log("Gravitas Shade", "bodyType") [staticcall]
    │   └─ ← [Stop] 
    ├─ [0] console::log("Leafline Hoodie", "gearType") [staticcall]
    │   └─ ← [Stop] 
    ├─ [0] console::log("Star Visor", "headType") [staticcall]
    │   └─ ← [Stop] 
    ├─ [0] console::log("None", "extraType") [staticcall]
    │   └─ ← [Stop] 
    ├─ [0] console::log("None", "badgeType") [staticcall]
    │   └─ ← [Stop] 
    ├─ [2644] ReelVRF::getTraitIds(1) [staticcall]
    │   └─ ← [Return] [462, 600, 137, 701, 326, 372, 1000]
    ├─ [0] console::log(462, "tr[0]") [staticcall]
    │   └─ ← [Stop] 
    ├─ [383] ReelVRF::latestCharacterId() [staticcall]
    │   └─ ← [Return] 1
    ├─ [2644] ReelVRF::getTraitIds(1) [staticcall]
    │   └─ ← [Return] [462, 600, 137, 701, 326, 372, 1000]
    └─ ← [Stop] 

[PASS] testChangeBaseCost() (gas: 37844)
Traces:
  [37844] TestReelVRF_MAINNET::testChangeBaseCost()
    ├─ [2385] ReelVRF::baseCost() [staticcall]
    │   └─ ← [Return] 3000000000000000000000 [3e21]
    ├─ [28827] ReelVRF::changeBaseCost(1000000000000000000000 [1e21])
    │   └─ ← [Stop] 
    ├─ [385] ReelVRF::baseCost() [staticcall]
    │   └─ ← [Return] 1000000000000000000000 [1e21]
    └─ ← [Stop] 

[PASS] testChangeBaseCostExceptions() (gas: 142609)
Traces:
  [142609] TestReelVRF_MAINNET::testChangeBaseCostExceptions()
    ├─ [2385] ReelVRF::baseCost() [staticcall]
    │   └─ ← [Return] 3000000000000000000000 [3e21]
    ├─ [0] VM::startPrank(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   └─ ← [Return] 
    ├─ [0] VM::expectRevert(NotMaster())
    │   └─ ← [Return] 
    ├─ [23807] ReelVRF::changeBaseCost(1000000000000000000000 [1e21])
    │   └─ ← [Revert] NotMaster()
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::expectRevert(InvalidCost())
    │   └─ ← [Return] 
    ├─ [25959] ReelVRF::changeBaseCost(3000000000000000000000 [3e21])
    │   └─ ← [Revert] InvalidCost()
    ├─ [0] VM::expectRevert(InvalidCost())
    │   └─ ← [Return] 
    ├─ [23752] ReelVRF::changeBaseCost(0)
    │   └─ ← [Revert] InvalidCost()
    ├─ [28827] ReelVRF::changeBaseCost(1000000000000000000000 [1e21])
    │   └─ ← [Stop] 
    ├─ [0] VM::expectRevert(InvalidCost())
    │   └─ ← [Return] 
    ├─ [25959] ReelVRF::changeBaseCost(1000000000000000000000 [1e21])
    │   └─ ← [Revert] InvalidCost()
    └─ ← [Stop] 

[PASS] testCheckIfTokenExists() (gas: 694012)
Traces:
  [694012] TestReelVRF_MAINNET::testCheckIfTokenExists()
    ├─ [2385] ReelVRF::baseCost() [staticcall]
    │   └─ ← [Return] 3000000000000000000000 [3e21]
    ├─ [0] VM::startPrank(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   └─ ← [Return] 
    ├─ [46218] 0x249cA82617eC3DfB2589c4c17ab7EC9765350a18::approve(ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], 3000000000000000000000 [3e21])
    │   ├─ emit Approval(owner: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, spender: ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], value: 3000000000000000000000 [3e21])
    │   └─ ← [Return] true
    ├─ [414252] ReelVRF::buyCharacter()
    │   ├─ [35454] 0x249cA82617eC3DfB2589c4c17ab7EC9765350a18::transferFrom(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], 3000000000000000000000 [3e21])
    │   │   ├─ emit Transfer(from: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, to: ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], value: 3000000000000000000000 [3e21])
    │   │   └─ ← [Return] true
    │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, tokenId: 1)
    │   ├─ [45665] VRFCoordinatorV2Mock::requestRandomWords(0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, 1, 3, 2500000 [2.5e6], 7)
    │   │   ├─ emit RandomWordsRequested(keyHash: 0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, requestId: 1, preSeed: 100, subId: 1, minimumRequestConfirmations: 3, callbackGasLimit: 2500000 [2.5e6], numWords: 7, sender: ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   │   └─ ← [Return] 1
    │   ├─ emit DrawRequest(drawId: 1, requestId: 1, requestAddress: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   └─ ← [Stop] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [241666] VRFCoordinatorV2Mock::fulfillRandomWords(1, ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   ├─ [201507] ReelVRF::rawFulfillRandomWords(1, [78541660797044910968829902406342334108369226379826116161446442989268089806461 [7.854e76], 92458281274488595289803937127152923398167637295201432141969818930235769911599 [9.245e76], 105409183525425523237923285454331214386340807945685310246717412709691342439136 [1.054e77], 72984518589826227531578991903372844090998219903258077796093728159832249402700 [7.298e76], 77725202164364049732730867459915098663759625749236281158857587643401898360325 [7.772e76], 9247535584797915451057180664748820695544591120644449140157971996739901653371 [9.247e75], 28212876883947467128917703474378516019173305230661588919942657668795042982449 [2.821e76]])
    │   │   ├─ emit InitialMint(astroId: 1, numbers: [462, 600, 137, 701, 326, 372, 450])
    │   │   ├─ emit RequestFulfilled(drawId: 1, requestId: 1, resultValue: 0x3e75ee913510d066e9ea18095530b1d27513829e91165221538a0b5ff6534b6b)
    │   │   └─ ← [Stop] 
    │   ├─ emit RandomWordsFulfilled(requestId: 1, outputSeed: 1, payment: 331180000000 [3.311e11], success: true)
    │   └─ ← [Stop] 
    ├─ [698] ReelVRF::isMinted(1) [staticcall]
    │   └─ ← [Return] true
    ├─ [2698] ReelVRF::isMinted(2) [staticcall]
    │   └─ ← [Return] false
    └─ ← [Stop] 

[PASS] testGiftCharacter() (gas: 1035242)
Logs:
  Saffron Sunrise backgroundColor
  Armored Pack backType
  Gravitas Shade bodyType
  Leafline Hoodie gearType
  Star Visor headType
  None extraType
  None badgeType

Traces:
  [1035242] TestReelVRF_MAINNET::testGiftCharacter()
    ├─ [2385] ReelVRF::baseCost() [staticcall]
    │   └─ ← [Return] 3000000000000000000000 [3e21]
    ├─ [0] VM::startPrank(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   └─ ← [Return] 
    ├─ [46218] 0x249cA82617eC3DfB2589c4c17ab7EC9765350a18::approve(ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], 3000000000000000000000 [3e21])
    │   ├─ emit Approval(owner: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, spender: ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], value: 3000000000000000000000 [3e21])
    │   └─ ← [Return] true
    ├─ [2383] ReelVRF::latestCharacterId() [staticcall]
    │   └─ ← [Return] 0
    ├─ [414719] ReelVRF::giftCharacter(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   ├─ [35454] 0x249cA82617eC3DfB2589c4c17ab7EC9765350a18::transferFrom(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], 3000000000000000000000 [3e21])
    │   │   ├─ emit Transfer(from: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, to: ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], value: 3000000000000000000000 [3e21])
    │   │   └─ ← [Return] true
    │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, tokenId: 1)
    │   ├─ [45665] VRFCoordinatorV2Mock::requestRandomWords(0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, 1, 3, 2500000 [2.5e6], 7)
    │   │   ├─ emit RandomWordsRequested(keyHash: 0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, requestId: 1, preSeed: 100, subId: 1, minimumRequestConfirmations: 3, callbackGasLimit: 2500000 [2.5e6], numWords: 7, sender: ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   │   └─ ← [Return] 1
    │   ├─ emit DrawRequest(drawId: 1, requestId: 1, requestAddress: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   └─ ← [Stop] 
    ├─ [383] ReelVRF::latestCharacterId() [staticcall]
    │   └─ ← [Return] 1
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [241666] VRFCoordinatorV2Mock::fulfillRandomWords(1, ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   ├─ [201507] ReelVRF::rawFulfillRandomWords(1, [78541660797044910968829902406342334108369226379826116161446442989268089806461 [7.854e76], 92458281274488595289803937127152923398167637295201432141969818930235769911599 [9.245e76], 105409183525425523237923285454331214386340807945685310246717412709691342439136 [1.054e77], 72984518589826227531578991903372844090998219903258077796093728159832249402700 [7.298e76], 77725202164364049732730867459915098663759625749236281158857587643401898360325 [7.772e76], 9247535584797915451057180664748820695544591120644449140157971996739901653371 [9.247e75], 28212876883947467128917703474378516019173305230661588919942657668795042982449 [2.821e76]])
    │   │   ├─ emit InitialMint(astroId: 1, numbers: [462, 600, 137, 701, 326, 372, 450])
    │   │   ├─ emit RequestFulfilled(drawId: 1, requestId: 1, resultValue: 0x3e75ee913510d066e9ea18095530b1d27513829e91165221538a0b5ff6534b6b)
    │   │   └─ ← [Stop] 
    │   ├─ emit RandomWordsFulfilled(requestId: 1, outputSeed: 1, payment: 331180000000 [3.311e11], success: true)
    │   └─ ← [Stop] 
    ├─ [2644] ReelVRF::getTraitIds(1) [staticcall]
    │   └─ ← [Return] [462, 600, 137, 701, 326, 372, 1000]
    ├─ [321657] ReelVRF::getTraitNames(1) [staticcall]
    │   └─ ← [Return] Character({ backgroundColor: "Saffron Sunrise", backType: "Armored Pack", bodyType: "Gravitas Shade", gearType: "Leafline Hoodie", headType: "Star Visor", extraType: "None", saleBadge: "None" })
    ├─ [0] console::log("Saffron Sunrise", "backgroundColor") [staticcall]
    │   └─ ← [Stop] 
    ├─ [0] console::log("Armored Pack", "backType") [staticcall]
    │   └─ ← [Stop] 
    ├─ [0] console::log("Gravitas Shade", "bodyType") [staticcall]
    │   └─ ← [Stop] 
    ├─ [0] console::log("Leafline Hoodie", "gearType") [staticcall]
    │   └─ ← [Stop] 
    ├─ [0] console::log("Star Visor", "headType") [staticcall]
    │   └─ ← [Stop] 
    ├─ [0] console::log("None", "extraType") [staticcall]
    │   └─ ← [Stop] 
    ├─ [0] console::log("None", "badgeType") [staticcall]
    │   └─ ← [Stop] 
    └─ ← [Stop] 

[PASS] testGiftCharactersForFree() (gas: 1262138)
Logs:
  Star Unit Pin badgeName
  Saffron Sunrise backgroundColor
  Armored Pack backType
  Gravitas Shade bodyType
  Leafline Hoodie gearType
  Star Visor headType
  None extraType
  Star Unit Pin badgeType

Traces:
  [1262138] TestReelVRF_MAINNET::testGiftCharactersForFree()
    ├─ [2383] ReelVRF::latestCharacterId() [staticcall]
    │   └─ ← [Return] 0
    ├─ [2407] ReelVRF::freeGiftCount() [staticcall]
    │   └─ ← [Return] 0
    ├─ [637392] ReelVRF::giftForFree(true, [0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689])
    │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, tokenId: 1)
    │   ├─ [45665] VRFCoordinatorV2Mock::requestRandomWords(0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, 1, 3, 2500000 [2.5e6], 7)
    │   │   ├─ emit RandomWordsRequested(keyHash: 0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, requestId: 1, preSeed: 100, subId: 1, minimumRequestConfirmations: 3, callbackGasLimit: 2500000 [2.5e6], numWords: 7, sender: ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   │   └─ ← [Return] 1
    │   ├─ emit DrawRequest(drawId: 1, requestId: 1, requestAddress: TestReelVRF_MAINNET: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, tokenId: 2)
    │   ├─ [28065] VRFCoordinatorV2Mock::requestRandomWords(0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, 1, 3, 2500000 [2.5e6], 7)
    │   │   ├─ emit RandomWordsRequested(keyHash: 0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, requestId: 2, preSeed: 101, subId: 1, minimumRequestConfirmations: 3, callbackGasLimit: 2500000 [2.5e6], numWords: 7, sender: ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   │   └─ ← [Return] 2
    │   ├─ emit DrawRequest(drawId: 2, requestId: 2, requestAddress: TestReelVRF_MAINNET: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Stop] 
    ├─ [407] ReelVRF::freeGiftCount() [staticcall]
    │   └─ ← [Return] 2
    ├─ [383] ReelVRF::latestCharacterId() [staticcall]
    │   └─ ← [Return] 2
    ├─ [1109] ReelVRF::requestIdToDrawing(1) [staticcall]
    │   └─ ← [Return] 1, 0x0000000000000000000000000000000000000001
    ├─ [245160] VRFCoordinatorV2Mock::fulfillRandomWords(1, ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   ├─ [205001] ReelVRF::rawFulfillRandomWords(1, [78541660797044910968829902406342334108369226379826116161446442989268089806461 [7.854e76], 92458281274488595289803937127152923398167637295201432141969818930235769911599 [9.245e76], 105409183525425523237923285454331214386340807945685310246717412709691342439136 [1.054e77], 72984518589826227531578991903372844090998219903258077796093728159832249402700 [7.298e76], 77725202164364049732730867459915098663759625749236281158857587643401898360325 [7.772e76], 9247535584797915451057180664748820695544591120644449140157971996739901653371 [9.247e75], 28212876883947467128917703474378516019173305230661588919942657668795042982449 [2.821e76]])
    │   │   ├─ emit InitialMint(astroId: 1, numbers: [462, 600, 137, 701, 326, 372, 450])
    │   │   ├─ emit RequestFulfilled(drawId: 1, requestId: 1, resultValue: 0x3e75ee913510d066e9ea18095530b1d27513829e91165221538a0b5ff6534b6b)
    │   │   └─ ← [Stop] 
    │   ├─ emit RandomWordsFulfilled(requestId: 1, outputSeed: 1, payment: 334674000000 [3.346e11], success: true)
    │   └─ ← [Stop] 
    ├─ [11865] ReelVRF::getBadgeName(1) [staticcall]
    │   └─ ← [Return] "Star Unit Pin"
    ├─ [298925] ReelVRF::getTraitNames(1) [staticcall]
    │   └─ ← [Return] Character({ backgroundColor: "Saffron Sunrise", backType: "Armored Pack", bodyType: "Gravitas Shade", gearType: "Leafline Hoodie", headType: "Star Visor", extraType: "None", saleBadge: "Star Unit Pin" })
    ├─ [0] console::log("Star Unit Pin", "badgeName") [staticcall]
    │   └─ ← [Stop] 
    ├─ [0] console::log("Saffron Sunrise", "backgroundColor") [staticcall]
    │   └─ ← [Stop] 
    ├─ [0] console::log("Armored Pack", "backType") [staticcall]
    │   └─ ← [Stop] 
    ├─ [0] console::log("Gravitas Shade", "bodyType") [staticcall]
    │   └─ ← [Stop] 
    ├─ [0] console::log("Leafline Hoodie", "gearType") [staticcall]
    │   └─ ← [Stop] 
    ├─ [0] console::log("Star Visor", "headType") [staticcall]
    │   └─ ← [Stop] 
    ├─ [0] console::log("None", "extraType") [staticcall]
    │   └─ ← [Stop] 
    ├─ [0] console::log("Star Unit Pin", "badgeType") [staticcall]
    │   └─ ← [Stop] 
    ├─ [0] VM::startPrank(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   └─ ← [Return] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::expectRevert(TooManyReceivers())
    │   └─ ← [Return] 
    ├─ [43041] ReelVRF::giftForFree(true, [0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689])
    │   └─ ← [Revert] TooManyReceivers()
    └─ ← [Stop] 

[PASS] testOwnerByAddress() (gas: 692462)
Traces:
  [692462] TestReelVRF_MAINNET::testOwnerByAddress()
    ├─ [2385] ReelVRF::baseCost() [staticcall]
    │   └─ ← [Return] 3000000000000000000000 [3e21]
    ├─ [0] VM::startPrank(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   └─ ← [Return] 
    ├─ [46218] 0x249cA82617eC3DfB2589c4c17ab7EC9765350a18::approve(ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], 3000000000000000000000 [3e21])
    │   ├─ emit Approval(owner: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, spender: ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], value: 3000000000000000000000 [3e21])
    │   └─ ← [Return] true
    ├─ [414252] ReelVRF::buyCharacter()
    │   ├─ [35454] 0x249cA82617eC3DfB2589c4c17ab7EC9765350a18::transferFrom(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], 3000000000000000000000 [3e21])
    │   │   ├─ emit Transfer(from: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, to: ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], value: 3000000000000000000000 [3e21])
    │   │   └─ ← [Return] true
    │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, tokenId: 1)
    │   ├─ [45665] VRFCoordinatorV2Mock::requestRandomWords(0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, 1, 3, 2500000 [2.5e6], 7)
    │   │   ├─ emit RandomWordsRequested(keyHash: 0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, requestId: 1, preSeed: 100, subId: 1, minimumRequestConfirmations: 3, callbackGasLimit: 2500000 [2.5e6], numWords: 7, sender: ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   │   └─ ← [Return] 1
    │   ├─ emit DrawRequest(drawId: 1, requestId: 1, requestAddress: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   └─ ← [Stop] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [241666] VRFCoordinatorV2Mock::fulfillRandomWords(1, ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   ├─ [201507] ReelVRF::rawFulfillRandomWords(1, [78541660797044910968829902406342334108369226379826116161446442989268089806461 [7.854e76], 92458281274488595289803937127152923398167637295201432141969818930235769911599 [9.245e76], 105409183525425523237923285454331214386340807945685310246717412709691342439136 [1.054e77], 72984518589826227531578991903372844090998219903258077796093728159832249402700 [7.298e76], 77725202164364049732730867459915098663759625749236281158857587643401898360325 [7.772e76], 9247535584797915451057180664748820695544591120644449140157971996739901653371 [9.247e75], 28212876883947467128917703474378516019173305230661588919942657668795042982449 [2.821e76]])
    │   │   ├─ emit InitialMint(astroId: 1, numbers: [462, 600, 137, 701, 326, 372, 450])
    │   │   ├─ emit RequestFulfilled(drawId: 1, requestId: 1, resultValue: 0x3e75ee913510d066e9ea18095530b1d27513829e91165221538a0b5ff6534b6b)
    │   │   └─ ← [Stop] 
    │   ├─ emit RandomWordsFulfilled(requestId: 1, outputSeed: 1, payment: 331180000000 [3.311e11], success: true)
    │   └─ ← [Stop] 
    ├─ [1963] ReelVRF::ownedByAddress(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689) [staticcall]
    │   └─ ← [Return] [1]
    └─ ← [Stop] 

[PASS] testRerollCost() (gas: 93552)
Traces:
  [93552] TestReelVRF_MAINNET::testRerollCost()
    ├─ [6879] ReelVRF::getNextRerollPrice(0) [staticcall]
    │   └─ ← [Return] 0
    ├─ [0] VM::startPrank(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   └─ ← [Return] 
    ├─ [0] VM::expectRevert(NotMaster())
    │   └─ ← [Return] 
    ├─ [23916] ReelVRF::setRerollPrice(0, 1000000000000000000000 [1e21])
    │   └─ ← [Revert] NotMaster()
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [50318] ReelVRF::setRerollPrice(0, 1000000000000000000000 [1e21])
    │   └─ ← [Stop] 
    ├─ [685] ReelVRF::getRerollPrice(0) [staticcall]
    │   └─ ← [Return] 1000000000000000000000 [1e21]
    ├─ [879] ReelVRF::getNextRerollPrice(0) [staticcall]
    │   └─ ← [Return] 1000000000000000000000 [1e21]
    └─ ← [Stop] 

[PASS] testRerollSameTrait11Times() (gas: 4960853)
Logs:
  0 rerollCost
  600000000000000000000 rerollCost
  1200000000000000000000 rerollCost
  3000000000000000000000 rerollCost
  8000000000000000000000 rerollCost
  16000000000000000000000 rerollCost
  26000000000000000000000 rerollCost
  40000000000000000000000 rerollCost
  100000000000000000000000 rerollCost
  150000000000000000000000 rerollCost
  200000000000000000000000 rerollCost
  500000000000000000000000 rerollCost
  500000000000000000000000 rerollCost
  500000000000000000000000 rerollCost

Traces:
  [4960853] TestReelVRF_MAINNET::testRerollSameTrait11Times()
    ├─ [0] VM::startPrank(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   └─ ← [Return] 
    ├─ [46518] 0x249cA82617eC3DfB2589c4c17ab7EC9765350a18::approve(ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], 115792089237316195423570985008687907853269984665640564039457584007913129639935 [1.157e77])
    │   ├─ emit Approval(owner: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, spender: ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], value: 115792089237316195423570985008687907853269984665640564039457584007913129639935 [1.157e77])
    │   └─ ← [Return] true
    ├─ [2383] ReelVRF::latestCharacterId() [staticcall]
    │   └─ ← [Return] 0
    ├─ [4698] ReelVRF::isMinted(1) [staticcall]
    │   └─ ← [Return] false
    ├─ [415791] ReelVRF::buyCharacter()
    │   ├─ [32193] 0x249cA82617eC3DfB2589c4c17ab7EC9765350a18::transferFrom(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], 3000000000000000000000 [3e21])
    │   │   ├─ emit Transfer(from: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, to: ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], value: 3000000000000000000000 [3e21])
    │   │   └─ ← [Return] true
    │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, tokenId: 1)
    │   ├─ [45665] VRFCoordinatorV2Mock::requestRandomWords(0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, 1, 3, 2500000 [2.5e6], 7)
    │   │   ├─ emit RandomWordsRequested(keyHash: 0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, requestId: 1, preSeed: 100, subId: 1, minimumRequestConfirmations: 3, callbackGasLimit: 2500000 [2.5e6], numWords: 7, sender: ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   │   └─ ← [Return] 1
    │   ├─ emit DrawRequest(drawId: 1, requestId: 1, requestAddress: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   └─ ← [Stop] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [1109] ReelVRF::requestIdToDrawing(1) [staticcall]
    │   └─ ← [Return] 0, 0x0000000000000000000000000000000000000001
    ├─ [383] ReelVRF::latestCharacterId() [staticcall]
    │   └─ ← [Return] 1
    ├─ [241666] VRFCoordinatorV2Mock::fulfillRandomWords(1, ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   ├─ [201507] ReelVRF::rawFulfillRandomWords(1, [78541660797044910968829902406342334108369226379826116161446442989268089806461 [7.854e76], 92458281274488595289803937127152923398167637295201432141969818930235769911599 [9.245e76], 105409183525425523237923285454331214386340807945685310246717412709691342439136 [1.054e77], 72984518589826227531578991903372844090998219903258077796093728159832249402700 [7.298e76], 77725202164364049732730867459915098663759625749236281158857587643401898360325 [7.772e76], 9247535584797915451057180664748820695544591120644449140157971996739901653371 [9.247e75], 28212876883947467128917703474378516019173305230661588919942657668795042982449 [2.821e76]])
    │   │   ├─ emit InitialMint(astroId: 1, numbers: [462, 600, 137, 701, 326, 372, 450])
    │   │   ├─ emit RequestFulfilled(drawId: 1, requestId: 1, resultValue: 0x3e75ee913510d066e9ea18095530b1d27513829e91165221538a0b5ff6534b6b)
    │   │   └─ ← [Stop] 
    │   ├─ emit RandomWordsFulfilled(requestId: 1, outputSeed: 1, payment: 331180000000 [3.311e11], success: true)
    │   └─ ← [Stop] 
    ├─ [383] ReelVRF::latestCharacterId() [staticcall]
    │   └─ ← [Return] 1
    ├─ [0] VM::startPrank(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   └─ ← [Return] 
    ├─ [6879] ReelVRF::getNextRerollPrice(1) [staticcall]
    │   └─ ← [Return] 0
    ├─ [0] console::log(0, "rerollCost") [staticcall]
    │   └─ ← [Stop] 
    ├─ [232961] ReelVRF::rerollTrait(1, 0)
    │   ├─ [45665] VRFCoordinatorV2Mock::requestRandomWords(0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, 1, 3, 2500000 [2.5e6], 1)
    │   │   ├─ emit RandomWordsRequested(keyHash: 0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, requestId: 2, preSeed: 101, subId: 1, minimumRequestConfirmations: 3, callbackGasLimit: 2500000 [2.5e6], numWords: 1, sender: ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   │   └─ ← [Return] 2
    │   ├─ emit DrawRequest(drawId: 2, requestId: 2, requestAddress: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   ├─ emit RerollRequested(astroId: 1, traitId: 0, rerollCount: 0, rerollPrice: 0)
    │   └─ ← [Stop] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [84826] VRFCoordinatorV2Mock::fulfillRandomWords(2, ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   ├─ [43843] ReelVRF::rawFulfillRandomWords(2, [77676537065960878698898692042018114106337750925255485067533933387271373890921 [7.767e76]])
    │   │   ├─ emit RerollDone(astroId: 1, numbers: [922, 600, 137, 701, 326, 372, 1000])
    │   │   ├─ emit RerollFulfilled(drawId: 2, astroId: 1, traitNumber: 0, rolledNumber: 922)
    │   │   └─ ← [Stop] 
    │   ├─ emit RandomWordsFulfilled(requestId: 2, outputSeed: 2, payment: 170846000000 [1.708e11], success: true)
    │   └─ ← [Stop] 
    ├─ [0] VM::startPrank(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   └─ ← [Return] 
    ├─ [2879] ReelVRF::getNextRerollPrice(1) [staticcall]
    │   └─ ← [Return] 600000000000000000000 [6e20]
    ├─ [0] console::log(600000000000000000000 [6e20], "rerollCost") [staticcall]
    │   └─ ← [Stop] 
    ├─ [234972] ReelVRF::rerollTrait(1, 0)
    │   ├─ [45665] VRFCoordinatorV2Mock::requestRandomWords(0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, 1, 3, 2500000 [2.5e6], 1)
    │   │   ├─ emit RandomWordsRequested(keyHash: 0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, requestId: 3, preSeed: 102, subId: 1, minimumRequestConfirmations: 3, callbackGasLimit: 2500000 [2.5e6], numWords: 1, sender: ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   │   └─ ← [Return] 3
    │   ├─ emit DrawRequest(drawId: 3, requestId: 3, requestAddress: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   ├─ [15093] 0x249cA82617eC3DfB2589c4c17ab7EC9765350a18::transferFrom(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], 600000000000000000000 [6e20])
    │   │   ├─ emit Transfer(from: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, to: ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], value: 600000000000000000000 [6e20])
    │   │   └─ ← [Return] true
    │   ├─ emit RerollRequested(astroId: 1, traitId: 0, rerollCount: 1, rerollPrice: 600000000000000000000 [6e20])
    │   └─ ← [Stop] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [84826] VRFCoordinatorV2Mock::fulfillRandomWords(3, ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   ├─ [43843] ReelVRF::rawFulfillRandomWords(3, [7290387335634266486249037663595860854047133815481999773725367799777733655939 [7.29e75]])
    │   │   ├─ emit RerollDone(astroId: 1, numbers: [940, 600, 137, 701, 326, 372, 1000])
    │   │   ├─ emit RerollFulfilled(drawId: 3, astroId: 1, traitNumber: 0, rolledNumber: 940)
    │   │   └─ ← [Stop] 
    │   ├─ emit RandomWordsFulfilled(requestId: 3, outputSeed: 3, payment: 170846000000 [1.708e11], success: true)
    │   └─ ← [Stop] 
    ├─ [0] VM::startPrank(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   └─ ← [Return] 
    ├─ [2879] ReelVRF::getNextRerollPrice(1) [staticcall]
    │   └─ ← [Return] 1200000000000000000000 [1.2e21]
    ├─ [0] console::log(1200000000000000000000 [1.2e21], "rerollCost") [staticcall]
    │   └─ ← [Stop] 
    ├─ [234972] ReelVRF::rerollTrait(1, 0)
    │   ├─ [45665] VRFCoordinatorV2Mock::requestRandomWords(0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, 1, 3, 2500000 [2.5e6], 1)
    │   │   ├─ emit RandomWordsRequested(keyHash: 0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, requestId: 4, preSeed: 103, subId: 1, minimumRequestConfirmations: 3, callbackGasLimit: 2500000 [2.5e6], numWords: 1, sender: ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   │   └─ ← [Return] 4
    │   ├─ emit DrawRequest(drawId: 4, requestId: 4, requestAddress: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   ├─ [15093] 0x249cA82617eC3DfB2589c4c17ab7EC9765350a18::transferFrom(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], 1200000000000000000000 [1.2e21])
    │   │   ├─ emit Transfer(from: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, to: ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], value: 1200000000000000000000 [1.2e21])
    │   │   └─ ← [Return] true
    │   ├─ emit RerollRequested(astroId: 1, traitId: 0, rerollCount: 2, rerollPrice: 1200000000000000000000 [1.2e21])
    │   └─ ← [Stop] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [84826] VRFCoordinatorV2Mock::fulfillRandomWords(4, ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   ├─ [43843] ReelVRF::rawFulfillRandomWords(4, [37470079394597546017821359402343014298469527652371950473243809108734949064165 [3.747e76]])
    │   │   ├─ emit RerollDone(astroId: 1, numbers: [166, 600, 137, 701, 326, 372, 1000])
    │   │   ├─ emit RerollFulfilled(drawId: 4, astroId: 1, traitNumber: 0, rolledNumber: 166)
    │   │   └─ ← [Stop] 
    │   ├─ emit RandomWordsFulfilled(requestId: 4, outputSeed: 4, payment: 170846000000 [1.708e11], success: true)
    │   └─ ← [Stop] 
    ├─ [0] VM::startPrank(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   └─ ← [Return] 
    ├─ [2879] ReelVRF::getNextRerollPrice(1) [staticcall]
    │   └─ ← [Return] 3000000000000000000000 [3e21]
    ├─ [0] console::log(3000000000000000000000 [3e21], "rerollCost") [staticcall]
    │   └─ ← [Stop] 
    ├─ [234972] ReelVRF::rerollTrait(1, 0)
    │   ├─ [45665] VRFCoordinatorV2Mock::requestRandomWords(0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, 1, 3, 2500000 [2.5e6], 1)
    │   │   ├─ emit RandomWordsRequested(keyHash: 0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, requestId: 5, preSeed: 104, subId: 1, minimumRequestConfirmations: 3, callbackGasLimit: 2500000 [2.5e6], numWords: 1, sender: ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   │   └─ ← [Return] 5
    │   ├─ emit DrawRequest(drawId: 5, requestId: 5, requestAddress: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   ├─ [15093] 0x249cA82617eC3DfB2589c4c17ab7EC9765350a18::transferFrom(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], 3000000000000000000000 [3e21])
    │   │   ├─ emit Transfer(from: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, to: ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], value: 3000000000000000000000 [3e21])
    │   │   └─ ← [Return] true
    │   ├─ emit RerollRequested(astroId: 1, traitId: 0, rerollCount: 3, rerollPrice: 3000000000000000000000 [3e21])
    │   └─ ← [Stop] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [84826] VRFCoordinatorV2Mock::fulfillRandomWords(5, ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   ├─ [43843] ReelVRF::rawFulfillRandomWords(5, [19511599891424801449367108142964227787403202039135897967463264740723690140170 [1.951e76]])
    │   │   ├─ emit RerollDone(astroId: 1, numbers: [171, 600, 137, 701, 326, 372, 1000])
    │   │   ├─ emit RerollFulfilled(drawId: 5, astroId: 1, traitNumber: 0, rolledNumber: 171)
    │   │   └─ ← [Stop] 
    │   ├─ emit RandomWordsFulfilled(requestId: 5, outputSeed: 5, payment: 170846000000 [1.708e11], success: true)
    │   └─ ← [Stop] 
    ├─ [0] VM::startPrank(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   └─ ← [Return] 
    ├─ [2879] ReelVRF::getNextRerollPrice(1) [staticcall]
    │   └─ ← [Return] 8000000000000000000000 [8e21]
    ├─ [0] console::log(8000000000000000000000 [8e21], "rerollCost") [staticcall]
    │   └─ ← [Stop] 
    ├─ [234972] ReelVRF::rerollTrait(1, 0)
    │   ├─ [45665] VRFCoordinatorV2Mock::requestRandomWords(0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, 1, 3, 2500000 [2.5e6], 1)
    │   │   ├─ emit RandomWordsRequested(keyHash: 0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, requestId: 6, preSeed: 105, subId: 1, minimumRequestConfirmations: 3, callbackGasLimit: 2500000 [2.5e6], numWords: 1, sender: ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   │   └─ ← [Return] 6
    │   ├─ emit DrawRequest(drawId: 6, requestId: 6, requestAddress: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   ├─ [15093] 0x249cA82617eC3DfB2589c4c17ab7EC9765350a18::transferFrom(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], 8000000000000000000000 [8e21])
    │   │   ├─ emit Transfer(from: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, to: ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], value: 8000000000000000000000 [8e21])
    │   │   └─ ← [Return] true
    │   ├─ emit RerollRequested(astroId: 1, traitId: 0, rerollCount: 4, rerollPrice: 8000000000000000000000 [8e21])
    │   └─ ← [Stop] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [84826] VRFCoordinatorV2Mock::fulfillRandomWords(6, ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   ├─ [43843] ReelVRF::rawFulfillRandomWords(6, [44355349372257074959598820724407765760752581458598127991279639756049881788605 [4.435e76]])
    │   │   ├─ emit RerollDone(astroId: 1, numbers: [606, 600, 137, 701, 326, 372, 1000])
    │   │   ├─ emit RerollFulfilled(drawId: 6, astroId: 1, traitNumber: 0, rolledNumber: 606)
    │   │   └─ ← [Stop] 
    │   ├─ emit RandomWordsFulfilled(requestId: 6, outputSeed: 6, payment: 170846000000 [1.708e11], success: true)
    │   └─ ← [Stop] 
    ├─ [0] VM::startPrank(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   └─ ← [Return] 
    ├─ [2879] ReelVRF::getNextRerollPrice(1) [staticcall]
    │   └─ ← [Return] 16000000000000000000000 [1.6e22]
    ├─ [0] console::log(16000000000000000000000 [1.6e22], "rerollCost") [staticcall]
    │   └─ ← [Stop] 
    ├─ [234972] ReelVRF::rerollTrait(1, 0)
    │   ├─ [45665] VRFCoordinatorV2Mock::requestRandomWords(0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, 1, 3, 2500000 [2.5e6], 1)
    │   │   ├─ emit RandomWordsRequested(keyHash: 0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, requestId: 7, preSeed: 106, subId: 1, minimumRequestConfirmations: 3, callbackGasLimit: 2500000 [2.5e6], numWords: 1, sender: ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   │   └─ ← [Return] 7
    │   ├─ emit DrawRequest(drawId: 7, requestId: 7, requestAddress: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   ├─ [15093] 0x249cA82617eC3DfB2589c4c17ab7EC9765350a18::transferFrom(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], 16000000000000000000000 [1.6e22])
    │   │   ├─ emit Transfer(from: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, to: ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], value: 16000000000000000000000 [1.6e22])
    │   │   └─ ← [Return] true
    │   ├─ emit RerollRequested(astroId: 1, traitId: 0, rerollCount: 5, rerollPrice: 16000000000000000000000 [1.6e22])
    │   └─ ← [Stop] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [84826] VRFCoordinatorV2Mock::fulfillRandomWords(7, ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   ├─ [43843] ReelVRF::rawFulfillRandomWords(7, [61066341240856734250200229908154867864480630679181913661669668597419326467371 [6.106e76]])
    │   │   ├─ emit RerollDone(astroId: 1, numbers: [372, 600, 137, 701, 326, 372, 1000])
    │   │   ├─ emit RerollFulfilled(drawId: 7, astroId: 1, traitNumber: 0, rolledNumber: 372)
    │   │   └─ ← [Stop] 
    │   ├─ emit RandomWordsFulfilled(requestId: 7, outputSeed: 7, payment: 170846000000 [1.708e11], success: true)
    │   └─ ← [Stop] 
    ├─ [0] VM::startPrank(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   └─ ← [Return] 
    ├─ [2879] ReelVRF::getNextRerollPrice(1) [staticcall]
    │   └─ ← [Return] 26000000000000000000000 [2.6e22]
    ├─ [0] console::log(26000000000000000000000 [2.6e22], "rerollCost") [staticcall]
    │   └─ ← [Stop] 
    ├─ [234972] ReelVRF::rerollTrait(1, 0)
    │   ├─ [45665] VRFCoordinatorV2Mock::requestRandomWords(0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, 1, 3, 2500000 [2.5e6], 1)
    │   │   ├─ emit RandomWordsRequested(keyHash: 0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, requestId: 8, preSeed: 107, subId: 1, minimumRequestConfirmations: 3, callbackGasLimit: 2500000 [2.5e6], numWords: 1, sender: ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   │   └─ ← [Return] 8
    │   ├─ emit DrawRequest(drawId: 8, requestId: 8, requestAddress: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   ├─ [15093] 0x249cA82617eC3DfB2589c4c17ab7EC9765350a18::transferFrom(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], 26000000000000000000000 [2.6e22])
    │   │   ├─ emit Transfer(from: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, to: ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], value: 26000000000000000000000 [2.6e22])
    │   │   └─ ← [Return] true
    │   ├─ emit RerollRequested(astroId: 1, traitId: 0, rerollCount: 6, rerollPrice: 26000000000000000000000 [2.6e22])
    │   └─ ← [Stop] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [84826] VRFCoordinatorV2Mock::fulfillRandomWords(8, ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   ├─ [43843] ReelVRF::rawFulfillRandomWords(8, [41407063523202153779201919856959745600407059861221559387013478471919977319996 [4.14e76]])
    │   │   ├─ emit RerollDone(astroId: 1, numbers: [997, 600, 137, 701, 326, 372, 1000])
    │   │   ├─ emit RerollFulfilled(drawId: 8, astroId: 1, traitNumber: 0, rolledNumber: 997)
    │   │   └─ ← [Stop] 
    │   ├─ emit RandomWordsFulfilled(requestId: 8, outputSeed: 8, payment: 170846000000 [1.708e11], success: true)
    │   └─ ← [Stop] 
    ├─ [0] VM::startPrank(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   └─ ← [Return] 
    ├─ [2879] ReelVRF::getNextRerollPrice(1) [staticcall]
    │   └─ ← [Return] 40000000000000000000000 [4e22]
    ├─ [0] console::log(40000000000000000000000 [4e22], "rerollCost") [staticcall]
    │   └─ ← [Stop] 
    ├─ [234972] ReelVRF::rerollTrait(1, 0)
    │   ├─ [45665] VRFCoordinatorV2Mock::requestRandomWords(0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, 1, 3, 2500000 [2.5e6], 1)
    │   │   ├─ emit RandomWordsRequested(keyHash: 0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, requestId: 9, preSeed: 108, subId: 1, minimumRequestConfirmations: 3, callbackGasLimit: 2500000 [2.5e6], numWords: 1, sender: ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   │   └─ ← [Return] 9
    │   ├─ emit DrawRequest(drawId: 9, requestId: 9, requestAddress: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   ├─ [15093] 0x249cA82617eC3DfB2589c4c17ab7EC9765350a18::transferFrom(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], 40000000000000000000000 [4e22])
    │   │   ├─ emit Transfer(from: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, to: ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], value: 40000000000000000000000 [4e22])
    │   │   └─ ← [Return] true
    │   ├─ emit RerollRequested(astroId: 1, traitId: 0, rerollCount: 7, rerollPrice: 40000000000000000000000 [4e22])
    │   └─ ← [Stop] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [84826] VRFCoordinatorV2Mock::fulfillRandomWords(9, ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   ├─ [43843] ReelVRF::rawFulfillRandomWords(9, [22756765779589845761170775236260874230900367805402455632653690919156678150133 [2.275e76]])
    │   │   ├─ emit RerollDone(astroId: 1, numbers: [134, 600, 137, 701, 326, 372, 1000])
    │   │   ├─ emit RerollFulfilled(drawId: 9, astroId: 1, traitNumber: 0, rolledNumber: 134)
    │   │   └─ ← [Stop] 
    │   ├─ emit RandomWordsFulfilled(requestId: 9, outputSeed: 9, payment: 170846000000 [1.708e11], success: true)
    │   └─ ← [Stop] 
    ├─ [0] VM::startPrank(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   └─ ← [Return] 
    ├─ [2879] ReelVRF::getNextRerollPrice(1) [staticcall]
    │   └─ ← [Return] 100000000000000000000000 [1e23]
    ├─ [0] console::log(100000000000000000000000 [1e23], "rerollCost") [staticcall]
    │   └─ ← [Stop] 
    ├─ [234972] ReelVRF::rerollTrait(1, 0)
    │   ├─ [45665] VRFCoordinatorV2Mock::requestRandomWords(0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, 1, 3, 2500000 [2.5e6], 1)
    │   │   ├─ emit RandomWordsRequested(keyHash: 0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, requestId: 10, preSeed: 109, subId: 1, minimumRequestConfirmations: 3, callbackGasLimit: 2500000 [2.5e6], numWords: 1, sender: ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   │   └─ ← [Return] 10
    │   ├─ emit DrawRequest(drawId: 10, requestId: 10, requestAddress: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   ├─ [15093] 0x249cA82617eC3DfB2589c4c17ab7EC9765350a18::transferFrom(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], 100000000000000000000000 [1e23])
    │   │   ├─ emit Transfer(from: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, to: ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], value: 100000000000000000000000 [1e23])
    │   │   └─ ← [Return] true
    │   ├─ emit RerollRequested(astroId: 1, traitId: 0, rerollCount: 8, rerollPrice: 100000000000000000000000 [1e23])
    │   └─ ← [Stop] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [84826] VRFCoordinatorV2Mock::fulfillRandomWords(10, ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   ├─ [43843] ReelVRF::rawFulfillRandomWords(10, [28316780231992663356899387360795050299752000032466988729594309499906746629572 [2.831e76]])
    │   │   ├─ emit RerollDone(astroId: 1, numbers: [573, 600, 137, 701, 326, 372, 1000])
    │   │   ├─ emit RerollFulfilled(drawId: 10, astroId: 1, traitNumber: 0, rolledNumber: 573)
    │   │   └─ ← [Stop] 
    │   ├─ emit RandomWordsFulfilled(requestId: 10, outputSeed: 10, payment: 170846000000 [1.708e11], success: true)
    │   └─ ← [Stop] 
    ├─ [0] VM::startPrank(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   └─ ← [Return] 
    ├─ [2879] ReelVRF::getNextRerollPrice(1) [staticcall]
    │   └─ ← [Return] 150000000000000000000000 [1.5e23]
    ├─ [0] console::log(150000000000000000000000 [1.5e23], "rerollCost") [staticcall]
    │   └─ ← [Stop] 
    ├─ [234972] ReelVRF::rerollTrait(1, 0)
    │   ├─ [45665] VRFCoordinatorV2Mock::requestRandomWords(0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, 1, 3, 2500000 [2.5e6], 1)
    │   │   ├─ emit RandomWordsRequested(keyHash: 0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, requestId: 11, preSeed: 110, subId: 1, minimumRequestConfirmations: 3, callbackGasLimit: 2500000 [2.5e6], numWords: 1, sender: ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   │   └─ ← [Return] 11
    │   ├─ emit DrawRequest(drawId: 11, requestId: 11, requestAddress: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   ├─ [15093] 0x249cA82617eC3DfB2589c4c17ab7EC9765350a18::transferFrom(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], 150000000000000000000000 [1.5e23])
    │   │   ├─ emit Transfer(from: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, to: ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], value: 150000000000000000000000 [1.5e23])
    │   │   └─ ← [Return] true
    │   ├─ emit RerollRequested(astroId: 1, traitId: 0, rerollCount: 9, rerollPrice: 150000000000000000000000 [1.5e23])
    │   └─ ← [Stop] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [84826] VRFCoordinatorV2Mock::fulfillRandomWords(11, ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   ├─ [43843] ReelVRF::rawFulfillRandomWords(11, [65623166409519056520994908395722833037654924088690886984408315243991923873190 [6.562e76]])
    │   │   ├─ emit RerollDone(astroId: 1, numbers: [191, 600, 137, 701, 326, 372, 1000])
    │   │   ├─ emit RerollFulfilled(drawId: 11, astroId: 1, traitNumber: 0, rolledNumber: 191)
    │   │   └─ ← [Stop] 
    │   ├─ emit RandomWordsFulfilled(requestId: 11, outputSeed: 11, payment: 170846000000 [1.708e11], success: true)
    │   └─ ← [Stop] 
    ├─ [0] VM::startPrank(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   └─ ← [Return] 
    ├─ [2879] ReelVRF::getNextRerollPrice(1) [staticcall]
    │   └─ ← [Return] 200000000000000000000000 [2e23]
    ├─ [0] console::log(200000000000000000000000 [2e23], "rerollCost") [staticcall]
    │   └─ ← [Stop] 
    ├─ [234972] ReelVRF::rerollTrait(1, 0)
    │   ├─ [45665] VRFCoordinatorV2Mock::requestRandomWords(0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, 1, 3, 2500000 [2.5e6], 1)
    │   │   ├─ emit RandomWordsRequested(keyHash: 0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, requestId: 12, preSeed: 111, subId: 1, minimumRequestConfirmations: 3, callbackGasLimit: 2500000 [2.5e6], numWords: 1, sender: ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   │   └─ ← [Return] 12
    │   ├─ emit DrawRequest(drawId: 12, requestId: 12, requestAddress: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   ├─ [15093] 0x249cA82617eC3DfB2589c4c17ab7EC9765350a18::transferFrom(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], 200000000000000000000000 [2e23])
    │   │   ├─ emit Transfer(from: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, to: ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], value: 200000000000000000000000 [2e23])
    │   │   └─ ← [Return] true
    │   ├─ emit RerollRequested(astroId: 1, traitId: 0, rerollCount: 10, rerollPrice: 200000000000000000000000 [2e23])
    │   └─ ← [Stop] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [84826] VRFCoordinatorV2Mock::fulfillRandomWords(12, ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   ├─ [43843] ReelVRF::rawFulfillRandomWords(12, [94376770707860800088818712292414780952038890326714099953771676889341176737887 [9.437e76]])
    │   │   ├─ emit RerollDone(astroId: 1, numbers: [888, 600, 137, 701, 326, 372, 1000])
    │   │   ├─ emit RerollFulfilled(drawId: 12, astroId: 1, traitNumber: 0, rolledNumber: 888)
    │   │   └─ ← [Stop] 
    │   ├─ emit RandomWordsFulfilled(requestId: 12, outputSeed: 12, payment: 170846000000 [1.708e11], success: true)
    │   └─ ← [Stop] 
    ├─ [0] VM::startPrank(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   └─ ← [Return] 
    ├─ [2879] ReelVRF::getNextRerollPrice(1) [staticcall]
    │   └─ ← [Return] 500000000000000000000000 [5e23]
    ├─ [0] console::log(500000000000000000000000 [5e23], "rerollCost") [staticcall]
    │   └─ ← [Stop] 
    ├─ [232006] ReelVRF::rerollTrait(1, 0)
    │   ├─ [45665] VRFCoordinatorV2Mock::requestRandomWords(0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, 1, 3, 2500000 [2.5e6], 1)
    │   │   ├─ emit RandomWordsRequested(keyHash: 0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, requestId: 13, preSeed: 112, subId: 1, minimumRequestConfirmations: 3, callbackGasLimit: 2500000 [2.5e6], numWords: 1, sender: ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   │   └─ ← [Return] 13
    │   ├─ emit DrawRequest(drawId: 13, requestId: 13, requestAddress: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   ├─ [15093] 0x249cA82617eC3DfB2589c4c17ab7EC9765350a18::transferFrom(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], 500000000000000000000000 [5e23])
    │   │   ├─ emit Transfer(from: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, to: ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], value: 500000000000000000000000 [5e23])
    │   │   └─ ← [Return] true
    │   ├─ emit RerollRequested(astroId: 1, traitId: 0, rerollCount: 11, rerollPrice: 500000000000000000000000 [5e23])
    │   └─ ← [Stop] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [84826] VRFCoordinatorV2Mock::fulfillRandomWords(13, ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   ├─ [43843] ReelVRF::rawFulfillRandomWords(13, [56379375082099018722056789168509866372749978077076306672312729015938096605403 [5.637e76]])
    │   │   ├─ emit RerollDone(astroId: 1, numbers: [404, 600, 137, 701, 326, 372, 1000])
    │   │   ├─ emit RerollFulfilled(drawId: 13, astroId: 1, traitNumber: 0, rolledNumber: 404)
    │   │   └─ ← [Stop] 
    │   ├─ emit RandomWordsFulfilled(requestId: 13, outputSeed: 13, payment: 170846000000 [1.708e11], success: true)
    │   └─ ← [Stop] 
    ├─ [0] VM::startPrank(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   └─ ← [Return] 
    ├─ [879] ReelVRF::getNextRerollPrice(1) [staticcall]
    │   └─ ← [Return] 500000000000000000000000 [5e23]
    ├─ [0] console::log(500000000000000000000000 [5e23], "rerollCost") [staticcall]
    │   └─ ← [Stop] 
    ├─ [232006] ReelVRF::rerollTrait(1, 0)
    │   ├─ [45665] VRFCoordinatorV2Mock::requestRandomWords(0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, 1, 3, 2500000 [2.5e6], 1)
    │   │   ├─ emit RandomWordsRequested(keyHash: 0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, requestId: 14, preSeed: 113, subId: 1, minimumRequestConfirmations: 3, callbackGasLimit: 2500000 [2.5e6], numWords: 1, sender: ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   │   └─ ← [Return] 14
    │   ├─ emit DrawRequest(drawId: 14, requestId: 14, requestAddress: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   ├─ [15093] 0x249cA82617eC3DfB2589c4c17ab7EC9765350a18::transferFrom(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], 500000000000000000000000 [5e23])
    │   │   ├─ emit Transfer(from: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, to: ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], value: 500000000000000000000000 [5e23])
    │   │   └─ ← [Return] true
    │   ├─ emit RerollRequested(astroId: 1, traitId: 0, rerollCount: 11, rerollPrice: 500000000000000000000000 [5e23])
    │   └─ ← [Stop] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [84826] VRFCoordinatorV2Mock::fulfillRandomWords(14, ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   ├─ [43843] ReelVRF::rawFulfillRandomWords(14, [105721182380816668089674224688318176007599331474316895725595425372587271692089 [1.057e77]])
    │   │   ├─ emit RerollDone(astroId: 1, numbers: [90, 600, 137, 701, 326, 372, 1000])
    │   │   ├─ emit RerollFulfilled(drawId: 14, astroId: 1, traitNumber: 0, rolledNumber: 90)
    │   │   └─ ← [Stop] 
    │   ├─ emit RandomWordsFulfilled(requestId: 14, outputSeed: 14, payment: 170846000000 [1.708e11], success: true)
    │   └─ ← [Stop] 
    ├─ [0] VM::startPrank(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   └─ ← [Return] 
    ├─ [879] ReelVRF::getNextRerollPrice(1) [staticcall]
    │   └─ ← [Return] 500000000000000000000000 [5e23]
    ├─ [0] console::log(500000000000000000000000 [5e23], "rerollCost") [staticcall]
    │   └─ ← [Stop] 
    ├─ [232006] ReelVRF::rerollTrait(1, 0)
    │   ├─ [45665] VRFCoordinatorV2Mock::requestRandomWords(0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, 1, 3, 2500000 [2.5e6], 1)
    │   │   ├─ emit RandomWordsRequested(keyHash: 0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, requestId: 15, preSeed: 114, subId: 1, minimumRequestConfirmations: 3, callbackGasLimit: 2500000 [2.5e6], numWords: 1, sender: ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   │   └─ ← [Return] 15
    │   ├─ emit DrawRequest(drawId: 15, requestId: 15, requestAddress: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   ├─ [15093] 0x249cA82617eC3DfB2589c4c17ab7EC9765350a18::transferFrom(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], 500000000000000000000000 [5e23])
    │   │   ├─ emit Transfer(from: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, to: ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], value: 500000000000000000000000 [5e23])
    │   │   └─ ← [Return] true
    │   ├─ emit RerollRequested(astroId: 1, traitId: 0, rerollCount: 11, rerollPrice: 500000000000000000000000 [5e23])
    │   └─ ← [Stop] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [84826] VRFCoordinatorV2Mock::fulfillRandomWords(15, ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   ├─ [43843] ReelVRF::rawFulfillRandomWords(15, [53017671164176843150973674479173729470979484940492797662099425467806500645382 [5.301e76]])
    │   │   ├─ emit RerollDone(astroId: 1, numbers: [383, 600, 137, 701, 326, 372, 1000])
    │   │   ├─ emit RerollFulfilled(drawId: 15, astroId: 1, traitNumber: 0, rolledNumber: 383)
    │   │   └─ ← [Stop] 
    │   ├─ emit RandomWordsFulfilled(requestId: 15, outputSeed: 15, payment: 170846000000 [1.708e11], success: true)
    │   └─ ← [Stop] 
    └─ ← [Stop] 

[PASS] testRerollTrait() (gas: 1665488)
Traces:
  [1665488] TestReelVRF_MAINNET::testRerollTrait()
    ├─ [2385] ReelVRF::baseCost() [staticcall]
    │   └─ ← [Return] 3000000000000000000000 [3e21]
    ├─ [0] VM::startPrank(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   └─ ← [Return] 
    ├─ [46218] 0x249cA82617eC3DfB2589c4c17ab7EC9765350a18::approve(ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], 3000000000000000000000 [3e21])
    │   ├─ emit Approval(owner: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, spender: ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], value: 3000000000000000000000 [3e21])
    │   └─ ← [Return] true
    ├─ [2383] ReelVRF::latestCharacterId() [staticcall]
    │   └─ ← [Return] 0
    ├─ [4698] ReelVRF::isMinted(1) [staticcall]
    │   └─ ← [Return] false
    ├─ [414252] ReelVRF::buyCharacter()
    │   ├─ [35454] 0x249cA82617eC3DfB2589c4c17ab7EC9765350a18::transferFrom(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], 3000000000000000000000 [3e21])
    │   │   ├─ emit Transfer(from: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, to: ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], value: 3000000000000000000000 [3e21])
    │   │   └─ ← [Return] true
    │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, tokenId: 1)
    │   ├─ [45665] VRFCoordinatorV2Mock::requestRandomWords(0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, 1, 3, 2500000 [2.5e6], 7)
    │   │   ├─ emit RandomWordsRequested(keyHash: 0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, requestId: 1, preSeed: 100, subId: 1, minimumRequestConfirmations: 3, callbackGasLimit: 2500000 [2.5e6], numWords: 7, sender: ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   │   └─ ← [Return] 1
    │   ├─ emit DrawRequest(drawId: 1, requestId: 1, requestAddress: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   └─ ← [Stop] 
    ├─ [698] ReelVRF::isMinted(1) [staticcall]
    │   └─ ← [Return] true
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [1109] ReelVRF::requestIdToDrawing(1) [staticcall]
    │   └─ ← [Return] 0, 0x0000000000000000000000000000000000000001
    ├─ [383] ReelVRF::latestCharacterId() [staticcall]
    │   └─ ← [Return] 1
    ├─ [241666] VRFCoordinatorV2Mock::fulfillRandomWords(1, ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   ├─ [201507] ReelVRF::rawFulfillRandomWords(1, [78541660797044910968829902406342334108369226379826116161446442989268089806461 [7.854e76], 92458281274488595289803937127152923398167637295201432141969818930235769911599 [9.245e76], 105409183525425523237923285454331214386340807945685310246717412709691342439136 [1.054e77], 72984518589826227531578991903372844090998219903258077796093728159832249402700 [7.298e76], 77725202164364049732730867459915098663759625749236281158857587643401898360325 [7.772e76], 9247535584797915451057180664748820695544591120644449140157971996739901653371 [9.247e75], 28212876883947467128917703474378516019173305230661588919942657668795042982449 [2.821e76]])
    │   │   ├─ emit InitialMint(astroId: 1, numbers: [462, 600, 137, 701, 326, 372, 450])
    │   │   ├─ emit RequestFulfilled(drawId: 1, requestId: 1, resultValue: 0x3e75ee913510d066e9ea18095530b1d27513829e91165221538a0b5ff6534b6b)
    │   │   └─ ← [Stop] 
    │   ├─ emit RandomWordsFulfilled(requestId: 1, outputSeed: 1, payment: 331180000000 [3.311e11], success: true)
    │   └─ ← [Stop] 
    ├─ [383] ReelVRF::latestCharacterId() [staticcall]
    │   └─ ← [Return] 1
    ├─ [747] ReelVRF::results(1, 0) [staticcall]
    │   └─ ← [Return] 462
    ├─ [2644] ReelVRF::getTraitIds(1) [staticcall]
    │   └─ ← [Return] [462, 600, 137, 701, 326, 372, 1000]
    ├─ [2559] ReelVRF::rerollInProgress(1) [staticcall]
    │   └─ ← [Return] false
    ├─ [0] VM::expectRevert(CommonNFT: INVALID_OWNER)
    │   └─ ← [Return] 
    ├─ [28335] ReelVRF::rerollTrait(1, 0)
    │   └─ ← [Revert] revert: CommonNFT: INVALID_OWNER
    ├─ [0] VM::startPrank(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   └─ ← [Return] 
    ├─ [6879] ReelVRF::getNextRerollPrice(1) [staticcall]
    │   └─ ← [Return] 0
    ├─ [26234] 0x249cA82617eC3DfB2589c4c17ab7EC9765350a18::approve(ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], 0)
    │   ├─ emit Approval(owner: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, spender: ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], value: 0)
    │   └─ ← [Return] true
    ├─ [337] ReelVRF::MAX_TRAIT_TYPES() [staticcall]
    │   └─ ← [Return] 7
    ├─ [0] VM::expectRevert(ReelVRF: InvalidTraitId)
    │   └─ ← [Return] 
    ├─ [28370] ReelVRF::rerollTrait(1, 8)
    │   └─ ← [Revert] revert: ReelVRF: InvalidTraitId
    ├─ [321657] ReelVRF::getTraitNames(1) [staticcall]
    │   └─ ← [Return] Character({ backgroundColor: "Saffron Sunrise", backType: "Armored Pack", bodyType: "Gravitas Shade", gearType: "Leafline Hoodie", headType: "Star Visor", extraType: "None", saleBadge: "None" })
    ├─ [232961] ReelVRF::rerollTrait(1, 0)
    │   ├─ [45665] VRFCoordinatorV2Mock::requestRandomWords(0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, 1, 3, 2500000 [2.5e6], 1)
    │   │   ├─ emit RandomWordsRequested(keyHash: 0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, requestId: 2, preSeed: 101, subId: 1, minimumRequestConfirmations: 3, callbackGasLimit: 2500000 [2.5e6], numWords: 1, sender: ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   │   └─ ← [Return] 2
    │   ├─ emit DrawRequest(drawId: 2, requestId: 2, requestAddress: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   ├─ emit RerollRequested(astroId: 1, traitId: 0, rerollCount: 0, rerollPrice: 0)
    │   └─ ← [Stop] 
    ├─ [559] ReelVRF::rerollInProgress(1) [staticcall]
    │   └─ ← [Return] true
    ├─ [0] VM::expectRevert(RerollInProgress())
    │   └─ ← [Return] 
    ├─ [34883] ReelVRF::rerollTrait(1, 0)
    │   └─ ← [Revert] RerollInProgress()
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [84826] VRFCoordinatorV2Mock::fulfillRandomWords(2, ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   ├─ [43843] ReelVRF::rawFulfillRandomWords(2, [77676537065960878698898692042018114106337750925255485067533933387271373890921 [7.767e76]])
    │   │   ├─ emit RerollDone(astroId: 1, numbers: [922, 600, 137, 701, 326, 372, 1000])
    │   │   ├─ emit RerollFulfilled(drawId: 2, astroId: 1, traitNumber: 0, rolledNumber: 922)
    │   │   └─ ← [Stop] 
    │   ├─ emit RandomWordsFulfilled(requestId: 2, outputSeed: 2, payment: 170846000000 [1.708e11], success: true)
    │   └─ ← [Stop] 
    ├─ [186892] ReelVRF::getTraitNames(1) [staticcall]
    │   └─ ← [Return] Character({ backgroundColor: "Nigerian Abuja Gate", backType: "Armored Pack", bodyType: "Gravitas Shade", gearType: "Leafline Hoodie", headType: "Star Visor", extraType: "None", saleBadge: "None" })
    ├─ [559] ReelVRF::rerollInProgress(1) [staticcall]
    │   └─ ← [Return] false
    ├─ [2644] ReelVRF::getTraitIds(1) [staticcall]
    │   └─ ← [Return] [922, 600, 137, 701, 326, 372, 1000]
    └─ ← [Stop] 

[PASS] testSetPublicMinting() (gas: 587512)
Traces:
  [587512] TestReelVRF_MAINNET::testSetPublicMinting()
    ├─ [0] VM::startPrank(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   └─ ← [Return] 
    ├─ [0] VM::expectRevert(NotMaster())
    │   └─ ← [Return] 
    ├─ [23743] ReelVRF::setPublicMinting(false)
    │   └─ ← [Revert] NotMaster()
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [23965] ReelVRF::setPublicMinting(false)
    │   └─ ← [Stop] 
    ├─ [0] VM::expectRevert(PublicMintingNotActive())
    │   └─ ← [Return] 
    ├─ [25655] ReelVRF::buyCharacter()
    │   └─ ← [Revert] PublicMintingNotActive()
    ├─ [45877] ReelVRF::setPublicMinting(true)
    │   └─ ← [Stop] 
    ├─ [2385] ReelVRF::baseCost() [staticcall]
    │   └─ ← [Return] 3000000000000000000000 [3e21]
    ├─ [0] VM::startPrank(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   └─ ← [Return] 
    ├─ [46218] 0x249cA82617eC3DfB2589c4c17ab7EC9765350a18::approve(ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], 3000000000000000000000 [3e21])
    │   ├─ emit Approval(owner: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, spender: ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], value: 3000000000000000000000 [3e21])
    │   └─ ← [Return] true
    ├─ [414252] ReelVRF::buyCharacter()
    │   ├─ [35454] 0x249cA82617eC3DfB2589c4c17ab7EC9765350a18::transferFrom(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], 3000000000000000000000 [3e21])
    │   │   ├─ emit Transfer(from: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, to: ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], value: 3000000000000000000000 [3e21])
    │   │   └─ ← [Return] true
    │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, tokenId: 1)
    │   ├─ [45665] VRFCoordinatorV2Mock::requestRandomWords(0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, 1, 3, 2500000 [2.5e6], 7)
    │   │   ├─ emit RandomWordsRequested(keyHash: 0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, requestId: 1, preSeed: 100, subId: 1, minimumRequestConfirmations: 3, callbackGasLimit: 2500000 [2.5e6], numWords: 7, sender: ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   │   └─ ← [Return] 1
    │   ├─ emit DrawRequest(drawId: 1, requestId: 1, requestAddress: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   └─ ← [Stop] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    └─ ← [Stop] 

[PASS] testSubscription() (gas: 5634)
Traces:
  [5634] TestReelVRF_MAINNET::testSubscription()
    ├─ [339] ReelVRF::SUBSCRIPTION_ID() [staticcall]
    │   └─ ← [Return] 1
    └─ ← [Stop] 

[PASS] testTokenURI() (gas: 700847)
Traces:
  [700847] TestReelVRF_MAINNET::testTokenURI()
    ├─ [2385] ReelVRF::baseCost() [staticcall]
    │   └─ ← [Return] 3000000000000000000000 [3e21]
    ├─ [0] VM::startPrank(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   └─ ← [Return] 
    ├─ [46218] 0x249cA82617eC3DfB2589c4c17ab7EC9765350a18::approve(ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], 3000000000000000000000 [3e21])
    │   ├─ emit Approval(owner: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, spender: ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], value: 3000000000000000000000 [3e21])
    │   └─ ← [Return] true
    ├─ [414252] ReelVRF::buyCharacter()
    │   ├─ [35454] 0x249cA82617eC3DfB2589c4c17ab7EC9765350a18::transferFrom(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], 3000000000000000000000 [3e21])
    │   │   ├─ emit Transfer(from: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, to: ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], value: 3000000000000000000000 [3e21])
    │   │   └─ ← [Return] true
    │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, tokenId: 1)
    │   ├─ [45665] VRFCoordinatorV2Mock::requestRandomWords(0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, 1, 3, 2500000 [2.5e6], 7)
    │   │   ├─ emit RandomWordsRequested(keyHash: 0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, requestId: 1, preSeed: 100, subId: 1, minimumRequestConfirmations: 3, callbackGasLimit: 2500000 [2.5e6], numWords: 7, sender: ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   │   └─ ← [Return] 1
    │   ├─ emit DrawRequest(drawId: 1, requestId: 1, requestAddress: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   └─ ← [Stop] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [241666] VRFCoordinatorV2Mock::fulfillRandomWords(1, ReelVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   ├─ [201507] ReelVRF::rawFulfillRandomWords(1, [78541660797044910968829902406342334108369226379826116161446442989268089806461 [7.854e76], 92458281274488595289803937127152923398167637295201432141969818930235769911599 [9.245e76], 105409183525425523237923285454331214386340807945685310246717412709691342439136 [1.054e77], 72984518589826227531578991903372844090998219903258077796093728159832249402700 [7.298e76], 77725202164364049732730867459915098663759625749236281158857587643401898360325 [7.772e76], 9247535584797915451057180664748820695544591120644449140157971996739901653371 [9.247e75], 28212876883947467128917703474378516019173305230661588919942657668795042982449 [2.821e76]])
    │   │   ├─ emit InitialMint(astroId: 1, numbers: [462, 600, 137, 701, 326, 372, 450])
    │   │   ├─ emit RequestFulfilled(drawId: 1, requestId: 1, resultValue: 0x3e75ee913510d066e9ea18095530b1d27513829e91165221538a0b5ff6534b6b)
    │   │   └─ ← [Stop] 
    │   ├─ emit RandomWordsFulfilled(requestId: 1, outputSeed: 1, payment: 331180000000 [3.311e11], success: true)
    │   └─ ← [Stop] 
    ├─ [4132] ReelVRF::tokenURI(1) [staticcall]
    │   └─ ← [Return] "1.json"
    ├─ [0] VM::expectRevert(InvalidId())
    │   └─ ← [Return] 
    ├─ [2718] ReelVRF::tokenURI(0) [staticcall]
    │   └─ ← [Revert] InvalidId()
    └─ ← [Stop] 

[PASS] testUnifrom() (gas: 7399)
Traces:
  [7399] TestReelVRF_MAINNET::testUnifrom()
    ├─ [812] ReelVRF::uniform(1000, 1000) [staticcall]
    │   └─ ← [Return] 1
    ├─ [812] ReelVRF::uniform(1000, 1) [staticcall]
    │   └─ ← [Return] 1
    └─ ← [Stop] 

Suite result: ok. 14 passed; 0 failed; 0 skipped; finished in 2.21s (11.39ms CPU time)

Ran 13 tests for contracts/tests/Mainnet/ScratchVRF.t.sol:TestScratchVRF_MAINNET
[PASS] testBulkPurchase() (gas: 9835953)
Traces:
  [9835953] TestScratchVRF_MAINNET::testBulkPurchase()
    ├─ [2406] ScratchVRF::baseCost() [staticcall]
    │   └─ ← [Return] 3000000000000000000000 [3e21]
    ├─ [0] VM::startPrank(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   └─ ← [Return] 
    ├─ [46230] 0x249cA82617eC3DfB2589c4c17ab7EC9765350a18::approve(ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], 90000000000000000000000 [9e22])
    │   ├─ emit Approval(owner: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, spender: ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], value: 90000000000000000000000 [9e22])
    │   └─ ← [Return] true
    ├─ [3004135] ScratchVRF::bulkPurchase(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 30)
    │   ├─ [18354] 0x249cA82617eC3DfB2589c4c17ab7EC9765350a18::transferFrom(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], 90000000000000000000000 [9e22])
    │   │   ├─ emit Transfer(from: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, to: ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], value: 90000000000000000000000 [9e22])
    │   │   └─ ← [Return] true
    │   ├─ [45665] VRFCoordinatorV2Mock::requestRandomWords(0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, 1, 3, 2500000 [2.5e6], 2)
    │   │   ├─ emit RandomWordsRequested(keyHash: 0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, requestId: 1, preSeed: 100, subId: 1, minimumRequestConfirmations: 3, callbackGasLimit: 2500000 [2.5e6], numWords: 2, sender: ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   │   └─ ← [Return] 1
    │   ├─ emit DrawRequest(drawId: 1, requestId: 1, requestAddress: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   ├─ [28065] VRFCoordinatorV2Mock::requestRandomWords(0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, 1, 3, 2500000 [2.5e6], 2)
    │   │   ├─ emit RandomWordsRequested(keyHash: 0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, requestId: 2, preSeed: 101, subId: 1, minimumRequestConfirmations: 3, callbackGasLimit: 2500000 [2.5e6], numWords: 2, sender: ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   │   └─ ← [Return] 2
    │   ├─ emit DrawRequest(drawId: 2, requestId: 2, requestAddress: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   ├─ [28065] VRFCoordinatorV2Mock::requestRandomWords(0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, 1, 3, 2500000 [2.5e6], 2)
    │   │   ├─ emit RandomWordsRequested(keyHash: 0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, requestId: 3, preSeed: 102, subId: 1, minimumRequestConfirmations: 3, callbackGasLimit: 2500000 [2.5e6], numWords: 2, sender: ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   │   └─ ← [Return] 3
    │   ├─ emit DrawRequest(drawId: 3, requestId: 3, requestAddress: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   ├─ [28065] VRFCoordinatorV2Mock::requestRandomWords(0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, 1, 3, 2500000 [2.5e6], 2)
    │   │   ├─ emit RandomWordsRequested(keyHash: 0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, requestId: 4, preSeed: 103, subId: 1, minimumRequestConfirmations: 3, callbackGasLimit: 2500000 [2.5e6], numWords: 2, sender: ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   │   └─ ← [Return] 4
    │   ├─ emit DrawRequest(drawId: 4, requestId: 4, requestAddress: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   ├─ [28065] VRFCoordinatorV2Mock::requestRandomWords(0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, 1, 3, 2500000 [2.5e6], 2)
    │   │   ├─ emit RandomWordsRequested(keyHash: 0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, requestId: 5, preSeed: 104, subId: 1, minimumRequestConfirmations: 3, callbackGasLimit: 2500000 [2.5e6], numWords: 2, sender: ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   │   └─ ← [Return] 5
    │   ├─ emit DrawRequest(drawId: 5, requestId: 5, requestAddress: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   ├─ [28065] VRFCoordinatorV2Mock::requestRandomWords(0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, 1, 3, 2500000 [2.5e6], 2)
    │   │   ├─ emit RandomWordsRequested(keyHash: 0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, requestId: 6, preSeed: 105, subId: 1, minimumRequestConfirmations: 3, callbackGasLimit: 2500000 [2.5e6], numWords: 2, sender: ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   │   └─ ← [Return] 6
    │   ├─ emit DrawRequest(drawId: 6, requestId: 6, requestAddress: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   ├─ [28065] VRFCoordinatorV2Mock::requestRandomWords(0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, 1, 3, 2500000 [2.5e6], 2)
    │   │   ├─ emit RandomWordsRequested(keyHash: 0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, requestId: 7, preSeed: 106, subId: 1, minimumRequestConfirmations: 3, callbackGasLimit: 2500000 [2.5e6], numWords: 2, sender: ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   │   └─ ← [Return] 7
    │   ├─ emit DrawRequest(drawId: 7, requestId: 7, requestAddress: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   ├─ [28065] VRFCoordinatorV2Mock::requestRandomWords(0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, 1, 3, 2500000 [2.5e6], 2)
    │   │   ├─ emit RandomWordsRequested(keyHash: 0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, requestId: 8, preSeed: 107, subId: 1, minimumRequestConfirmations: 3, callbackGasLimit: 2500000 [2.5e6], numWords: 2, sender: ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   │   └─ ← [Return] 8
    │   ├─ emit DrawRequest(drawId: 8, requestId: 8, requestAddress: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   ├─ [28065] VRFCoordinatorV2Mock::requestRandomWords(0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, 1, 3, 2500000 [2.5e6], 2)
    │   │   ├─ emit RandomWordsRequested(keyHash: 0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, requestId: 9, preSeed: 108, subId: 1, minimumRequestConfirmations: 3, callbackGasLimit: 2500000 [2.5e6], numWords: 2, sender: ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   │   └─ ← [Return] 9
    │   ├─ emit DrawRequest(drawId: 9, requestId: 9, requestAddress: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   ├─ [28065] VRFCoordinatorV2Mock::requestRandomWords(0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, 1, 3, 2500000 [2.5e6], 2)
    │   │   ├─ emit RandomWordsRequested(keyHash: 0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, requestId: 10, preSeed: 109, subId: 1, minimumRequestConfirmations: 3, callbackGasLimit: 2500000 [2.5e6], numWords: 2, sender: ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   │   └─ ← [Return] 10
    │   ├─ emit DrawRequest(drawId: 10, requestId: 10, requestAddress: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   ├─ [28065] VRFCoordinatorV2Mock::requestRandomWords(0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, 1, 3, 2500000 [2.5e6], 2)
    │   │   ├─ emit RandomWordsRequested(keyHash: 0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, requestId: 11, preSeed: 110, subId: 1, minimumRequestConfirmations: 3, callbackGasLimit: 2500000 [2.5e6], numWords: 2, sender: ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   │   └─ ← [Return] 11
    │   ├─ emit DrawRequest(drawId: 11, requestId: 11, requestAddress: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   ├─ [28065] VRFCoordinatorV2Mock::requestRandomWords(0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, 1, 3, 2500000 [2.5e6], 2)
    │   │   ├─ emit RandomWordsRequested(keyHash: 0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, requestId: 12, preSeed: 111, subId: 1, minimumRequestConfirmations: 3, callbackGasLimit: 2500000 [2.5e6], numWords: 2, sender: ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   │   └─ ← [Return] 12
    │   ├─ emit DrawRequest(drawId: 12, requestId: 12, requestAddress: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   ├─ [28065] VRFCoordinatorV2Mock::requestRandomWords(0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, 1, 3, 2500000 [2.5e6], 2)
    │   │   ├─ emit RandomWordsRequested(keyHash: 0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, requestId: 13, preSeed: 112, subId: 1, minimumRequestConfirmations: 3, callbackGasLimit: 2500000 [2.5e6], numWords: 2, sender: ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   │   └─ ← [Return] 13
    │   ├─ emit DrawRequest(drawId: 13, requestId: 13, requestAddress: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   ├─ [28065] VRFCoordinatorV2Mock::requestRandomWords(0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, 1, 3, 2500000 [2.5e6], 2)
    │   │   ├─ emit RandomWordsRequested(keyHash: 0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, requestId: 14, preSeed: 113, subId: 1, minimumRequestConfirmations: 3, callbackGasLimit: 2500000 [2.5e6], numWords: 2, sender: ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   │   └─ ← [Return] 14
    │   ├─ emit DrawRequest(drawId: 14, requestId: 14, requestAddress: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   ├─ [28065] VRFCoordinatorV2Mock::requestRandomWords(0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, 1, 3, 2500000 [2.5e6], 2)
    │   │   ├─ emit RandomWordsRequested(keyHash: 0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, requestId: 15, preSeed: 114, subId: 1, minimumRequestConfirmations: 3, callbackGasLimit: 2500000 [2.5e6], numWords: 2, sender: ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   │   └─ ← [Return] 15
    │   ├─ emit DrawRequest(drawId: 15, requestId: 15, requestAddress: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   ├─ [28065] VRFCoordinatorV2Mock::requestRandomWords(0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, 1, 3, 2500000 [2.5e6], 2)
    │   │   ├─ emit RandomWordsRequested(keyHash: 0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, requestId: 16, preSeed: 115, subId: 1, minimumRequestConfirmations: 3, callbackGasLimit: 2500000 [2.5e6], numWords: 2, sender: ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   │   └─ ← [Return] 16
    │   ├─ emit DrawRequest(drawId: 16, requestId: 16, requestAddress: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   ├─ [28065] VRFCoordinatorV2Mock::requestRandomWords(0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, 1, 3, 2500000 [2.5e6], 2)
    │   │   ├─ emit RandomWordsRequested(keyHash: 0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, requestId: 17, preSeed: 116, subId: 1, minimumRequestConfirmations: 3, callbackGasLimit: 2500000 [2.5e6], numWords: 2, sender: ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   │   └─ ← [Return] 17
    │   ├─ emit DrawRequest(drawId: 17, requestId: 17, requestAddress: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   ├─ [28065] VRFCoordinatorV2Mock::requestRandomWords(0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, 1, 3, 2500000 [2.5e6], 2)
    │   │   ├─ emit RandomWordsRequested(keyHash: 0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, requestId: 18, preSeed: 117, subId: 1, minimumRequestConfirmations: 3, callbackGasLimit: 2500000 [2.5e6], numWords: 2, sender: ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   │   └─ ← [Return] 18
    │   ├─ emit DrawRequest(drawId: 18, requestId: 18, requestAddress: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   ├─ [28065] VRFCoordinatorV2Mock::requestRandomWords(0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, 1, 3, 2500000 [2.5e6], 2)
    │   │   ├─ emit RandomWordsRequested(keyHash: 0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, requestId: 19, preSeed: 118, subId: 1, minimumRequestConfirmations: 3, callbackGasLimit: 2500000 [2.5e6], numWords: 2, sender: ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   │   └─ ← [Return] 19
    │   ├─ emit DrawRequest(drawId: 19, requestId: 19, requestAddress: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   ├─ [28065] VRFCoordinatorV2Mock::requestRandomWords(0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, 1, 3, 2500000 [2.5e6], 2)
    │   │   ├─ emit RandomWordsRequested(keyHash: 0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, requestId: 20, preSeed: 119, subId: 1, minimumRequestConfirmations: 3, callbackGasLimit: 2500000 [2.5e6], numWords: 2, sender: ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   │   └─ ← [Return] 20
    │   ├─ emit DrawRequest(drawId: 20, requestId: 20, requestAddress: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   ├─ [28065] VRFCoordinatorV2Mock::requestRandomWords(0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, 1, 3, 2500000 [2.5e6], 2)
    │   │   ├─ emit RandomWordsRequested(keyHash: 0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, requestId: 21, preSeed: 120, subId: 1, minimumRequestConfirmations: 3, callbackGasLimit: 2500000 [2.5e6], numWords: 2, sender: ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   │   └─ ← [Return] 21
    │   ├─ emit DrawRequest(drawId: 21, requestId: 21, requestAddress: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   ├─ [28065] VRFCoordinatorV2Mock::requestRandomWords(0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, 1, 3, 2500000 [2.5e6], 2)
    │   │   ├─ emit RandomWordsRequested(keyHash: 0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, requestId: 22, preSeed: 121, subId: 1, minimumRequestConfirmations: 3, callbackGasLimit: 2500000 [2.5e6], numWords: 2, sender: ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   │   └─ ← [Return] 22
    │   ├─ emit DrawRequest(drawId: 22, requestId: 22, requestAddress: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   ├─ [28065] VRFCoordinatorV2Mock::requestRandomWords(0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, 1, 3, 2500000 [2.5e6], 2)
    │   │   ├─ emit RandomWordsRequested(keyHash: 0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, requestId: 23, preSeed: 122, subId: 1, minimumRequestConfirmations: 3, callbackGasLimit: 2500000 [2.5e6], numWords: 2, sender: ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   │   └─ ← [Return] 23
    │   ├─ emit DrawRequest(drawId: 23, requestId: 23, requestAddress: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   ├─ [28065] VRFCoordinatorV2Mock::requestRandomWords(0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, 1, 3, 2500000 [2.5e6], 2)
    │   │   ├─ emit RandomWordsRequested(keyHash: 0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, requestId: 24, preSeed: 123, subId: 1, minimumRequestConfirmations: 3, callbackGasLimit: 2500000 [2.5e6], numWords: 2, sender: ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   │   └─ ← [Return] 24
    │   ├─ emit DrawRequest(drawId: 24, requestId: 24, requestAddress: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   ├─ [28065] VRFCoordinatorV2Mock::requestRandomWords(0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, 1, 3, 2500000 [2.5e6], 2)
    │   │   ├─ emit RandomWordsRequested(keyHash: 0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, requestId: 25, preSeed: 124, subId: 1, minimumRequestConfirmations: 3, callbackGasLimit: 2500000 [2.5e6], numWords: 2, sender: ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   │   └─ ← [Return] 25
    │   ├─ emit DrawRequest(drawId: 25, requestId: 25, requestAddress: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   ├─ [28065] VRFCoordinatorV2Mock::requestRandomWords(0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, 1, 3, 2500000 [2.5e6], 2)
    │   │   ├─ emit RandomWordsRequested(keyHash: 0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, requestId: 26, preSeed: 125, subId: 1, minimumRequestConfirmations: 3, callbackGasLimit: 2500000 [2.5e6], numWords: 2, sender: ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   │   └─ ← [Return] 26
    │   ├─ emit DrawRequest(drawId: 26, requestId: 26, requestAddress: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   ├─ [28065] VRFCoordinatorV2Mock::requestRandomWords(0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, 1, 3, 2500000 [2.5e6], 2)
    │   │   ├─ emit RandomWordsRequested(keyHash: 0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, requestId: 27, preSeed: 126, subId: 1, minimumRequestConfirmations: 3, callbackGasLimit: 2500000 [2.5e6], numWords: 2, sender: ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   │   └─ ← [Return] 27
    │   ├─ emit DrawRequest(drawId: 27, requestId: 27, requestAddress: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   ├─ [28065] VRFCoordinatorV2Mock::requestRandomWords(0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, 1, 3, 2500000 [2.5e6], 2)
    │   │   ├─ emit RandomWordsRequested(keyHash: 0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, requestId: 28, preSeed: 127, subId: 1, minimumRequestConfirmations: 3, callbackGasLimit: 2500000 [2.5e6], numWords: 2, sender: ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   │   └─ ← [Return] 28
    │   ├─ emit DrawRequest(drawId: 28, requestId: 28, requestAddress: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   ├─ [28065] VRFCoordinatorV2Mock::requestRandomWords(0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, 1, 3, 2500000 [2.5e6], 2)
    │   │   ├─ emit RandomWordsRequested(keyHash: 0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, requestId: 29, preSeed: 128, subId: 1, minimumRequestConfirmations: 3, callbackGasLimit: 2500000 [2.5e6], numWords: 2, sender: ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   │   └─ ← [Return] 29
    │   ├─ emit DrawRequest(drawId: 29, requestId: 29, requestAddress: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   ├─ [28065] VRFCoordinatorV2Mock::requestRandomWords(0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, 1, 3, 2500000 [2.5e6], 2)
    │   │   ├─ emit RandomWordsRequested(keyHash: 0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, requestId: 30, preSeed: 129, subId: 1, minimumRequestConfirmations: 3, callbackGasLimit: 2500000 [2.5e6], numWords: 2, sender: ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   │   └─ ← [Return] 30
    │   ├─ emit DrawRequest(drawId: 30, requestId: 30, requestAddress: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   └─ ← [Stop] 
    ├─ [2362] ScratchVRF::latestTicketId() [staticcall]
    │   └─ ← [Return] 0
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [265515] VRFCoordinatorV2Mock::fulfillRandomWords(1, ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   ├─ [227582] ScratchVRF::rawFulfillRandomWords(1, [78541660797044910968829902406342334108369226379826116161446442989268089806461 [7.854e76], 92458281274488595289803937127152923398167637295201432141969818930235769911599 [9.245e76]])
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, tokenId: 1)
    │   │   ├─ emit MintCompleted(ticketId: 1, edition: 10, recipient: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, prize: 5000000000000000000000 [5e21])
    │   │   ├─ emit RequestFulfilled(drawId: 1, requestId: 1, resultValue: 0x3903d765dfd3757f960af3e45b9d54eb052510286fe8540226885145e1c70f02)
    │   │   └─ ← [Stop] 
    │   ├─ emit RandomWordsFulfilled(requestId: 1, outputSeed: 1, payment: 355029000000 [3.55e11], success: true)
    │   └─ ← [Stop] 
    ├─ [233899] VRFCoordinatorV2Mock::fulfillRandomWords(2, ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   ├─ [195966] ScratchVRF::rawFulfillRandomWords(2, [77676537065960878698898692042018114106337750925255485067533933387271373890921 [7.767e76], 98521912898304110675870976153671229506380941016514884467413255631823579132687 [9.852e76]])
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, tokenId: 2)
    │   │   ├─ emit MintCompleted(ticketId: 2, edition: 8, recipient: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, prize: 1000000000000000000000 [1e21])
    │   │   ├─ emit RequestFulfilled(drawId: 2, requestId: 2, resultValue: 0x2ac4afbf0341cf5e1aa2ddb98f9d26ec4a76b001e78cc2daa83e3f592327baaf)
    │   │   └─ ← [Stop] 
    │   ├─ emit RandomWordsFulfilled(requestId: 2, outputSeed: 2, payment: 323413000000 [3.234e11], success: true)
    │   └─ ← [Stop] 
    ├─ [233899] VRFCoordinatorV2Mock::fulfillRandomWords(3, ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   ├─ [195966] ScratchVRF::rawFulfillRandomWords(3, [7290387335634266486249037663595860854047133815481999773725367799777733655939 [7.29e75], 56988696150268759067033853745049141362335364605175666696514897554729450063371 [5.698e76]])
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, tokenId: 3)
    │   │   ├─ emit MintCompleted(ticketId: 3, edition: 2, recipient: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, prize: 1000000000000000000000 [1e21])
    │   │   ├─ emit RequestFulfilled(drawId: 3, requestId: 3, resultValue: 0xb1074c4f3845de0696e12962d272e5902f0f92eafa690ebf1a9db31c8c2f971d)
    │   │   └─ ← [Stop] 
    │   ├─ emit RandomWordsFulfilled(requestId: 3, outputSeed: 3, payment: 323413000000 [3.234e11], success: true)
    │   └─ ← [Stop] 
    ├─ [267425] VRFCoordinatorV2Mock::fulfillRandomWords(4, ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   ├─ [229492] ScratchVRF::rawFulfillRandomWords(4, [37470079394597546017821359402343014298469527652371950473243809108734949064165 [3.747e76], 107553882524790531947385985832592837884442228935463780553192851707863573624387 [1.075e77]])
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, tokenId: 4)
    │   │   ├─ emit MintCompleted(ticketId: 4, edition: 8, recipient: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, prize: 12000000000000000000000 [1.2e22])
    │   │   ├─ emit RequestFulfilled(drawId: 4, requestId: 4, resultValue: 0x94e4ad9e6b665a957766788a090bee4de51e1d61b72089e51c7409755db95be8)
    │   │   └─ ← [Stop] 
    │   ├─ emit RandomWordsFulfilled(requestId: 4, outputSeed: 4, payment: 356939000000 [3.569e11], success: true)
    │   └─ ← [Stop] 
    ├─ [267425] VRFCoordinatorV2Mock::fulfillRandomWords(5, ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   ├─ [229492] ScratchVRF::rawFulfillRandomWords(5, [19511599891424801449367108142964227787403202039135897967463264740723690140170 [1.951e76], 102407538280218558175650617366741421990572744813161403407894353239866642134028 [1.024e77]])
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, tokenId: 5)
    │   │   ├─ emit MintCompleted(ticketId: 5, edition: 9, recipient: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, prize: 12000000000000000000000 [1.2e22])
    │   │   ├─ emit RequestFulfilled(drawId: 5, requestId: 5, resultValue: 0xa62c4d32b358d6408969316a8e4751bf1e9722419ed7265ef564cb8e028f9be9)
    │   │   └─ ← [Stop] 
    │   ├─ emit RandomWordsFulfilled(requestId: 5, outputSeed: 5, payment: 356939000000 [3.569e11], success: true)
    │   └─ ← [Stop] 
    ├─ [247309] VRFCoordinatorV2Mock::fulfillRandomWords(6, ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   ├─ [209376] ScratchVRF::rawFulfillRandomWords(6, [44355349372257074959598820724407765760752581458598127991279639756049881788605 [4.435e76], 64771031127637644641820998496680798776928215904550727580546829411477195559498 [6.477e76]])
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, tokenId: 6)
    │   │   ├─ emit MintCompleted(ticketId: 6, edition: 9, recipient: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, prize: 2000000000000000000000 [2e21])
    │   │   ├─ emit RequestFulfilled(drawId: 6, requestId: 6, resultValue: 0x9dcd0edbd49ad7b4ee7afd5a3479fc26bfe22f49956945bfb3723dbeddfab444)
    │   │   └─ ← [Stop] 
    │   ├─ emit RandomWordsFulfilled(requestId: 6, outputSeed: 6, payment: 336823000000 [3.368e11], success: true)
    │   └─ ← [Stop] 
    ├─ [260720] VRFCoordinatorV2Mock::fulfillRandomWords(7, ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   ├─ [222787] ScratchVRF::rawFulfillRandomWords(7, [61066341240856734250200229908154867864480630679181913661669668597419326467371 [6.106e76], 99693343276258175943276224455600693875804524070548600678645430786866646426494 [9.969e76]])
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, tokenId: 7)
    │   │   ├─ emit MintCompleted(ticketId: 7, edition: 5, recipient: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, prize: 10000000000000000000000 [1e22])
    │   │   ├─ emit RequestFulfilled(drawId: 7, requestId: 7, resultValue: 0x85303a5c8b6e2f7973985c81201ca53e2198d48e72ef531798a473d88e66a07f)
    │   │   └─ ← [Stop] 
    │   ├─ emit RandomWordsFulfilled(requestId: 7, outputSeed: 7, payment: 350234000000 [3.502e11], success: true)
    │   └─ ← [Stop] 
    ├─ [233899] VRFCoordinatorV2Mock::fulfillRandomWords(8, ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   ├─ [195966] ScratchVRF::rawFulfillRandomWords(8, [41407063523202153779201919856959745600407059861221559387013478471919977319996 [4.14e76], 35149903262347865542478349746417086511873087559377723918748248932562777078171 [3.514e76]])
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, tokenId: 8)
    │   │   ├─ emit MintCompleted(ticketId: 8, edition: 2, recipient: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, prize: 1000000000000000000000 [1e21])
    │   │   ├─ emit RequestFulfilled(drawId: 8, requestId: 8, resultValue: 0x5372bd9828d32ec2f557e44231382606e72d8464923904ce969b43c6dafc33a3)
    │   │   └─ ← [Stop] 
    │   ├─ emit RandomWordsFulfilled(requestId: 8, outputSeed: 8, payment: 323413000000 [3.234e11], success: true)
    │   └─ ← [Stop] 
    ├─ [267425] VRFCoordinatorV2Mock::fulfillRandomWords(9, ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   ├─ [229492] ScratchVRF::rawFulfillRandomWords(9, [22756765779589845761170775236260874230900367805402455632653690919156678150133 [2.275e76], 52761558019458498661273189570472712548756005529868654248710049878935274508452 [5.276e76]])
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, tokenId: 9)
    │   │   ├─ emit MintCompleted(ticketId: 9, edition: 3, recipient: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, prize: 12000000000000000000000 [1.2e22])
    │   │   ├─ emit RequestFulfilled(drawId: 9, requestId: 9, resultValue: 0xd6b60f223f694f24a0d40b57c57aa5cdb1bae49c26bbeeb3d92752b3b45dae37)
    │   │   └─ ← [Stop] 
    │   ├─ emit RandomWordsFulfilled(requestId: 9, outputSeed: 9, payment: 356939000000 [3.569e11], success: true)
    │   └─ ← [Stop] 
    ├─ [254015] VRFCoordinatorV2Mock::fulfillRandomWords(10, ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   ├─ [216082] ScratchVRF::rawFulfillRandomWords(10, [28316780231992663356899387360795050299752000032466988729594309499906746629572 [2.831e76], 19085876106743701664961649015242405312216082383703184670357774050142071594619 [1.908e76]])
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, tokenId: 10)
    │   │   ├─ emit MintCompleted(ticketId: 10, edition: 10, recipient: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, prize: 5000000000000000000000 [5e21])
    │   │   ├─ emit RequestFulfilled(drawId: 10, requestId: 10, resultValue: 0xa22aacd6d54a21e1a0781e70bd33984bbf4c94cd55ea851fa83b7fbe09660808)
    │   │   └─ ← [Stop] 
    │   ├─ emit RandomWordsFulfilled(requestId: 10, outputSeed: 10, payment: 343529000000 [3.435e11], success: true)
    │   └─ ← [Stop] 
    ├─ [267425] VRFCoordinatorV2Mock::fulfillRandomWords(11, ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   ├─ [229492] ScratchVRF::rawFulfillRandomWords(11, [65623166409519056520994908395722833037654924088690886984408315243991923873190 [6.562e76], 114210411710595721219687509804961249266368785711603282053796872590124855166514 [1.142e77]])
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, tokenId: 11)
    │   │   ├─ emit MintCompleted(ticketId: 11, edition: 5, recipient: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, prize: 12000000000000000000000 [1.2e22])
    │   │   ├─ emit RequestFulfilled(drawId: 11, requestId: 11, resultValue: 0xc6ef99d774bc203aae9c6417448d89f180f5a55cf3ea2dcbd5b595e415d77f8d)
    │   │   └─ ← [Stop] 
    │   ├─ emit RandomWordsFulfilled(requestId: 11, outputSeed: 11, payment: 356939000000 [3.569e11], success: true)
    │   └─ ← [Stop] 
    ├─ [301159] VRFCoordinatorV2Mock::fulfillRandomWords(12, ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   ├─ [263226] ScratchVRF::rawFulfillRandomWords(12, [94376770707860800088818712292414780952038890326714099953771676889341176737887 [9.437e76], 16169210303357610128928729886722388030241192878162788589544742115849079942025 [1.616e76]])
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, tokenId: 12)
    │   │   ├─ emit MintCompleted(ticketId: 12, edition: 6, recipient: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, prize: 8888888000000000000000000 [8.888e24])
    │   │   ├─ emit RequestFulfilled(drawId: 12, requestId: 12, resultValue: 0x913f30c4d5eb670787a5a8410331512a45d8afe589fe7ee7530b061136a08cae)
    │   │   └─ ← [Stop] 
    │   ├─ emit RandomWordsFulfilled(requestId: 12, outputSeed: 12, payment: 390673000000 [3.906e11], success: true)
    │   └─ ← [Stop] 
    ├─ [254015] VRFCoordinatorV2Mock::fulfillRandomWords(13, ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   ├─ [216082] ScratchVRF::rawFulfillRandomWords(13, [56379375082099018722056789168509866372749978077076306672312729015938096605403 [5.637e76], 60927916436011793602877068095870795513162129369755003126351359712277805362091 [6.092e76]])
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, tokenId: 13)
    │   │   ├─ emit MintCompleted(ticketId: 13, edition: 2, recipient: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, prize: 5000000000000000000000 [5e21])
    │   │   ├─ emit RequestFulfilled(drawId: 13, requestId: 13, resultValue: 0x472a95cc7a87ea7d708b0ed23d569b331fb479ed5fe53a12448c72755efd002c)
    │   │   └─ ← [Stop] 
    │   ├─ emit RandomWordsFulfilled(requestId: 13, outputSeed: 13, payment: 343529000000 [3.435e11], success: true)
    │   └─ ← [Stop] 
    ├─ [274131] VRFCoordinatorV2Mock::fulfillRandomWords(14, ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   ├─ [236198] ScratchVRF::rawFulfillRandomWords(14, [105721182380816668089674224688318176007599331474316895725595425372587271692089 [1.057e77], 39652794118439292973549559578227344726260529150561814486207296958482258370923 [3.965e76]])
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, tokenId: 14)
    │   │   ├─ emit MintCompleted(ticketId: 14, edition: 4, recipient: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, prize: 30000000000000000000000 [3e22])
    │   │   ├─ emit RequestFulfilled(drawId: 14, requestId: 14, resultValue: 0xa4904133f5d75f68fae7298a70dc37e672d90ae383e8e5f11f13bb0572ec1b1e)
    │   │   └─ ← [Stop] 
    │   ├─ emit RandomWordsFulfilled(requestId: 14, outputSeed: 14, payment: 363645000000 [3.636e11], success: true)
    │   └─ ← [Stop] 
    ├─ [260720] VRFCoordinatorV2Mock::fulfillRandomWords(15, ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   ├─ [222787] ScratchVRF::rawFulfillRandomWords(15, [53017671164176843150973674479173729470979484940492797662099425467806500645382 [5.301e76], 8476249935359893725144830603426360119642468519775504874088151615104304188436 [8.476e75]])
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, tokenId: 15)
    │   │   ├─ emit MintCompleted(ticketId: 15, edition: 7, recipient: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, prize: 10000000000000000000000 [1e22])
    │   │   ├─ emit RequestFulfilled(drawId: 15, requestId: 15, resultValue: 0xfe533451299bffef00597d33d63dac1118d0c61554566f553d85ce974d672348)
    │   │   └─ ← [Stop] 
    │   ├─ emit RandomWordsFulfilled(requestId: 15, outputSeed: 15, payment: 350234000000 [3.502e11], success: true)
    │   └─ ← [Stop] 
    ├─ [254015] VRFCoordinatorV2Mock::fulfillRandomWords(16, ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   ├─ [216082] ScratchVRF::rawFulfillRandomWords(16, [923611595825876214700736444482112465365779009101210803823586338541008743515 [9.236e74], 53067373931782490698616104594431783327701057651061858207562569194581602339203 [5.306e76]])
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, tokenId: 16)
    │   │   ├─ emit MintCompleted(ticketId: 16, edition: 4, recipient: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, prize: 5000000000000000000000 [5e21])
    │   │   ├─ emit RequestFulfilled(drawId: 16, requestId: 16, resultValue: 0xd9dea51b7d704aba497dec8f4e5c9cd9de85fb158330c6ae6490a88d8e62e8bc)
    │   │   └─ ← [Stop] 
    │   ├─ emit RandomWordsFulfilled(requestId: 16, outputSeed: 16, payment: 343529000000 [3.435e11], success: true)
    │   └─ ← [Stop] 
    ├─ [254015] VRFCoordinatorV2Mock::fulfillRandomWords(17, ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   ├─ [216082] ScratchVRF::rawFulfillRandomWords(17, [73555895786918245468190752828418795965247207065870858797245859361449045122436 [7.355e76], 90833963927758799113719025603677964796474124828269229747399379044572608754728 [9.083e76]])
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, tokenId: 17)
    │   │   ├─ emit MintCompleted(ticketId: 17, edition: 9, recipient: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, prize: 5000000000000000000000 [5e21])
    │   │   ├─ emit RequestFulfilled(drawId: 17, requestId: 17, resultValue: 0x46678ebbaa25bef67e80a77204c3a33f1657d923ba821e249fd219ead637f5d0)
    │   │   └─ ← [Stop] 
    │   ├─ emit RandomWordsFulfilled(requestId: 17, outputSeed: 17, payment: 343529000000 [3.435e11], success: true)
    │   └─ ← [Stop] 
    ├─ [233899] VRFCoordinatorV2Mock::fulfillRandomWords(18, ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   ├─ [195966] ScratchVRF::rawFulfillRandomWords(18, [12989514705740598333484151973466354555343510131890239912606811445340916416958 [1.298e76], 28987544765931392979120181818729604486797243681123216107827366695962863794131 [2.898e76]])
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, tokenId: 18)
    │   │   ├─ emit MintCompleted(ticketId: 18, edition: 2, recipient: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, prize: 1000000000000000000000 [1e21])
    │   │   ├─ emit RequestFulfilled(drawId: 18, requestId: 18, resultValue: 0xab659e54f2bc22f27f240b1a67fca0410d35f81cdc71a8e466c2e4a64c90bb6b)
    │   │   └─ ← [Stop] 
    │   ├─ emit RandomWordsFulfilled(requestId: 18, outputSeed: 18, payment: 323413000000 [3.234e11], success: true)
    │   └─ ← [Stop] 
    ├─ [267425] VRFCoordinatorV2Mock::fulfillRandomWords(19, ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   ├─ [229492] ScratchVRF::rawFulfillRandomWords(19, [36482186801264784031064171474479088528269423946836123719979863649473811490187 [3.648e76], 29759895226261443006565071422652607398103526065617043580618107925335121368418 [2.975e76]])
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, tokenId: 19)
    │   │   ├─ emit MintCompleted(ticketId: 19, edition: 9, recipient: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, prize: 12000000000000000000000 [1.2e22])
    │   │   ├─ emit RequestFulfilled(drawId: 19, requestId: 19, resultValue: 0x30f7efe918d74224c909aefbc73c57138689ee9f7142245d29db263044bba489)
    │   │   └─ ← [Stop] 
    │   ├─ emit RandomWordsFulfilled(requestId: 19, outputSeed: 19, payment: 356939000000 [3.569e11], success: true)
    │   └─ ← [Stop] 
    ├─ [240604] VRFCoordinatorV2Mock::fulfillRandomWords(20, ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   ├─ [202671] ScratchVRF::rawFulfillRandomWords(20, [69474183407012801928790001736961568456549020695295710491772555178666704323852 [6.947e76], 31878092322030354069606543325501746644223175182282521662253134072524756100729 [3.187e76]])
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, tokenId: 20)
    │   │   ├─ emit MintCompleted(ticketId: 20, edition: 10, recipient: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, prize: 1000000000000000000000 [1e21])
    │   │   ├─ emit RequestFulfilled(drawId: 20, requestId: 20, resultValue: 0xecde11f3310c3f41846103a2d9b6e5702eb6bada70e3e1b6d6afc5fc4ad40b1b)
    │   │   └─ ← [Stop] 
    │   ├─ emit RandomWordsFulfilled(requestId: 20, outputSeed: 20, payment: 330118000000 [3.301e11], success: true)
    │   └─ ← [Stop] 
    ├─ [247309] VRFCoordinatorV2Mock::fulfillRandomWords(21, ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   ├─ [209376] ScratchVRF::rawFulfillRandomWords(21, [37300442896938396431521828309165838615900663005569164769999796436588545805641 [3.73e76], 35493356974736539126715067910643291109005910342150549691489884657440383080406 [3.549e76]])
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, tokenId: 21)
    │   │   ├─ emit MintCompleted(ticketId: 21, edition: 7, recipient: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, prize: 2000000000000000000000 [2e21])
    │   │   ├─ emit RequestFulfilled(drawId: 21, requestId: 21, resultValue: 0x3deeb52f624374644943e03a036e579da08be08233960c4a703f70798a27ad91)
    │   │   └─ ← [Stop] 
    │   ├─ emit RandomWordsFulfilled(requestId: 21, outputSeed: 21, payment: 336823000000 [3.368e11], success: true)
    │   └─ ← [Stop] 
    ├─ [267425] VRFCoordinatorV2Mock::fulfillRandomWords(22, ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   ├─ [229492] ScratchVRF::rawFulfillRandomWords(22, [81549753519496015132455364440609520288594725836063187203352161558076061404131 [8.154e76], 19449577030699083153672779782887781117535280571986350492308343411397336580120 [1.944e76]])
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, tokenId: 22)
    │   │   ├─ emit MintCompleted(ticketId: 22, edition: 1, recipient: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, prize: 12000000000000000000000 [1.2e22])
    │   │   ├─ emit RequestFulfilled(drawId: 22, requestId: 22, resultValue: 0x21a4eab70eff17c753130aa36e6e015b3bd4ca22bb1e0d12bd22dbeb68cdf57d)
    │   │   └─ ← [Stop] 
    │   ├─ emit RandomWordsFulfilled(requestId: 22, outputSeed: 22, payment: 356939000000 [3.569e11], success: true)
    │   └─ ← [Stop] 
    ├─ [247309] VRFCoordinatorV2Mock::fulfillRandomWords(23, ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   ├─ [209376] ScratchVRF::rawFulfillRandomWords(23, [99578389926443943009426491932587868765139972938117296631972251545666696457699 [9.957e76], 85826073093376545897464773811623856427047415151688190075955436497516511031666 [8.582e76]])
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, tokenId: 23)
    │   │   ├─ emit MintCompleted(ticketId: 23, edition: 7, recipient: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, prize: 2000000000000000000000 [2e21])
    │   │   ├─ emit RequestFulfilled(drawId: 23, requestId: 23, resultValue: 0x9ecc3e0a80cbc1f56591ea5b23d5be6463156f5ca0622e932a94ebde2134eef4)
    │   │   └─ ← [Stop] 
    │   ├─ emit RandomWordsFulfilled(requestId: 23, outputSeed: 23, payment: 336823000000 [3.368e11], success: true)
    │   └─ ← [Stop] 
    ├─ [247309] VRFCoordinatorV2Mock::fulfillRandomWords(24, ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   ├─ [209376] ScratchVRF::rawFulfillRandomWords(24, [13403776112023834337318221012384831821403364618916583869690140800041663172635 [1.34e76], 58322362286496034124125243800955209110106454527075827238077501107154860718726 [5.832e76]])
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, tokenId: 24)
    │   │   ├─ emit MintCompleted(ticketId: 24, edition: 7, recipient: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, prize: 2000000000000000000000 [2e21])
    │   │   ├─ emit RequestFulfilled(drawId: 24, requestId: 24, resultValue: 0xf0a13166026bc9a272f94a0ffe90f0b0ffba608aac84226f7188d31a46a3292a)
    │   │   └─ ← [Stop] 
    │   ├─ emit RandomWordsFulfilled(requestId: 24, outputSeed: 24, payment: 336823000000 [3.368e11], success: true)
    │   └─ ← [Stop] 
    ├─ [247309] VRFCoordinatorV2Mock::fulfillRandomWords(25, ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   ├─ [209376] ScratchVRF::rawFulfillRandomWords(25, [79937154209765547948756703973095640792302913572818455402187192580652463382710 [7.993e76], 16511173039457622280184890614304358585229414751706761144117693346559955369310 [1.651e76]])
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, tokenId: 25)
    │   │   ├─ emit MintCompleted(ticketId: 25, edition: 1, recipient: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, prize: 2000000000000000000000 [2e21])
    │   │   ├─ emit RequestFulfilled(drawId: 25, requestId: 25, resultValue: 0x51a1751deeeaecefdefd81ef34bc126a562362783be7611e478522a283ba6b45)
    │   │   └─ ← [Stop] 
    │   ├─ emit RandomWordsFulfilled(requestId: 25, outputSeed: 25, payment: 336823000000 [3.368e11], success: true)
    │   └─ ← [Stop] 
    ├─ [254015] VRFCoordinatorV2Mock::fulfillRandomWords(26, ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   ├─ [216082] ScratchVRF::rawFulfillRandomWords(26, [107306908940897711083802607365080174569959332579430936179770432200593364772401 [1.073e77], 100333813202144537648686559119269590220466739158216031289875865029457228722323 [1.003e77]])
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, tokenId: 26)
    │   │   ├─ emit MintCompleted(ticketId: 26, edition: 4, recipient: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, prize: 5000000000000000000000 [5e21])
    │   │   ├─ emit RequestFulfilled(drawId: 26, requestId: 26, resultValue: 0x56912a5787e0fc8f4fc3e13d74d49c3f6f3d0c6a6d73e92f83e3417d14f6a764)
    │   │   └─ ← [Stop] 
    │   ├─ emit RandomWordsFulfilled(requestId: 26, outputSeed: 26, payment: 343529000000 [3.435e11], success: true)
    │   └─ ← [Stop] 
    ├─ [254015] VRFCoordinatorV2Mock::fulfillRandomWords(27, ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   ├─ [216082] ScratchVRF::rawFulfillRandomWords(27, [9531444281093770316222528798842014596632672187733312100801353516819876605561 [9.531e75], 97203890820018413868979124187568107944697472020866876049391451620838083495754 [9.72e76]])
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, tokenId: 27)
    │   │   ├─ emit MintCompleted(ticketId: 27, edition: 5, recipient: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, prize: 5000000000000000000000 [5e21])
    │   │   ├─ emit RequestFulfilled(drawId: 27, requestId: 27, resultValue: 0x2bd9cb64ee30d500a5f28523b92c342487f09d58aef04795cf7ee236995da356)
    │   │   └─ ← [Stop] 
    │   ├─ emit RandomWordsFulfilled(requestId: 27, outputSeed: 27, payment: 343529000000 [3.435e11], success: true)
    │   └─ ← [Stop] 
    ├─ [254015] VRFCoordinatorV2Mock::fulfillRandomWords(28, ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   ├─ [216082] ScratchVRF::rawFulfillRandomWords(28, [110945061739611978068030233806095060310143576979896956364002768812055335222406 [1.109e77], 1289744578491277343414828858740397845698630876879897936271530002362754688234 [1.289e75]])
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, tokenId: 28)
    │   │   ├─ emit MintCompleted(ticketId: 28, edition: 5, recipient: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, prize: 5000000000000000000000 [5e21])
    │   │   ├─ emit RequestFulfilled(drawId: 28, requestId: 28, resultValue: 0x4077e46ae626f0a991e36398d18e51c5ed895ffc574ccc170fa33ec8e15c9874)
    │   │   └─ ← [Stop] 
    │   ├─ emit RandomWordsFulfilled(requestId: 28, outputSeed: 28, payment: 343529000000 [3.435e11], success: true)
    │   └─ ← [Stop] 
    ├─ [240604] VRFCoordinatorV2Mock::fulfillRandomWords(29, ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   ├─ [202671] ScratchVRF::rawFulfillRandomWords(29, [83363837849203752469223267655300532748099588293840920674437329857707324529850 [8.336e76], 22614963588462850567858403189892189122000038869804830047531812652410120574671 [2.261e76]])
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, tokenId: 29)
    │   │   ├─ emit MintCompleted(ticketId: 29, edition: 2, recipient: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, prize: 1000000000000000000000 [1e21])
    │   │   ├─ emit RequestFulfilled(drawId: 29, requestId: 29, resultValue: 0x8e9b4eda7474db5639b1490d7345e4e30863cc92d3108dc2cfd5bb1ad2431032)
    │   │   └─ ← [Stop] 
    │   ├─ emit RandomWordsFulfilled(requestId: 29, outputSeed: 29, payment: 330118000000 [3.301e11], success: true)
    │   └─ ← [Stop] 
    ├─ [362] ScratchVRF::latestTicketId() [staticcall]
    │   └─ ← [Return] 29
    ├─ [0] VM::startPrank(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   └─ ← [Return] 
    ├─ [46230] 0x249cA82617eC3DfB2589c4c17ab7EC9765350a18::approve(ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], 300000000000000000000000 [3e23])
    │   ├─ emit Approval(owner: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, spender: ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], value: 300000000000000000000000 [3e23])
    │   └─ ← [Return] true
    ├─ [0] VM::expectRevert(TooManyTickets())
    │   └─ ← [Return] 
    ├─ [22049] ScratchVRF::bulkPurchase(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 100)
    │   └─ ← [Revert] TooManyTickets()
    └─ ← [Stop] 

[PASS] testBuyTickets() (gas: 592296)
Traces:
  [592296] TestScratchVRF_MAINNET::testBuyTickets()
    ├─ [2406] ScratchVRF::baseCost() [staticcall]
    │   └─ ← [Return] 3000000000000000000000 [3e21]
    ├─ [0] VM::startPrank(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   └─ ← [Return] 
    ├─ [46218] 0x249cA82617eC3DfB2589c4c17ab7EC9765350a18::approve(ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], 3000000000000000000000 [3e21])
    │   ├─ emit Approval(owner: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, spender: ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], value: 3000000000000000000000 [3e21])
    │   └─ ← [Return] true
    ├─ [182474] ScratchVRF::buyScratchTicket()
    │   ├─ [18354] 0x249cA82617eC3DfB2589c4c17ab7EC9765350a18::transferFrom(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], 3000000000000000000000 [3e21])
    │   │   ├─ emit Transfer(from: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, to: ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], value: 3000000000000000000000 [3e21])
    │   │   └─ ← [Return] true
    │   ├─ [45665] VRFCoordinatorV2Mock::requestRandomWords(0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, 1, 3, 2500000 [2.5e6], 2)
    │   │   ├─ emit RandomWordsRequested(keyHash: 0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, requestId: 1, preSeed: 100, subId: 1, minimumRequestConfirmations: 3, callbackGasLimit: 2500000 [2.5e6], numWords: 2, sender: ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   │   └─ ← [Return] 1
    │   ├─ emit DrawRequest(drawId: 1, requestId: 1, requestAddress: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   └─ ← [Stop] 
    ├─ [2362] ScratchVRF::latestTicketId() [staticcall]
    │   └─ ← [Return] 0
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [265515] VRFCoordinatorV2Mock::fulfillRandomWords(1, ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   ├─ [227582] ScratchVRF::rawFulfillRandomWords(1, [78541660797044910968829902406342334108369226379826116161446442989268089806461 [7.854e76], 92458281274488595289803937127152923398167637295201432141969818930235769911599 [9.245e76]])
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, tokenId: 1)
    │   │   ├─ emit MintCompleted(ticketId: 1, edition: 10, recipient: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, prize: 5000000000000000000000 [5e21])
    │   │   ├─ emit RequestFulfilled(drawId: 1, requestId: 1, resultValue: 0x3903d765dfd3757f960af3e45b9d54eb052510286fe8540226885145e1c70f02)
    │   │   └─ ← [Stop] 
    │   ├─ emit RandomWordsFulfilled(requestId: 1, outputSeed: 1, payment: 355029000000 [3.55e11], success: true)
    │   └─ ← [Stop] 
    ├─ [362] ScratchVRF::latestTicketId() [staticcall]
    │   └─ ← [Return] 1
    ├─ [0] VM::startPrank(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   └─ ← [Return] 
    ├─ [564] 0x249cA82617eC3DfB2589c4c17ab7EC9765350a18::balanceOf(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689) [staticcall]
    │   └─ ← [Return] 9617442656111443912245208 [9.617e24]
    ├─ [73131] ScratchVRF::claimPrize(1)
    │   ├─ emit SetClaimed(ticketId: 1)
    │   ├─ [2564] 0x249cA82617eC3DfB2589c4c17ab7EC9765350a18::balanceOf(ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b]) [staticcall]
    │   │   └─ ← [Return] 1003000000000000000000000 [1.003e24]
    │   ├─ [10663] 0x249cA82617eC3DfB2589c4c17ab7EC9765350a18::transfer(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 5000000000000000000000 [5e21])
    │   │   ├─ emit Transfer(from: ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], to: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, value: 5000000000000000000000 [5e21])
    │   │   └─ ← [Return] true
    │   ├─ emit PrizeClaimed(ticketId: 1, receiver: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, amount: 5000000000000000000000 [5e21])
    │   └─ ← [Stop] 
    ├─ [564] 0x249cA82617eC3DfB2589c4c17ab7EC9765350a18::balanceOf(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689) [staticcall]
    │   └─ ← [Return] 9622442656111443912245208 [9.622e24]
    ├─ [0] VM::expectRevert(AlreadyClaimed())
    │   └─ ← [Return] 
    ├─ [30302] ScratchVRF::claimPrize(1)
    │   └─ ← [Revert] AlreadyClaimed()
    └─ ← [Stop] 

[PASS] testChangeBaseCost() (gas: 37863)
Traces:
  [37863] TestScratchVRF_MAINNET::testChangeBaseCost()
    ├─ [2406] ScratchVRF::baseCost() [staticcall]
    │   └─ ← [Return] 3000000000000000000000 [3e21]
    ├─ [28826] ScratchVRF::changeBaseCost(1000000000000000000000 [1e21])
    │   └─ ← [Stop] 
    ├─ [406] ScratchVRF::baseCost() [staticcall]
    │   └─ ← [Return] 1000000000000000000000 [1e21]
    └─ ← [Stop] 

[PASS] testChangeBaseCostExceptions() (gas: 142647)
Traces:
  [142647] TestScratchVRF_MAINNET::testChangeBaseCostExceptions()
    ├─ [2406] ScratchVRF::baseCost() [staticcall]
    │   └─ ← [Return] 3000000000000000000000 [3e21]
    ├─ [0] VM::startPrank(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   └─ ← [Return] 
    ├─ [0] VM::expectRevert(NotMaster())
    │   └─ ← [Return] 
    ├─ [23806] ScratchVRF::changeBaseCost(1000000000000000000000 [1e21])
    │   └─ ← [Revert] NotMaster()
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::expectRevert(InvalidCost())
    │   └─ ← [Return] 
    ├─ [25958] ScratchVRF::changeBaseCost(3000000000000000000000 [3e21])
    │   └─ ← [Revert] InvalidCost()
    ├─ [0] VM::expectRevert(InvalidCost())
    │   └─ ← [Return] 
    ├─ [23751] ScratchVRF::changeBaseCost(0)
    │   └─ ← [Revert] InvalidCost()
    ├─ [28826] ScratchVRF::changeBaseCost(1000000000000000000000 [1e21])
    │   └─ ← [Stop] 
    ├─ [0] VM::expectRevert(InvalidCost())
    │   └─ ← [Return] 
    ├─ [25958] ScratchVRF::changeBaseCost(1000000000000000000000 [1e21])
    │   └─ ← [Revert] InvalidCost()
    └─ ← [Stop] 

[PASS] testGiftTickets() (gas: 655361)
Traces:
  [655361] TestScratchVRF_MAINNET::testGiftTickets()
    ├─ [2406] ScratchVRF::baseCost() [staticcall]
    │   └─ ← [Return] 3000000000000000000000 [3e21]
    ├─ [0] VM::startPrank(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   └─ ← [Return] 
    ├─ [46218] 0x249cA82617eC3DfB2589c4c17ab7EC9765350a18::approve(ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], 3000000000000000000000 [3e21])
    │   ├─ emit Approval(owner: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, spender: ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], value: 3000000000000000000000 [3e21])
    │   └─ ← [Return] true
    ├─ [183007] ScratchVRF::giftScratchTicket(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   ├─ [18354] 0x249cA82617eC3DfB2589c4c17ab7EC9765350a18::transferFrom(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], 3000000000000000000000 [3e21])
    │   │   ├─ emit Transfer(from: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, to: ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], value: 3000000000000000000000 [3e21])
    │   │   └─ ← [Return] true
    │   ├─ [45665] VRFCoordinatorV2Mock::requestRandomWords(0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, 1, 3, 2500000 [2.5e6], 2)
    │   │   ├─ emit RandomWordsRequested(keyHash: 0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, requestId: 1, preSeed: 100, subId: 1, minimumRequestConfirmations: 3, callbackGasLimit: 2500000 [2.5e6], numWords: 2, sender: ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   │   └─ ← [Return] 1
    │   ├─ emit DrawRequest(drawId: 1, requestId: 1, requestAddress: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   └─ ← [Stop] 
    ├─ [2362] ScratchVRF::latestTicketId() [staticcall]
    │   └─ ← [Return] 0
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [265515] VRFCoordinatorV2Mock::fulfillRandomWords(1, ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   ├─ [227582] ScratchVRF::rawFulfillRandomWords(1, [78541660797044910968829902406342334108369226379826116161446442989268089806461 [7.854e76], 92458281274488595289803937127152923398167637295201432141969818930235769911599 [9.245e76]])
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, tokenId: 1)
    │   │   ├─ emit MintCompleted(ticketId: 1, edition: 10, recipient: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, prize: 5000000000000000000000 [5e21])
    │   │   ├─ emit RequestFulfilled(drawId: 1, requestId: 1, resultValue: 0x3903d765dfd3757f960af3e45b9d54eb052510286fe8540226885145e1c70f02)
    │   │   └─ ← [Stop] 
    │   ├─ emit RandomWordsFulfilled(requestId: 1, outputSeed: 1, payment: 355029000000 [3.55e11], success: true)
    │   └─ ← [Stop] 
    ├─ [362] ScratchVRF::latestTicketId() [staticcall]
    │   └─ ← [Return] 1
    ├─ [564] 0x249cA82617eC3DfB2589c4c17ab7EC9765350a18::balanceOf(ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b]) [staticcall]
    │   └─ ← [Return] 1003000000000000000000000 [1.003e24]
    ├─ [54598] ScratchVRF::withdrawTokens(0x249cA82617eC3DfB2589c4c17ab7EC9765350a18, 1003000000000000000000000 [1.003e24])
    │   ├─ [29763] 0x249cA82617eC3DfB2589c4c17ab7EC9765350a18::transfer(TestScratchVRF_MAINNET: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], 1003000000000000000000000 [1.003e24])
    │   │   ├─ emit Transfer(from: ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], to: TestScratchVRF_MAINNET: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], value: 1003000000000000000000000 [1.003e24])
    │   │   └─ ← [Return] true
    │   ├─ emit WithdrawTokens(receiver: TestScratchVRF_MAINNET: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], amount: 1003000000000000000000000 [1.003e24])
    │   └─ ← [Stop] 
    ├─ [0] VM::startPrank(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   └─ ← [Return] 
    ├─ [0] VM::expectRevert(NotEnoughFunds())
    │   └─ ← [Return] 
    ├─ [59259] ScratchVRF::claimPrize(1)
    │   ├─ emit SetClaimed(ticketId: 1)
    │   ├─ [2564] 0x249cA82617eC3DfB2589c4c17ab7EC9765350a18::balanceOf(ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b]) [staticcall]
    │   │   └─ ← [Return] 0
    │   └─ ← [Revert] NotEnoughFunds()
    ├─ [0] VM::expectRevert(ERC721: invalid token ID)
    │   └─ ← [Return] 
    ├─ [28089] ScratchVRF::claimPrize(2)
    │   └─ ← [Revert] revert: ERC721: invalid token ID
    ├─ [0] VM::expectRevert(ERC721: invalid token ID)
    │   └─ ← [Return] 
    ├─ [28077] ScratchVRF::claimPrize(0)
    │   └─ ← [Revert] revert: ERC721: invalid token ID
    └─ ← [Stop] 

[PASS] testGiftTicketsForFree() (gas: 707923)
Traces:
  [707923] TestScratchVRF_MAINNET::testGiftTicketsForFree()
    ├─ [164024] ScratchVRF::giftForFree([0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689])
    │   ├─ [45665] VRFCoordinatorV2Mock::requestRandomWords(0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, 1, 3, 2500000 [2.5e6], 2)
    │   │   ├─ emit RandomWordsRequested(keyHash: 0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, requestId: 1, preSeed: 100, subId: 1, minimumRequestConfirmations: 3, callbackGasLimit: 2500000 [2.5e6], numWords: 2, sender: ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   │   └─ ← [Return] 1
    │   ├─ emit DrawRequest(drawId: 1, requestId: 1, requestAddress: TestScratchVRF_MAINNET: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Stop] 
    ├─ [2362] ScratchVRF::latestTicketId() [staticcall]
    │   └─ ← [Return] 0
    ├─ [265515] VRFCoordinatorV2Mock::fulfillRandomWords(1, ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   ├─ [227582] ScratchVRF::rawFulfillRandomWords(1, [78541660797044910968829902406342334108369226379826116161446442989268089806461 [7.854e76], 92458281274488595289803937127152923398167637295201432141969818930235769911599 [9.245e76]])
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, tokenId: 1)
    │   │   ├─ emit MintCompleted(ticketId: 1, edition: 10, recipient: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, prize: 5000000000000000000000 [5e21])
    │   │   ├─ emit RequestFulfilled(drawId: 1, requestId: 1, resultValue: 0x3903d765dfd3757f960af3e45b9d54eb052510286fe8540226885145e1c70f02)
    │   │   └─ ← [Stop] 
    │   ├─ emit RandomWordsFulfilled(requestId: 1, outputSeed: 1, payment: 355029000000 [3.55e11], success: true)
    │   └─ ← [Stop] 
    ├─ [362] ScratchVRF::latestTicketId() [staticcall]
    │   └─ ← [Return] 1
    ├─ [2564] 0x249cA82617eC3DfB2589c4c17ab7EC9765350a18::balanceOf(ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b]) [staticcall]
    │   └─ ← [Return] 1000000000000000000000000 [1e24]
    ├─ [54586] ScratchVRF::withdrawTokens(0x249cA82617eC3DfB2589c4c17ab7EC9765350a18, 1000000000000000000000000 [1e24])
    │   ├─ [29763] 0x249cA82617eC3DfB2589c4c17ab7EC9765350a18::transfer(TestScratchVRF_MAINNET: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], 1000000000000000000000000 [1e24])
    │   │   ├─ emit Transfer(from: ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], to: TestScratchVRF_MAINNET: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], value: 1000000000000000000000000 [1e24])
    │   │   └─ ← [Return] true
    │   ├─ emit WithdrawTokens(receiver: TestScratchVRF_MAINNET: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], amount: 1000000000000000000000000 [1e24])
    │   └─ ← [Stop] 
    ├─ [0] VM::startPrank(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   └─ ← [Return] 
    ├─ [0] VM::expectRevert(NotEnoughFunds())
    │   └─ ← [Return] 
    ├─ [59259] ScratchVRF::claimPrize(1)
    │   ├─ emit SetClaimed(ticketId: 1)
    │   ├─ [2564] 0x249cA82617eC3DfB2589c4c17ab7EC9765350a18::balanceOf(ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b]) [staticcall]
    │   │   └─ ← [Return] 0
    │   └─ ← [Revert] NotEnoughFunds()
    ├─ [501] ScratchVRF::prizes(1) [staticcall]
    │   └─ ← [Return] 5000000000000000000000 [5e21]
    ├─ [51419] 0x249cA82617eC3DfB2589c4c17ab7EC9765350a18::transfer(ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], 5000000000000000000000 [5e21])
    │   ├─ emit Transfer(from: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, to: ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], value: 5000000000000000000000 [5e21])
    │   └─ ← [Return] true
    ├─ [68331] ScratchVRF::claimPrize(1)
    │   ├─ emit SetClaimed(ticketId: 1)
    │   ├─ [2564] 0x249cA82617eC3DfB2589c4c17ab7EC9765350a18::balanceOf(ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b]) [staticcall]
    │   │   └─ ← [Return] 5000000000000000000000 [5e21]
    │   ├─ [10663] 0x249cA82617eC3DfB2589c4c17ab7EC9765350a18::transfer(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 5000000000000000000000 [5e21])
    │   │   ├─ emit Transfer(from: ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], to: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, value: 5000000000000000000000 [5e21])
    │   │   └─ ← [Return] true
    │   ├─ emit PrizeClaimed(ticketId: 1, receiver: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, amount: 5000000000000000000000 [5e21])
    │   └─ ← [Stop] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::expectRevert(TooManyReceivers())
    │   └─ ← [Return] 
    ├─ [42865] ScratchVRF::giftForFree([0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689])
    │   └─ ← [Revert] TooManyReceivers()
    └─ ← [Stop] 

[PASS] testIsMinted() (gas: 486065)
Traces:
  [486065] TestScratchVRF_MAINNET::testIsMinted()
    ├─ [2406] ScratchVRF::baseCost() [staticcall]
    │   └─ ← [Return] 3000000000000000000000 [3e21]
    ├─ [0] VM::startPrank(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   └─ ← [Return] 
    ├─ [46218] 0x249cA82617eC3DfB2589c4c17ab7EC9765350a18::approve(ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], 3000000000000000000000 [3e21])
    │   ├─ emit Approval(owner: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, spender: ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], value: 3000000000000000000000 [3e21])
    │   └─ ← [Return] true
    ├─ [182474] ScratchVRF::buyScratchTicket()
    │   ├─ [18354] 0x249cA82617eC3DfB2589c4c17ab7EC9765350a18::transferFrom(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], 3000000000000000000000 [3e21])
    │   │   ├─ emit Transfer(from: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, to: ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], value: 3000000000000000000000 [3e21])
    │   │   └─ ← [Return] true
    │   ├─ [45665] VRFCoordinatorV2Mock::requestRandomWords(0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, 1, 3, 2500000 [2.5e6], 2)
    │   │   ├─ emit RandomWordsRequested(keyHash: 0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, requestId: 1, preSeed: 100, subId: 1, minimumRequestConfirmations: 3, callbackGasLimit: 2500000 [2.5e6], numWords: 2, sender: ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   │   └─ ← [Return] 1
    │   ├─ emit DrawRequest(drawId: 1, requestId: 1, requestAddress: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   └─ ← [Stop] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [265515] VRFCoordinatorV2Mock::fulfillRandomWords(1, ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   ├─ [227582] ScratchVRF::rawFulfillRandomWords(1, [78541660797044910968829902406342334108369226379826116161446442989268089806461 [7.854e76], 92458281274488595289803937127152923398167637295201432141969818930235769911599 [9.245e76]])
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, tokenId: 1)
    │   │   ├─ emit MintCompleted(ticketId: 1, edition: 10, recipient: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, prize: 5000000000000000000000 [5e21])
    │   │   ├─ emit RequestFulfilled(drawId: 1, requestId: 1, resultValue: 0x3903d765dfd3757f960af3e45b9d54eb052510286fe8540226885145e1c70f02)
    │   │   └─ ← [Stop] 
    │   ├─ emit RandomWordsFulfilled(requestId: 1, outputSeed: 1, payment: 355029000000 [3.55e11], success: true)
    │   └─ ← [Stop] 
    ├─ [709] ScratchVRF::isMinted(1) [staticcall]
    │   └─ ← [Return] true
    ├─ [2709] ScratchVRF::isMinted(2) [staticcall]
    │   └─ ← [Return] false
    └─ ← [Stop] 

[PASS] testOwnerByAddress() (gas: 484542)
Traces:
  [484542] TestScratchVRF_MAINNET::testOwnerByAddress()
    ├─ [2406] ScratchVRF::baseCost() [staticcall]
    │   └─ ← [Return] 3000000000000000000000 [3e21]
    ├─ [0] VM::startPrank(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   └─ ← [Return] 
    ├─ [46218] 0x249cA82617eC3DfB2589c4c17ab7EC9765350a18::approve(ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], 3000000000000000000000 [3e21])
    │   ├─ emit Approval(owner: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, spender: ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], value: 3000000000000000000000 [3e21])
    │   └─ ← [Return] true
    ├─ [182474] ScratchVRF::buyScratchTicket()
    │   ├─ [18354] 0x249cA82617eC3DfB2589c4c17ab7EC9765350a18::transferFrom(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], 3000000000000000000000 [3e21])
    │   │   ├─ emit Transfer(from: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, to: ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], value: 3000000000000000000000 [3e21])
    │   │   └─ ← [Return] true
    │   ├─ [45665] VRFCoordinatorV2Mock::requestRandomWords(0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, 1, 3, 2500000 [2.5e6], 2)
    │   │   ├─ emit RandomWordsRequested(keyHash: 0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, requestId: 1, preSeed: 100, subId: 1, minimumRequestConfirmations: 3, callbackGasLimit: 2500000 [2.5e6], numWords: 2, sender: ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   │   └─ ← [Return] 1
    │   ├─ emit DrawRequest(drawId: 1, requestId: 1, requestAddress: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   └─ ← [Stop] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [265515] VRFCoordinatorV2Mock::fulfillRandomWords(1, ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   ├─ [227582] ScratchVRF::rawFulfillRandomWords(1, [78541660797044910968829902406342334108369226379826116161446442989268089806461 [7.854e76], 92458281274488595289803937127152923398167637295201432141969818930235769911599 [9.245e76]])
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, tokenId: 1)
    │   │   ├─ emit MintCompleted(ticketId: 1, edition: 10, recipient: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, prize: 5000000000000000000000 [5e21])
    │   │   ├─ emit RequestFulfilled(drawId: 1, requestId: 1, resultValue: 0x3903d765dfd3757f960af3e45b9d54eb052510286fe8540226885145e1c70f02)
    │   │   └─ ← [Stop] 
    │   ├─ emit RandomWordsFulfilled(requestId: 1, outputSeed: 1, payment: 355029000000 [3.55e11], success: true)
    │   └─ ← [Stop] 
    ├─ [1986] ScratchVRF::ownedByAddress(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689) [staticcall]
    │   └─ ← [Return] [1]
    └─ ← [Stop] 

[PASS] testSubscription() (gas: 5546)
Traces:
  [5546] TestScratchVRF_MAINNET::testSubscription()
    ├─ [295] ScratchVRF::SUBSCRIPTION_ID() [staticcall]
    │   └─ ← [Return] 1
    └─ ← [Stop] 

[PASS] testToWei(uint128) (runs: 256, μ: 5998, ~: 5998)
Traces:
  [5998] TestScratchVRF_MAINNET::testToWei(83645312822667 [8.364e13])
    ├─ [512] ScratchVRF::toWei(83645312822667 [8.364e13]) [staticcall]
    │   └─ ← [Return] 83645312822667000000000000000000 [8.364e31]
    └─ ← [Stop] 

[PASS] testTokenURI() (gas: 495277)
Traces:
  [495277] TestScratchVRF_MAINNET::testTokenURI()
    ├─ [2406] ScratchVRF::baseCost() [staticcall]
    │   └─ ← [Return] 3000000000000000000000 [3e21]
    ├─ [0] VM::startPrank(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   └─ ← [Return] 
    ├─ [46218] 0x249cA82617eC3DfB2589c4c17ab7EC9765350a18::approve(ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], 3000000000000000000000 [3e21])
    │   ├─ emit Approval(owner: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, spender: ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], value: 3000000000000000000000 [3e21])
    │   └─ ← [Return] true
    ├─ [182474] ScratchVRF::buyScratchTicket()
    │   ├─ [18354] 0x249cA82617eC3DfB2589c4c17ab7EC9765350a18::transferFrom(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], 3000000000000000000000 [3e21])
    │   │   ├─ emit Transfer(from: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, to: ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], value: 3000000000000000000000 [3e21])
    │   │   └─ ← [Return] true
    │   ├─ [45665] VRFCoordinatorV2Mock::requestRandomWords(0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, 1, 3, 2500000 [2.5e6], 2)
    │   │   ├─ emit RandomWordsRequested(keyHash: 0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, requestId: 1, preSeed: 100, subId: 1, minimumRequestConfirmations: 3, callbackGasLimit: 2500000 [2.5e6], numWords: 2, sender: ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   │   └─ ← [Return] 1
    │   ├─ emit DrawRequest(drawId: 1, requestId: 1, requestAddress: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   └─ ← [Stop] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [265515] VRFCoordinatorV2Mock::fulfillRandomWords(1, ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   ├─ [227582] ScratchVRF::rawFulfillRandomWords(1, [78541660797044910968829902406342334108369226379826116161446442989268089806461 [7.854e76], 92458281274488595289803937127152923398167637295201432141969818930235769911599 [9.245e76]])
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, tokenId: 1)
    │   │   ├─ emit MintCompleted(ticketId: 1, edition: 10, recipient: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, prize: 5000000000000000000000 [5e21])
    │   │   ├─ emit RequestFulfilled(drawId: 1, requestId: 1, resultValue: 0x3903d765dfd3757f960af3e45b9d54eb052510286fe8540226885145e1c70f02)
    │   │   └─ ← [Stop] 
    │   ├─ emit RandomWordsFulfilled(requestId: 1, outputSeed: 1, payment: 355029000000 [3.55e11], success: true)
    │   └─ ← [Stop] 
    ├─ [6562] ScratchVRF::tokenURI(1) [staticcall]
    │   └─ ← [Return] "1/false.json"
    ├─ [0] VM::expectRevert(InvalidId())
    │   └─ ← [Return] 
    ├─ [2673] ScratchVRF::tokenURI(0) [staticcall]
    │   └─ ← [Revert] InvalidId()
    └─ ← [Stop] 

[PASS] testUpdateBaseURI() (gas: 572715)
Traces:
  [572715] TestScratchVRF_MAINNET::testUpdateBaseURI()
    ├─ [2406] ScratchVRF::baseCost() [staticcall]
    │   └─ ← [Return] 3000000000000000000000 [3e21]
    ├─ [0] VM::startPrank(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   └─ ← [Return] 
    ├─ [46218] 0x249cA82617eC3DfB2589c4c17ab7EC9765350a18::approve(ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], 3000000000000000000000 [3e21])
    │   ├─ emit Approval(owner: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, spender: ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], value: 3000000000000000000000 [3e21])
    │   └─ ← [Return] true
    ├─ [182474] ScratchVRF::buyScratchTicket()
    │   ├─ [18354] 0x249cA82617eC3DfB2589c4c17ab7EC9765350a18::transferFrom(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], 3000000000000000000000 [3e21])
    │   │   ├─ emit Transfer(from: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, to: ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], value: 3000000000000000000000 [3e21])
    │   │   └─ ← [Return] true
    │   ├─ [45665] VRFCoordinatorV2Mock::requestRandomWords(0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, 1, 3, 2500000 [2.5e6], 2)
    │   │   ├─ emit RandomWordsRequested(keyHash: 0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc, requestId: 1, preSeed: 100, subId: 1, minimumRequestConfirmations: 3, callbackGasLimit: 2500000 [2.5e6], numWords: 2, sender: ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   │   └─ ← [Return] 1
    │   ├─ emit DrawRequest(drawId: 1, requestId: 1, requestAddress: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   └─ ← [Stop] 
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [265515] VRFCoordinatorV2Mock::fulfillRandomWords(1, ScratchVRF: [0x2e234DAe75C793f67A35089C9d99245E1C58470b])
    │   ├─ [227582] ScratchVRF::rawFulfillRandomWords(1, [78541660797044910968829902406342334108369226379826116161446442989268089806461 [7.854e76], 92458281274488595289803937127152923398167637295201432141969818930235769911599 [9.245e76]])
    │   │   ├─ emit Transfer(from: 0x0000000000000000000000000000000000000000, to: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, tokenId: 1)
    │   │   ├─ emit MintCompleted(ticketId: 1, edition: 10, recipient: 0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, prize: 5000000000000000000000 [5e21])
    │   │   ├─ emit RequestFulfilled(drawId: 1, requestId: 1, resultValue: 0x3903d765dfd3757f960af3e45b9d54eb052510286fe8540226885145e1c70f02)
    │   │   └─ ← [Stop] 
    │   ├─ emit RandomWordsFulfilled(requestId: 1, outputSeed: 1, payment: 355029000000 [3.55e11], success: true)
    │   └─ ← [Stop] 
    ├─ [6562] ScratchVRF::tokenURI(1) [staticcall]
    │   └─ ← [Return] "1/false.json"
    ├─ [0] VM::expectRevert(InvalidId())
    │   └─ ← [Return] 
    ├─ [2673] ScratchVRF::tokenURI(0) [staticcall]
    │   └─ ← [Revert] InvalidId()
    ├─ [0] VM::startPrank(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689)
    │   └─ ← [Return] 
    ├─ [0] VM::expectRevert(NotMaster())
    │   └─ ← [Return] 
    ├─ [24378] ScratchVRF::updateBaseURI("https://example.com/")
    │   └─ ← [Revert] NotMaster()
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [46831] ScratchVRF::updateBaseURI("https://example.com/")
    │   └─ ← [Stop] 
    ├─ [2565] ScratchVRF::tokenURI(1) [staticcall]
    │   └─ ← [Return] "https://example.com/1/false.json"
    └─ ← [Stop] 

[PASS] testZeroPurchase() (gas: 30005)
Traces:
  [30005] TestScratchVRF_MAINNET::testZeroPurchase()
    ├─ [0] VM::expectRevert(ZeroTickts())
    │   └─ ← [Return] 
    ├─ [22011] ScratchVRF::bulkPurchase(0x641AD78BAca220C5BD28b51Ce8e0F495e85Fe689, 0)
    │   └─ ← [Revert] ZeroTickts()
    └─ ← [Stop] 

Suite result: ok. 13 passed; 0 failed; 0 skipped; finished in 2.21s (21.20ms CPU time)

Ran 8 tests for contracts/tests/Polygon/BasketSwap.t.sol:TestBasketSwap
[FAIL. Reason: EvmError: Revert] testBasketSwapMixedERC20() (gas: 132026)
Logs:
  Using Polygon mainnet fork

Traces:
  [2911794] TestBasketSwap::setUp()
    ├─ [0] VM::createSelectFork("polygon")
    │   └─ ← [Return] 0
    ├─ [0] console::log("Using Polygon mainnet fork") [staticcall]
    │   └─ ← [Stop] 
    ├─ [2672777] → new BasketSwap@0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f
    │   ├─ emit OwnershipTransferred(previousOwner: 0x0000000000000000000000000000000000000000, newOwner: TestBasketSwap: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   ├─ [275] 0xa5E0829CaCEd8fFDD4De3c43696c57F7D7A678ff::WETH() [staticcall]
    │   │   └─ ← [Return] 0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270
    │   └─ ← [Return] 10958 bytes of code
    ├─ [0] VM::startPrank(0xF977814e90dA44bFA03b6295A0616a897441aceC)
    │   └─ ← [Return] 
    ├─ [5253] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::balanceOf(0xF977814e90dA44bFA03b6295A0616a897441aceC) [staticcall]
    │   ├─ [2581] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::balanceOf(0xF977814e90dA44bFA03b6295A0616a897441aceC) [delegatecall]
    │   │   └─ ← [Return] 0
    │   └─ ← [Return] 0
    ├─ [0] VM::record()
    │   └─ ← [Return] 
    ├─ [753] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::balanceOf(0xF977814e90dA44bFA03b6295A0616a897441aceC) [staticcall]
    │   ├─ [581] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::balanceOf(0xF977814e90dA44bFA03b6295A0616a897441aceC) [delegatecall]
    │   │   └─ ← [Return] 0
    │   └─ ← [Return] 0
    ├─ [0] VM::accesses(0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc)
    │   └─ ← [Return] [0x2b2bc1f099479c65737b9ab38c8149599a7d493a86497f9e7b8140324f7c5f3b], []
    ├─ [0] VM::load(0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc, 0x2b2bc1f099479c65737b9ab38c8149599a7d493a86497f9e7b8140324f7c5f3b) [staticcall]
    │   └─ ← [Return] 0x0000000000000000000000000000000000000000000000000000000000000000
    ├─ emit WARNING_UninitedSlot(who: 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc, slot: 19526765436440295571525057692557610630585876598121981949291166758649265413947 [1.952e76])
    ├─ emit SlotFound(who: 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc, fsig: 0x70a0823100000000000000000000000000000000000000000000000000000000, keysHash: 0x2b2bc1f099479c65737b9ab38c8149599a7d493a86497f9e7b8140324f7c5f3b, slot: 19526765436440295571525057692557610630585876598121981949291166758649265413947 [1.952e76])
    ├─ [753] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::balanceOf(0xF977814e90dA44bFA03b6295A0616a897441aceC) [staticcall]
    │   ├─ [581] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::balanceOf(0xF977814e90dA44bFA03b6295A0616a897441aceC) [delegatecall]
    │   │   └─ ← [Return] 0
    │   └─ ← [Return] 0
    ├─ [0] VM::load(0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc, 0x2b2bc1f099479c65737b9ab38c8149599a7d493a86497f9e7b8140324f7c5f3b) [staticcall]
    │   └─ ← [Return] 0x0000000000000000000000000000000000000000000000000000000000000000
    ├─ [0] VM::store(0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc, 0x2b2bc1f099479c65737b9ab38c8149599a7d493a86497f9e7b8140324f7c5f3b, 0x00000000000000000000000000000000000000000000003635c9adc5dea00000)
    │   └─ ← [Return] 
    ├─ [0] VM::deal(0xF977814e90dA44bFA03b6295A0616a897441aceC, 10000000000000000000 [1e19])
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(0xF977814e90dA44bFA03b6295A0616a897441aceC)
    │   └─ ← [Return] 
    ├─ [49276] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::approve(BasketSwap: [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f], 115792089237316195423570985008687907853269984665640564039457584007913129639935 [1.157e77])
    │   ├─ [24654] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::approve(BasketSwap: [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f], 115792089237316195423570985008687907853269984665640564039457584007913129639935 [1.157e77]) [delegatecall]
    │   │   ├─ emit Approval(owner: 0xF977814e90dA44bFA03b6295A0616a897441aceC, spender: BasketSwap: [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f], value: 115792089237316195423570985008687907853269984665640564039457584007913129639935 [1.157e77])
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    └─ ← [Stop] 

  [132026] TestBasketSwap::testBasketSwapMixedERC20()
    ├─ [0] VM::startPrank(0xF977814e90dA44bFA03b6295A0616a897441aceC)
    │   └─ ← [Return] 
    ├─ [117816] BasketSwap::basketSwapMixedERC20(100000000000000000000 [1e20], [20000000000000000000 [2e19], 20000000000000000000 [2e19], 20000000000000000000 [2e19], 20000000000000000000 [2e19], 20000000000000000000 [2e19]], [1, 1, 1, 1, 1], [0, 1, 0, 1, 0], [0, 500, 0, 3000, 0], 1758444895 [1.758e9])
    │   ├─ [40445] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::transferFrom(0xF977814e90dA44bFA03b6295A0616a897441aceC, BasketSwap: [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f], 100000000000000000000 [1e20])
    │   │   ├─ [37761] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::transferFrom(0xF977814e90dA44bFA03b6295A0616a897441aceC, BasketSwap: [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f], 100000000000000000000 [1e20]) [delegatecall]
    │   │   │   ├─ emit Transfer(from: 0xF977814e90dA44bFA03b6295A0616a897441aceC, to: BasketSwap: [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f], value: 100000000000000000000 [1e20])
    │   │   │   ├─ emit Approval(owner: 0xF977814e90dA44bFA03b6295A0616a897441aceC, spender: BasketSwap: [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f], value: 115792089237316195423570985008687907853269984665640564039357584007913129639935 [1.157e77])
    │   │   │   └─ ← [Return] true
    │   │   └─ ← [Return] true
    │   ├─ [24832] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::approve(0xa5E0829CaCEd8fFDD4De3c43696c57F7D7A678ff, 20000000000000000000 [2e19])
    │   │   ├─ [24654] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::approve(0xa5E0829CaCEd8fFDD4De3c43696c57F7D7A678ff, 20000000000000000000 [2e19]) [delegatecall]
    │   │   │   ├─ emit Approval(owner: BasketSwap: [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f], spender: 0xa5E0829CaCEd8fFDD4De3c43696c57F7D7A678ff, value: 20000000000000000000 [2e19])
    │   │   │   └─ ← [Return] true
    │   │   └─ ← [Return] true
    │   ├─ [4670] 0xa5E0829CaCEd8fFDD4De3c43696c57F7D7A678ff::swapExactTokensForTokens(20000000000000000000 [2e19], 1, [0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc, 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619], BasketSwap: [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f], 1758444895 [1.758e9])
    │   │   └─ ← [Revert] EvmError: Revert
    │   └─ ← [Revert] EvmError: Revert
    └─ ← [Revert] EvmError: Revert

[FAIL. Reason: EvmError: Revert] testBasketSwapV2ERC20() (gas: 127678)
Logs:
  Using Polygon mainnet fork

Traces:
  [2911794] TestBasketSwap::setUp()
    ├─ [0] VM::createSelectFork("polygon")
    │   └─ ← [Return] 0
    ├─ [0] console::log("Using Polygon mainnet fork") [staticcall]
    │   └─ ← [Stop] 
    ├─ [2672777] → new BasketSwap@0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f
    │   ├─ emit OwnershipTransferred(previousOwner: 0x0000000000000000000000000000000000000000, newOwner: TestBasketSwap: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   ├─ [275] 0xa5E0829CaCEd8fFDD4De3c43696c57F7D7A678ff::WETH() [staticcall]
    │   │   └─ ← [Return] 0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270
    │   └─ ← [Return] 10958 bytes of code
    ├─ [0] VM::startPrank(0xF977814e90dA44bFA03b6295A0616a897441aceC)
    │   └─ ← [Return] 
    ├─ [5253] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::balanceOf(0xF977814e90dA44bFA03b6295A0616a897441aceC) [staticcall]
    │   ├─ [2581] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::balanceOf(0xF977814e90dA44bFA03b6295A0616a897441aceC) [delegatecall]
    │   │   └─ ← [Return] 0
    │   └─ ← [Return] 0
    ├─ [0] VM::record()
    │   └─ ← [Return] 
    ├─ [753] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::balanceOf(0xF977814e90dA44bFA03b6295A0616a897441aceC) [staticcall]
    │   ├─ [581] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::balanceOf(0xF977814e90dA44bFA03b6295A0616a897441aceC) [delegatecall]
    │   │   └─ ← [Return] 0
    │   └─ ← [Return] 0
    ├─ [0] VM::accesses(0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc)
    │   └─ ← [Return] [0x2b2bc1f099479c65737b9ab38c8149599a7d493a86497f9e7b8140324f7c5f3b], []
    ├─ [0] VM::load(0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc, 0x2b2bc1f099479c65737b9ab38c8149599a7d493a86497f9e7b8140324f7c5f3b) [staticcall]
    │   └─ ← [Return] 0x0000000000000000000000000000000000000000000000000000000000000000
    ├─ emit WARNING_UninitedSlot(who: 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc, slot: 19526765436440295571525057692557610630585876598121981949291166758649265413947 [1.952e76])
    ├─ emit SlotFound(who: 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc, fsig: 0x70a0823100000000000000000000000000000000000000000000000000000000, keysHash: 0x2b2bc1f099479c65737b9ab38c8149599a7d493a86497f9e7b8140324f7c5f3b, slot: 19526765436440295571525057692557610630585876598121981949291166758649265413947 [1.952e76])
    ├─ [753] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::balanceOf(0xF977814e90dA44bFA03b6295A0616a897441aceC) [staticcall]
    │   ├─ [581] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::balanceOf(0xF977814e90dA44bFA03b6295A0616a897441aceC) [delegatecall]
    │   │   └─ ← [Return] 0
    │   └─ ← [Return] 0
    ├─ [0] VM::load(0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc, 0x2b2bc1f099479c65737b9ab38c8149599a7d493a86497f9e7b8140324f7c5f3b) [staticcall]
    │   └─ ← [Return] 0x0000000000000000000000000000000000000000000000000000000000000000
    ├─ [0] VM::store(0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc, 0x2b2bc1f099479c65737b9ab38c8149599a7d493a86497f9e7b8140324f7c5f3b, 0x00000000000000000000000000000000000000000000003635c9adc5dea00000)
    │   └─ ← [Return] 
    ├─ [0] VM::deal(0xF977814e90dA44bFA03b6295A0616a897441aceC, 10000000000000000000 [1e19])
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(0xF977814e90dA44bFA03b6295A0616a897441aceC)
    │   └─ ← [Return] 
    ├─ [49276] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::approve(BasketSwap: [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f], 115792089237316195423570985008687907853269984665640564039457584007913129639935 [1.157e77])
    │   ├─ [24654] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::approve(BasketSwap: [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f], 115792089237316195423570985008687907853269984665640564039457584007913129639935 [1.157e77]) [delegatecall]
    │   │   ├─ emit Approval(owner: 0xF977814e90dA44bFA03b6295A0616a897441aceC, spender: BasketSwap: [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f], value: 115792089237316195423570985008687907853269984665640564039457584007913129639935 [1.157e77])
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    └─ ← [Stop] 

  [127678] TestBasketSwap::testBasketSwapV2ERC20()
    ├─ [0] VM::startPrank(0xF977814e90dA44bFA03b6295A0616a897441aceC)
    │   └─ ← [Return] 
    ├─ [114974] BasketSwap::basketSwapV2ERC20(100000000000000000000 [1e20], [20000000000000000000 [2e19], 20000000000000000000 [2e19], 20000000000000000000 [2e19], 20000000000000000000 [2e19], 20000000000000000000 [2e19]], [1, 1, 1, 1, 1], 1758444895 [1.758e9])
    │   ├─ [40445] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::transferFrom(0xF977814e90dA44bFA03b6295A0616a897441aceC, BasketSwap: [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f], 100000000000000000000 [1e20])
    │   │   ├─ [37761] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::transferFrom(0xF977814e90dA44bFA03b6295A0616a897441aceC, BasketSwap: [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f], 100000000000000000000 [1e20]) [delegatecall]
    │   │   │   ├─ emit Transfer(from: 0xF977814e90dA44bFA03b6295A0616a897441aceC, to: BasketSwap: [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f], value: 100000000000000000000 [1e20])
    │   │   │   ├─ emit Approval(owner: 0xF977814e90dA44bFA03b6295A0616a897441aceC, spender: BasketSwap: [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f], value: 115792089237316195423570985008687907853269984665640564039357584007913129639935 [1.157e77])
    │   │   │   └─ ← [Return] true
    │   │   └─ ← [Return] true
    │   ├─ [24832] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::approve(0xa5E0829CaCEd8fFDD4De3c43696c57F7D7A678ff, 20000000000000000000 [2e19])
    │   │   ├─ [24654] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::approve(0xa5E0829CaCEd8fFDD4De3c43696c57F7D7A678ff, 20000000000000000000 [2e19]) [delegatecall]
    │   │   │   ├─ emit Approval(owner: BasketSwap: [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f], spender: 0xa5E0829CaCEd8fFDD4De3c43696c57F7D7A678ff, value: 20000000000000000000 [2e19])
    │   │   │   └─ ← [Return] true
    │   │   └─ ← [Return] true
    │   ├─ [4670] 0xa5E0829CaCEd8fFDD4De3c43696c57F7D7A678ff::swapExactTokensForTokens(20000000000000000000 [2e19], 1, [0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc, 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619], BasketSwap: [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f], 1758444895 [1.758e9])
    │   │   └─ ← [Revert] EvmError: Revert
    │   └─ ← [Revert] EvmError: Revert
    └─ ← [Revert] EvmError: Revert

[FAIL. Reason: revert: UniswapV2Router: INSUFFICIENT_OUTPUT_AMOUNT] testBasketSwapV2Native() (gas: 3085242)
Logs:
  Using Polygon mainnet fork
  Using fresh Polygon mainnet fork for V2 Native test
  Initial MATIC balance: 10 MATIC

Traces:
  [2911794] TestBasketSwap::setUp()
    ├─ [0] VM::createSelectFork("polygon")
    │   └─ ← [Return] 0
    ├─ [0] console::log("Using Polygon mainnet fork") [staticcall]
    │   └─ ← [Stop] 
    ├─ [2672777] → new BasketSwap@0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f
    │   ├─ emit OwnershipTransferred(previousOwner: 0x0000000000000000000000000000000000000000, newOwner: TestBasketSwap: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   ├─ [275] 0xa5E0829CaCEd8fFDD4De3c43696c57F7D7A678ff::WETH() [staticcall]
    │   │   └─ ← [Return] 0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270
    │   └─ ← [Return] 10958 bytes of code
    ├─ [0] VM::startPrank(0xF977814e90dA44bFA03b6295A0616a897441aceC)
    │   └─ ← [Return] 
    ├─ [5253] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::balanceOf(0xF977814e90dA44bFA03b6295A0616a897441aceC) [staticcall]
    │   ├─ [2581] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::balanceOf(0xF977814e90dA44bFA03b6295A0616a897441aceC) [delegatecall]
    │   │   └─ ← [Return] 0
    │   └─ ← [Return] 0
    ├─ [0] VM::record()
    │   └─ ← [Return] 
    ├─ [753] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::balanceOf(0xF977814e90dA44bFA03b6295A0616a897441aceC) [staticcall]
    │   ├─ [581] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::balanceOf(0xF977814e90dA44bFA03b6295A0616a897441aceC) [delegatecall]
    │   │   └─ ← [Return] 0
    │   └─ ← [Return] 0
    ├─ [0] VM::accesses(0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc)
    │   └─ ← [Return] [0x2b2bc1f099479c65737b9ab38c8149599a7d493a86497f9e7b8140324f7c5f3b], []
    ├─ [0] VM::load(0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc, 0x2b2bc1f099479c65737b9ab38c8149599a7d493a86497f9e7b8140324f7c5f3b) [staticcall]
    │   └─ ← [Return] 0x0000000000000000000000000000000000000000000000000000000000000000
    ├─ emit WARNING_UninitedSlot(who: 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc, slot: 19526765436440295571525057692557610630585876598121981949291166758649265413947 [1.952e76])
    ├─ emit SlotFound(who: 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc, fsig: 0x70a0823100000000000000000000000000000000000000000000000000000000, keysHash: 0x2b2bc1f099479c65737b9ab38c8149599a7d493a86497f9e7b8140324f7c5f3b, slot: 19526765436440295571525057692557610630585876598121981949291166758649265413947 [1.952e76])
    ├─ [753] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::balanceOf(0xF977814e90dA44bFA03b6295A0616a897441aceC) [staticcall]
    │   ├─ [581] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::balanceOf(0xF977814e90dA44bFA03b6295A0616a897441aceC) [delegatecall]
    │   │   └─ ← [Return] 0
    │   └─ ← [Return] 0
    ├─ [0] VM::load(0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc, 0x2b2bc1f099479c65737b9ab38c8149599a7d493a86497f9e7b8140324f7c5f3b) [staticcall]
    │   └─ ← [Return] 0x0000000000000000000000000000000000000000000000000000000000000000
    ├─ [0] VM::store(0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc, 0x2b2bc1f099479c65737b9ab38c8149599a7d493a86497f9e7b8140324f7c5f3b, 0x00000000000000000000000000000000000000000000003635c9adc5dea00000)
    │   └─ ← [Return] 
    ├─ [0] VM::deal(0xF977814e90dA44bFA03b6295A0616a897441aceC, 10000000000000000000 [1e19])
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(0xF977814e90dA44bFA03b6295A0616a897441aceC)
    │   └─ ← [Return] 
    ├─ [49276] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::approve(BasketSwap: [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f], 115792089237316195423570985008687907853269984665640564039457584007913129639935 [1.157e77])
    │   ├─ [24654] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::approve(BasketSwap: [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f], 115792089237316195423570985008687907853269984665640564039457584007913129639935 [1.157e77]) [delegatecall]
    │   │   ├─ emit Approval(owner: 0xF977814e90dA44bFA03b6295A0616a897441aceC, spender: BasketSwap: [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f], value: 115792089237316195423570985008687907853269984665640564039457584007913129639935 [1.157e77])
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    └─ ← [Stop] 

  [3085242] TestBasketSwap::testBasketSwapV2Native()
    ├─ [0] VM::createSelectFork("polygon")
    │   └─ ← [Return] 1
    ├─ [0] console::log("Using fresh Polygon mainnet fork for V2 Native test") [staticcall]
    │   └─ ← [Stop] 
    ├─ [2652637] → new BasketSwap@0x2e234DAe75C793f67A35089C9d99245E1C58470b
    │   ├─ emit OwnershipTransferred(previousOwner: 0x0000000000000000000000000000000000000000, newOwner: TestBasketSwap: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   ├─ [275] 0xa5E0829CaCEd8fFDD4De3c43696c57F7D7A678ff::WETH() [staticcall]
    │   │   └─ ← [Return] 0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270
    │   └─ ← [Return] 10958 bytes of code
    ├─ [0] VM::startPrank(0xF977814e90dA44bFA03b6295A0616a897441aceC)
    │   └─ ← [Return] 
    ├─ [0] VM::deal(0xF977814e90dA44bFA03b6295A0616a897441aceC, 10000000000000000000 [1e19])
    │   └─ ← [Return] 
    ├─ [2608] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::balanceOf(0xF977814e90dA44bFA03b6295A0616a897441aceC) [staticcall]
    │   └─ ← [Return] 211961000000000000000 [2.119e20]
    ├─ [7722] 0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174::balanceOf(0xF977814e90dA44bFA03b6295A0616a897441aceC) [staticcall]
    │   ├─ [2557] 0xDD9185DB084f5C4fFf3b4f70E7bA62123b812226::balanceOf(0xF977814e90dA44bFA03b6295A0616a897441aceC) [delegatecall]
    │   │   └─ ← [Return] 3119027 [3.119e6]
    │   └─ ← [Return] 3119027 [3.119e6]
    ├─ [7962] 0x1BFD67037B42Cf73acF2047067bd4F2C47D9BfD6::balanceOf(0xF977814e90dA44bFA03b6295A0616a897441aceC) [staticcall]
    │   ├─ [2608] 0x7FFB3d637014488b63fb9858E279385685AFc1e2::balanceOf(0xF977814e90dA44bFA03b6295A0616a897441aceC) [delegatecall]
    │   │   └─ ← [Return] 0
    │   └─ ← [Return] 0
    ├─ [2564] 0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270::balanceOf(0xF977814e90dA44bFA03b6295A0616a897441aceC) [staticcall]
    │   └─ ← [Return] 20845100000000000000000 [2.084e22]
    ├─ [7918] 0x8f3Cf7ad23Cd3CaDbD9735AFf958023239c6A063::balanceOf(0xF977814e90dA44bFA03b6295A0616a897441aceC) [staticcall]
    │   ├─ [2564] 0x490e379C9cFF64944bE82b849F8FD5972C7999A7::balanceOf(0xF977814e90dA44bFA03b6295A0616a897441aceC) [delegatecall]
    │   │   └─ ← [Return] 50000000000000000000 [5e19]
    │   └─ ← [Return] 50000000000000000000 [5e19]
    ├─ [0] console::log("Initial MATIC balance:", 10, "MATIC") [staticcall]
    │   └─ ← [Stop] 
    ├─ [324477] BasketSwap::basketSwapV2Native{value: 10000000000000000}(10000000000000000 [1e16], [2500000000000000 [2.5e15], 2500000000000000 [2.5e15], 2500000000000000 [2.5e15], 0, 2500000000000000 [2.5e15]], [1, 1, 1, 0, 1], 1758444903 [1.758e9])
    │   ├─ [119104] 0xa5E0829CaCEd8fFDD4De3c43696c57F7D7A678ff::swapExactETHForTokens{value: 2500000000000000}(1, [0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270, 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619], BasketSwap: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], 1758444903 [1.758e9])
    │   │   ├─ [2504] 0xadbF1854e5883eB8aa7BAf50705338739e558E5b::0902f1ac() [staticcall]
    │   │   │   └─ ← [Return] 0x00000000000000000000000000000000000000000001a6057831b00409b97eb8000000000000000000000000000000000000000000000008a34241c6bd0bfd1700000000000000000000000000000000000000000000000000000000684be6e9
    │   │   ├─ [23977] 0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270::deposit{value: 2500000000000000}()
    │   │   │   ├─  emit topic 0: 0xe1fffcc4923d04b559f4d29a8bfc6cda04eb5b0d3c460751c2402c5c5cc9109c
    │   │   │   │       topic 1: 0x000000000000000000000000a5e0829caced8ffdd4de3c43696c57f7d7a678ff
    │   │   │   │           data: 0x0000000000000000000000000000000000000000000000000008e1bc9bf04000
    │   │   │   └─ ← [Stop] 
    │   │   ├─ [8095] 0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270::transfer(0xadbF1854e5883eB8aa7BAf50705338739e558E5b, 2500000000000000 [2.5e15])
    │   │   │   ├─ emit Transfer(from: 0xa5E0829CaCEd8fFDD4De3c43696c57F7D7A678ff, to: 0xadbF1854e5883eB8aa7BAf50705338739e558E5b, value: 2500000000000000 [2.5e15])
    │   │   │   └─ ← [Return] true
    │   │   ├─ [65333] 0xadbF1854e5883eB8aa7BAf50705338739e558E5b::022c0d9f(00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002e65ec1a680000000000000000000000002e234dae75c793f67a35089c9d99245e1c58470b00000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000000)
    │   │   │   ├─ [30338] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::transfer(BasketSwap: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], 199278467688 [1.992e11])
    │   │   │   │   ├─ emit Transfer(from: 0xadbF1854e5883eB8aa7BAf50705338739e558E5b, to: BasketSwap: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], value: 199278467688 [1.992e11])
    │   │   │   │   └─ ← [Return] true
    │   │   │   ├─ [564] 0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270::balanceOf(0xadbF1854e5883eB8aa7BAf50705338739e558E5b) [staticcall]
    │   │   │   │   └─ ← [Return] 1992939552888448627621560 [1.992e24]
    │   │   │   ├─ [608] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::balanceOf(0xadbF1854e5883eB8aa7BAf50705338739e558E5b) [staticcall]
    │   │   │   │   └─ ← [Return] 159337989888874111663 [1.593e20]
    │   │   │   ├─  emit topic 0: 0x1c411e9a96e071241c2f21f7726b17ae89e3cab4c78be50e062b03a9fffbbad1
    │   │   │   │           data: 0x00000000000000000000000000000000000000000001a605783a91c0a5a9beb8000000000000000000000000000000000000000000000008a3424198571fe2af
    │   │   │   ├─  emit topic 0: 0xd78ad95fa46c994b6551d0da85fc275fe613ce37657fb8d5e3d130840159d822
    │   │   │   │       topic 1: 0x000000000000000000000000a5e0829caced8ffdd4de3c43696c57f7d7a678ff
    │   │   │   │       topic 2: 0x0000000000000000000000002e234dae75c793f67a35089c9d99245e1c58470b
    │   │   │   │           data: 0x0000000000000000000000000000000000000000000000000008e1bc9bf04000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002e65ec1a68
    │   │   │   └─ ← [Stop] 
    │   │   └─ ← [Return] [2500000000000000 [2.5e15], 199278467688 [1.992e11]]
    │   ├─ [126824] 0xa5E0829CaCEd8fFDD4De3c43696c57F7D7A678ff::swapExactETHForTokens{value: 2500000000000000}(1, [0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270, 0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174], BasketSwap: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], 1758444903 [1.758e9])
    │   │   ├─ [2504] 0x6e7a5FAFcec6BB1e78bAE2A1F0B612012BF14827::0902f1ac() [staticcall]
    │   │   │   └─ ← [Return] 0x000000000000000000000000000000000000000000019f2f1ef780460c50e6050000000000000000000000000000000000000000000000000000005c10fdd2f900000000000000000000000000000000000000000000000000000000684be731
    │   │   ├─ [21977] 0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270::deposit{value: 2500000000000000}()
    │   │   │   ├─  emit topic 0: 0xe1fffcc4923d04b559f4d29a8bfc6cda04eb5b0d3c460751c2402c5c5cc9109c
    │   │   │   │       topic 1: 0x000000000000000000000000a5e0829caced8ffdd4de3c43696c57f7d7a678ff
    │   │   │   │           data: 0x0000000000000000000000000000000000000000000000000008e1bc9bf04000
    │   │   │   └─ ← [Stop] 
    │   │   ├─ [8095] 0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270::transfer(0x6e7a5FAFcec6BB1e78bAE2A1F0B612012BF14827, 2500000000000000 [2.5e15])
    │   │   │   ├─ emit Transfer(from: 0xa5E0829CaCEd8fFDD4De3c43696c57F7D7A678ff, to: 0x6e7a5FAFcec6BB1e78bAE2A1F0B612012BF14827, value: 2500000000000000 [2.5e15])
    │   │   │   └─ ← [Return] true
    │   │   ├─ [77553] 0x6e7a5FAFcec6BB1e78bAE2A1F0B612012BF14827::022c0d9f(000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001f60000000000000000000000002e234dae75c793f67a35089c9d99245e1c58470b00000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000000)
    │   │   │   ├─ [41944] 0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174::transfer(BasketSwap: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], 502)
    │   │   │   │   ├─ [36773] 0xDD9185DB084f5C4fFf3b4f70E7bA62123b812226::transfer(BasketSwap: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], 502) [delegatecall]
    │   │   │   │   │   ├─ emit Transfer(from: 0x6e7a5FAFcec6BB1e78bAE2A1F0B612012BF14827, to: BasketSwap: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], value: 502)
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   └─ ← [Return] true
    │   │   │   ├─ [564] 0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270::balanceOf(0x6e7a5FAFcec6BB1e78bAE2A1F0B612012BF14827) [staticcall]
    │   │   │   │   └─ ← [Return] 1960651321255545840674309 [1.96e24]
    │   │   │   ├─ [1222] 0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174::balanceOf(0x6e7a5FAFcec6BB1e78bAE2A1F0B612012BF14827) [staticcall]
    │   │   │   │   ├─ [557] 0xDD9185DB084f5C4fFf3b4f70E7bA62123b812226::balanceOf(0x6e7a5FAFcec6BB1e78bAE2A1F0B612012BF14827) [delegatecall]
    │   │   │   │   │   └─ ← [Return] 395422060803 [3.954e11]
    │   │   │   │   └─ ← [Return] 395422060803 [3.954e11]
    │   │   │   ├─  emit topic 0: 0x1c411e9a96e071241c2f21f7726b17ae89e3cab4c78be50e062b03a9fffbbad1
    │   │   │   │           data: 0x000000000000000000000000000000000000000000019f2f1f006202a84126050000000000000000000000000000000000000000000000000000005c10fdd103
    │   │   │   ├─  emit topic 0: 0xd78ad95fa46c994b6551d0da85fc275fe613ce37657fb8d5e3d130840159d822
    │   │   │   │       topic 1: 0x000000000000000000000000a5e0829caced8ffdd4de3c43696c57f7d7a678ff
    │   │   │   │       topic 2: 0x0000000000000000000000002e234dae75c793f67a35089c9d99245e1c58470b
    │   │   │   │           data: 0x0000000000000000000000000000000000000000000000000008e1bc9bf040000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001f6
    │   │   │   └─ ← [Stop] 
    │   │   └─ ← [Return] [2500000000000000 [2.5e15], 502]
    │   ├─ [8575] 0xa5E0829CaCEd8fFDD4De3c43696c57F7D7A678ff::swapExactETHForTokens{value: 2500000000000000}(1, [0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270, 0x1BFD67037B42Cf73acF2047067bd4F2C47D9BfD6], BasketSwap: [0x2e234DAe75C793f67A35089C9d99245E1C58470b], 1758444903 [1.758e9])
    │   │   ├─ [2504] 0xf6B87181BF250af082272E3f448eC3238746Ce3D::0902f1ac() [staticcall]
    │   │   │   └─ ← [Return] 0x00000000000000000000000000000000000000000000087034c3840be9da9506000000000000000000000000000000000000000000000000000000000074cc8a00000000000000000000000000000000000000000000000000000000684be429
    │   │   └─ ← [Revert] revert: UniswapV2Router: INSUFFICIENT_OUTPUT_AMOUNT
    │   └─ ← [Revert] revert: UniswapV2Router: INSUFFICIENT_OUTPUT_AMOUNT
    └─ ← [Revert] revert: UniswapV2Router: INSUFFICIENT_OUTPUT_AMOUNT

[FAIL. Reason: EvmError: Revert] testBasketSwapV3ERC20() (gas: 248597)
Logs:
  Using Polygon mainnet fork

Traces:
  [2911794] TestBasketSwap::setUp()
    ├─ [0] VM::createSelectFork("polygon")
    │   └─ ← [Return] 0
    ├─ [0] console::log("Using Polygon mainnet fork") [staticcall]
    │   └─ ← [Stop] 
    ├─ [2672777] → new BasketSwap@0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f
    │   ├─ emit OwnershipTransferred(previousOwner: 0x0000000000000000000000000000000000000000, newOwner: TestBasketSwap: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   ├─ [275] 0xa5E0829CaCEd8fFDD4De3c43696c57F7D7A678ff::WETH() [staticcall]
    │   │   └─ ← [Return] 0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270
    │   └─ ← [Return] 10958 bytes of code
    ├─ [0] VM::startPrank(0xF977814e90dA44bFA03b6295A0616a897441aceC)
    │   └─ ← [Return] 
    ├─ [5253] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::balanceOf(0xF977814e90dA44bFA03b6295A0616a897441aceC) [staticcall]
    │   ├─ [2581] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::balanceOf(0xF977814e90dA44bFA03b6295A0616a897441aceC) [delegatecall]
    │   │   └─ ← [Return] 0
    │   └─ ← [Return] 0
    ├─ [0] VM::record()
    │   └─ ← [Return] 
    ├─ [753] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::balanceOf(0xF977814e90dA44bFA03b6295A0616a897441aceC) [staticcall]
    │   ├─ [581] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::balanceOf(0xF977814e90dA44bFA03b6295A0616a897441aceC) [delegatecall]
    │   │   └─ ← [Return] 0
    │   └─ ← [Return] 0
    ├─ [0] VM::accesses(0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc)
    │   └─ ← [Return] [0x2b2bc1f099479c65737b9ab38c8149599a7d493a86497f9e7b8140324f7c5f3b], []
    ├─ [0] VM::load(0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc, 0x2b2bc1f099479c65737b9ab38c8149599a7d493a86497f9e7b8140324f7c5f3b) [staticcall]
    │   └─ ← [Return] 0x0000000000000000000000000000000000000000000000000000000000000000
    ├─ emit WARNING_UninitedSlot(who: 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc, slot: 19526765436440295571525057692557610630585876598121981949291166758649265413947 [1.952e76])
    ├─ emit SlotFound(who: 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc, fsig: 0x70a0823100000000000000000000000000000000000000000000000000000000, keysHash: 0x2b2bc1f099479c65737b9ab38c8149599a7d493a86497f9e7b8140324f7c5f3b, slot: 19526765436440295571525057692557610630585876598121981949291166758649265413947 [1.952e76])
    ├─ [753] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::balanceOf(0xF977814e90dA44bFA03b6295A0616a897441aceC) [staticcall]
    │   ├─ [581] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::balanceOf(0xF977814e90dA44bFA03b6295A0616a897441aceC) [delegatecall]
    │   │   └─ ← [Return] 0
    │   └─ ← [Return] 0
    ├─ [0] VM::load(0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc, 0x2b2bc1f099479c65737b9ab38c8149599a7d493a86497f9e7b8140324f7c5f3b) [staticcall]
    │   └─ ← [Return] 0x0000000000000000000000000000000000000000000000000000000000000000
    ├─ [0] VM::store(0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc, 0x2b2bc1f099479c65737b9ab38c8149599a7d493a86497f9e7b8140324f7c5f3b, 0x00000000000000000000000000000000000000000000003635c9adc5dea00000)
    │   └─ ← [Return] 
    ├─ [0] VM::deal(0xF977814e90dA44bFA03b6295A0616a897441aceC, 10000000000000000000 [1e19])
    │   └─ ← [Return] 
    ├─ [0] VM::startPrank(0xF977814e90dA44bFA03b6295A0616a897441aceC)
    │   └─ ← [Return] 
    ├─ [49276] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::approve(BasketSwap: [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f], 115792089237316195423570985008687907853269984665640564039457584007913129639935 [1.157e77])
    │   ├─ [24654] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::approve(BasketSwap: [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f], 115792089237316195423570985008687907853269984665640564039457584007913129639935 [1.157e77]) [delegatecall]
    │   │   ├─ emit Approval(owner: 0xF977814e90dA44bFA03b6295A0616a897441aceC, spender: BasketSwap: [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f], value: 115792089237316195423570985008687907853269984665640564039457584007913129639935 [1.157e77])
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    └─ ← [Stop] 

  [248597] TestBasketSwap::testBasketSwapV3ERC20()
    ├─ [0] VM::startPrank(0xF977814e90dA44bFA03b6295A0616a897441aceC)
    │   └─ ← [Return] 
    ├─ [234699] BasketSwap::basketSwapV3ERC20(100000000000000000000 [1e20], [20000000000000000000 [2e19], 20000000000000000000 [2e19], 20000000000000000000 [2e19], 20000000000000000000 [2e19], 20000000000000000000 [2e19]], [1, 1, 1, 1, 1], [3000, 3000, 3000, 3000, 3000], 1758444895 [1.758e9])
    │   ├─ [40445] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::transferFrom(0xF977814e90dA44bFA03b6295A0616a897441aceC, BasketSwap: [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f], 100000000000000000000 [1e20])
    │   │   ├─ [37761] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::transferFrom(0xF977814e90dA44bFA03b6295A0616a897441aceC, BasketSwap: [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f], 100000000000000000000 [1e20]) [delegatecall]
    │   │   │   ├─ emit Transfer(from: 0xF977814e90dA44bFA03b6295A0616a897441aceC, to: BasketSwap: [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f], value: 100000000000000000000 [1e20])
    │   │   │   ├─ emit Approval(owner: 0xF977814e90dA44bFA03b6295A0616a897441aceC, spender: BasketSwap: [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f], value: 115792089237316195423570985008687907853269984665640564039357584007913129639935 [1.157e77])
    │   │   │   └─ ← [Return] true
    │   │   └─ ← [Return] true
    │   ├─ [24832] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::approve(0xE592427A0AEce92De3Edee1F18E0157C05861564, 20000000000000000000 [2e19])
    │   │   ├─ [24654] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::approve(0xE592427A0AEce92De3Edee1F18E0157C05861564, 20000000000000000000 [2e19]) [delegatecall]
    │   │   │   ├─ emit Approval(owner: BasketSwap: [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f], spender: 0xE592427A0AEce92De3Edee1F18E0157C05861564, value: 20000000000000000000 [2e19])
    │   │   │   └─ ← [Return] true
    │   │   └─ ← [Return] true
    │   ├─ [89463] 0xE592427A0AEce92De3Edee1F18E0157C05861564::exactInputSingle(ExactInputSingleParams({ tokenIn: 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc, tokenOut: 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619, fee: 3000, recipient: 0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f, deadline: 1758444895 [1.758e9], amountIn: 20000000000000000000 [2e19], amountOutMinimum: 1, sqrtPriceLimitX96: 0 }))
    │   │   ├─ [82002] 0xd19A1C8278D0420BFb2c825D99DC31fF86224607::128acb08(0000000000000000000000005615deb798bb3e4dfa0139dfa1b3d433cc23b72f0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001158e460913d00000000000000000000000000000fffd8963efd1fc6a506488495d951d5263988d2500000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000c0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000400000000000000000000000005615deb798bb3e4dfa0139dfa1b3d433cc23b72f000000000000000000000000000000000000000000000000000000000000002bc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619000000000000000000000000000000000000000000)
    │   │   │   ├─ [30338] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619::transfer(BasketSwap: [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f], 512038953222 [5.12e11])
    │   │   │   │   ├─ emit Transfer(from: 0xd19A1C8278D0420BFb2c825D99DC31fF86224607, to: BasketSwap: [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f], value: 512038953222 [5.12e11])
    │   │   │   │   └─ ← [Return] true
    │   │   │   ├─ [2753] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::balanceOf(0xd19A1C8278D0420BFb2c825D99DC31fF86224607) [staticcall]
    │   │   │   │   ├─ [2581] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::balanceOf(0xd19A1C8278D0420BFb2c825D99DC31fF86224607) [delegatecall]
    │   │   │   │   │   └─ ← [Return] 1213428308835452460090915987 [1.213e27]
    │   │   │   │   └─ ← [Return] 1213428308835452460090915987 [1.213e27]
    │   │   │   ├─ [13331] 0xE592427A0AEce92De3Edee1F18E0157C05861564::fa461e33(ffffffffffffffffffffffffffffffffffffffffffffffffffffff88c8199efa000000000000000000000000000000000000000000000001158e460913d00000000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000c0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000400000000000000000000000005615deb798bb3e4dfa0139dfa1b3d433cc23b72f000000000000000000000000000000000000000000000000000000000000002bc708d6f2153933daa50b2d0758955be0a93a8fec000bb87ceb23fd6bc0add59e62ac25578270cff1b9f619000000000000000000000000000000000000000000)
    │   │   │   │   ├─ [9245] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::transferFrom(BasketSwap: [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f], 0xd19A1C8278D0420BFb2c825D99DC31fF86224607, 20000000000000000000 [2e19])
    │   │   │   │   │   ├─ [9061] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::transferFrom(BasketSwap: [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f], 0xd19A1C8278D0420BFb2c825D99DC31fF86224607, 20000000000000000000 [2e19]) [delegatecall]
    │   │   │   │   │   │   ├─ emit Transfer(from: BasketSwap: [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f], to: 0xd19A1C8278D0420BFb2c825D99DC31fF86224607, value: 20000000000000000000 [2e19])
    │   │   │   │   │   │   ├─ emit Approval(owner: BasketSwap: [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f], spender: 0xE592427A0AEce92De3Edee1F18E0157C05861564, value: 0)
    │   │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   │   └─ ← [Return] true
    │   │   │   │   └─ ← [Stop] 
    │   │   │   ├─ [753] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::balanceOf(0xd19A1C8278D0420BFb2c825D99DC31fF86224607) [staticcall]
    │   │   │   │   ├─ [581] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::balanceOf(0xd19A1C8278D0420BFb2c825D99DC31fF86224607) [delegatecall]
    │   │   │   │   │   └─ ← [Return] 1213428328835452460090915987 [1.213e27]
    │   │   │   │   └─ ← [Return] 1213428328835452460090915987 [1.213e27]
    │   │   │   ├─  emit topic 0: 0xc42079f94a6350d7e6235f29174924f928cc2ac818eb64fed8004e115fbcca67
    │   │   │   │       topic 1: 0x000000000000000000000000e592427a0aece92de3edee1f18e0157c05861564
    │   │   │   │       topic 2: 0x0000000000000000000000005615deb798bb3e4dfa0139dfa1b3d433cc23b72f
    │   │   │   │           data: 0xffffffffffffffffffffffffffffffffffffffffffffffffffffff88c8199efa000000000000000000000000000000000000000000000001158e460913d000000000000000000000000000000000000000001860616dfe5535be81eee2fc80ad0000000000000000000000000000000000000000000115dc04c2de6f12dbdc0d000000000000000000000000000000000000000000000000000000000002aac0
    │   │   │   └─ ← [Return] 0xffffffffffffffffffffffffffffffffffffffffffffffffffffff88c8199efa000000000000000000000000000000000000000000000001158e460913d00000
    │   │   └─ ← [Return] 512038953222 [5.12e11]
    │   ├─ [22732] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::approve(0xE592427A0AEce92De3Edee1F18E0157C05861564, 20000000000000000000 [2e19])
    │   │   ├─ [22554] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::approve(0xE592427A0AEce92De3Edee1F18E0157C05861564, 20000000000000000000 [2e19]) [delegatecall]
    │   │   │   ├─ emit Approval(owner: BasketSwap: [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f], spender: 0xE592427A0AEce92De3Edee1F18E0157C05861564, value: 20000000000000000000 [2e19])
    │   │   │   └─ ← [Return] true
    │   │   └─ ← [Return] true
    │   ├─ [6957] 0xE592427A0AEce92De3Edee1F18E0157C05861564::exactInputSingle(ExactInputSingleParams({ tokenIn: 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc, tokenOut: 0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174, fee: 3000, recipient: 0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f, deadline: 1758444895 [1.758e9], amountIn: 20000000000000000000 [2e19], amountOutMinimum: 1, sqrtPriceLimitX96: 0 }))
    │   │   └─ ← [Revert] EvmError: Revert
    │   └─ ← [Revert] EvmError: Revert
    └─ ← [Revert] EvmError: Revert

[PASS] testSetInputToken() (gas: 63000)
Logs:
  Using Polygon mainnet fork

Traces:
  [63000] TestBasketSwap::testSetInputToken()
    ├─ [0] VM::prank(0x0000000000000000000000000000000000000001)
    │   └─ ← [Return] 
    ├─ [0] VM::expectRevert(Ownable: caller is not the owner)
    │   └─ ← [Return] 
    ├─ [23997] BasketSwap::setInputToken(0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270)
    │   └─ ← [Revert] revert: Ownable: caller is not the owner
    ├─ [0] VM::prank(TestBasketSwap: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Return] 
    ├─ [28935] BasketSwap::setInputToken(0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270)
    │   └─ ← [Stop] 
    ├─ [324] BasketSwap::inputToken() [staticcall]
    │   └─ ← [Return] 0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270
    └─ ← [Stop] 

[PASS] testSetOutputTokens() (gas: 94414)
Logs:
  Using Polygon mainnet fork

Traces:
  [94414] TestBasketSwap::testSetOutputTokens()
    ├─ [0] VM::prank(0x0000000000000000000000000000000000000001)
    │   └─ ← [Return] 
    ├─ [0] VM::expectRevert(Ownable: caller is not the owner)
    │   └─ ← [Return] 
    ├─ [26282] BasketSwap::setOutputTokens([0x8f3Cf7ad23Cd3CaDbD9735AFf958023239c6A063, 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619, 0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174, 0x1BFD67037B42Cf73acF2047067bd4F2C47D9BfD6, 0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270])
    │   └─ ← [Revert] revert: Ownable: caller is not the owner
    ├─ [0] VM::prank(TestBasketSwap: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Return] 
    ├─ [51867] BasketSwap::setOutputTokens([0x8f3Cf7ad23Cd3CaDbD9735AFf958023239c6A063, 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619, 0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174, 0x1BFD67037B42Cf73acF2047067bd4F2C47D9BfD6, 0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270])
    │   └─ ← [Stop] 
    ├─ [508] BasketSwap::outputTokens(0) [staticcall]
    │   └─ ← [Return] 0x8f3Cf7ad23Cd3CaDbD9735AFf958023239c6A063
    ├─ [508] BasketSwap::outputTokens(1) [staticcall]
    │   └─ ← [Return] 0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619
    ├─ [508] BasketSwap::outputTokens(2) [staticcall]
    │   └─ ← [Return] 0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174
    ├─ [508] BasketSwap::outputTokens(3) [staticcall]
    │   └─ ← [Return] 0x1BFD67037B42Cf73acF2047067bd4F2C47D9BfD6
    ├─ [508] BasketSwap::outputTokens(4) [staticcall]
    │   └─ ← [Return] 0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270
    └─ ← [Stop] 

[PASS] testWithdrawEther() (gas: 61335)
Logs:
  Using Polygon mainnet fork

Traces:
  [61335] TestBasketSwap::testWithdrawEther()
    ├─ [0] VM::deal(BasketSwap: [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f], 1000000000000000000 [1e18])
    │   └─ ← [Return] 
    ├─ [0] VM::prank(0x0000000000000000000000000000000000000001)
    │   └─ ← [Return] 
    ├─ [0] VM::expectRevert(Ownable: caller is not the owner)
    │   └─ ← [Return] 
    ├─ [23483] BasketSwap::withdrawEther()
    │   └─ ← [Revert] revert: Ownable: caller is not the owner
    ├─ [0] VM::prank(TestBasketSwap: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Return] 
    ├─ [30463] BasketSwap::withdrawEther()
    │   ├─ [55] TestBasketSwap::receive{value: 1000000000000000000}()
    │   │   └─ ← [Stop] 
    │   └─ ← [Stop] 
    └─ ← [Stop] 

[PASS] testWithdrawTokens() (gas: 146497)
Logs:
  Using Polygon mainnet fork

Traces:
  [146497] TestBasketSwap::testWithdrawTokens()
    ├─ [0] VM::startPrank(0xF977814e90dA44bFA03b6295A0616a897441aceC)
    │   └─ ← [Return] 
    ├─ [54540] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::transfer(BasketSwap: [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f], 1000000000000000000 [1e18])
    │   ├─ [30230] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::transfer(BasketSwap: [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f], 1000000000000000000 [1e18]) [delegatecall]
    │   │   ├─ emit Transfer(from: 0xF977814e90dA44bFA03b6295A0616a897441aceC, to: BasketSwap: [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f], value: 1000000000000000000 [1e18])
    │   │   └─ ← [Return] true
    │   └─ ← [Return] true
    ├─ [0] VM::stopPrank()
    │   └─ ← [Return] 
    ├─ [0] VM::prank(0x0000000000000000000000000000000000000001)
    │   └─ ← [Return] 
    ├─ [0] VM::expectRevert(Ownable: caller is not the owner)
    │   └─ ← [Return] 
    ├─ [24207] BasketSwap::withdrawTokens(0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc, 1000000000000000000 [1e18])
    │   └─ ← [Revert] revert: Ownable: caller is not the owner
    ├─ [2753] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::balanceOf(TestBasketSwap: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496]) [staticcall]
    │   ├─ [2581] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::balanceOf(TestBasketSwap: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496]) [delegatecall]
    │   │   └─ ← [Return] 0
    │   └─ ← [Return] 0
    ├─ [0] VM::prank(TestBasketSwap: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496])
    │   └─ ← [Return] 
    ├─ [55245] BasketSwap::withdrawTokens(0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc, 1000000000000000000 [1e18])
    │   ├─ [32908] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::transfer(TestBasketSwap: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], 1000000000000000000 [1e18])
    │   │   ├─ [30230] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::transfer(TestBasketSwap: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], 1000000000000000000 [1e18]) [delegatecall]
    │   │   │   ├─ emit Transfer(from: BasketSwap: [0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f], to: TestBasketSwap: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496], value: 1000000000000000000 [1e18])
    │   │   │   └─ ← [Return] true
    │   │   └─ ← [Return] true
    │   └─ ← [Stop] 
    ├─ [753] 0xc708D6F2153933DAA50B2D0758955Be0A93A8FEc::balanceOf(TestBasketSwap: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496]) [staticcall]
    │   ├─ [581] 0xAd87e3b217c66B0D45dEaFBC540330d300811b94::balanceOf(TestBasketSwap: [0x7FA9385bE102ac3EAc297483Dd6233D62b3e1496]) [delegatecall]
    │   │   └─ ← [Return] 1000000000000000000 [1e18]
    │   └─ ← [Return] 1000000000000000000 [1e18]
    └─ ← [Stop] 

Suite result: FAILED. 4 passed; 4 failed; 0 skipped; finished in 25.11s (27.64s CPU time)
| contracts/BasketSwap.sol:BasketSwap contract |                 |        |        |        |         |
|----------------------------------------------|-----------------|--------|--------|--------|---------|
| Deployment Cost                              | Deployment Size |        |        |        |         |
| 2672777                                      | 11926           |        |        |        |         |
| Function Name                                | min             | avg    | median | max    | # calls |
| basketSwapMixedERC20                         | 117816          | 117816 | 117816 | 117816 | 1       |
| basketSwapV2ERC20                            | 114974          | 114974 | 114974 | 114974 | 1       |
| basketSwapV2Native                           | 324477          | 324477 | 324477 | 324477 | 1       |
| basketSwapV3ERC20                            | 234699          | 234699 | 234699 | 234699 | 1       |
| inputToken                                   | 324             | 324    | 324    | 324    | 1       |
| outputTokens                                 | 508             | 508    | 508    | 508    | 5       |
| setInputToken                                | 23997           | 26466  | 26466  | 28935  | 2       |
| setOutputTokens                              | 26282           | 39074  | 39074  | 51867  | 2       |
| withdrawEther                                | 23483           | 26973  | 26973  | 30463  | 2       |
| withdrawTokens                               | 24207           | 39726  | 39726  | 55245  | 2       |


| contracts/FlexibleDrawVRF.sol:FlexibleDrawVRF contract |                 |        |        |        |         |
|--------------------------------------------------------|-----------------|--------|--------|--------|---------|
| Deployment Cost                                        | Deployment Size |        |        |        |         |
| 5339662                                                | 21465           |        |        |        |         |
| Function Name                                          | min             | avg    | median | max    | # calls |
| SUBSCRIPTION_ID                                        | 295             | 295    | 295    | 295    | 11      |
| buyFlexibleDraw                                        | 25916           | 167570 | 202984 | 202984 | 5       |
| claimPrize                                             | 75776           | 75776  | 75776  | 75776  | 2       |
| claimed                                                | 525             | 525    | 525    | 525    | 2       |
| drawIdToRequestId                                      | 526             | 526    | 526    | 526    | 1       |
| getScratcherCount                                      | 7782            | 7782   | 7782   | 7782   | 1       |
| getVoyagerCount                                        | 7815            | 7815   | 7815   | 7815   | 1       |
| latestDrawId                                           | 407             | 407    | 407    | 407    | 1       |
| latestTicketId                                         | 428             | 428    | 428    | 428    | 2       |
| minNFTChance                                           | 406             | 406    | 406    | 406    | 1       |
| scratcherChance                                        | 427             | 427    | 427    | 427    | 1       |
| scratcherCost                                          | 384             | 384    | 384    | 384    | 1       |
| scratcherNFT                                           | 402             | 402    | 402    | 402    | 1       |
| ticketToScratcherCount                                 | 526             | 526    | 526    | 526    | 2       |
| ticketToVoyagerCount                                   | 570             | 570    | 570    | 570    | 2       |
| updateMinNFTChance                                     | 23748           | 26232  | 26232  | 28716  | 2       |
| updateScratcherChance                                  | 23768           | 26252  | 26252  | 28736  | 2       |
| updateScratcherCost                                    | 28774           | 28774  | 28774  | 28774  | 1       |
| updateScratcherNFT                                     | 25870           | 28487  | 28487  | 31105  | 2       |
| updateVoyagerChance                                    | 23748           | 26232  | 26232  | 28716  | 2       |
| updateVoyagerCost                                      | 28782           | 28782  | 28782  | 28782  | 1       |
| updateVoyagerNFT                                       | 25890           | 28513  | 28513  | 31137  | 2       |
| voyagerChance                                          | 384             | 384    | 384    | 384    | 1       |
| voyagerCost                                            | 407             | 407    | 407    | 407    | 1       |
| voyagerNFT                                             | 402             | 402    | 402    | 402    | 1       |


| contracts/ReelVRF.sol:ReelVRF contract |                 |        |        |        |         |
|----------------------------------------|-----------------|--------|--------|--------|---------|
| Deployment Cost                        | Deployment Size |        |        |        |         |
| 14652690                               | 41893           |        |        |        |         |
| Function Name                          | min             | avg    | median | max    | # calls |
| MAX_TRAIT_TYPES                        | 337             | 337    | 337    | 337    | 15      |
| SUBSCRIPTION_ID                        | 339             | 339    | 339    | 339    | 15      |
| baseCost                               | 385             | 2185   | 2385   | 2385   | 10      |
| buyCharacter                           | 25655           | 365869 | 414252 | 415791 | 8       |
| changeBaseCost                         | 23752           | 26188  | 25959  | 28827  | 6       |
| freeGiftCount                          | 407             | 1407   | 1407   | 2407   | 2       |
| getBadgeName                           | 11865           | 19226  | 19226  | 26588  | 2       |
| getNextRerollPrice                     | 879             | 3231   | 2879   | 6879   | 17      |
| getRerollPrice                         | 685             | 685    | 685    | 685    | 1       |
| getTraitIds                            | 2644            | 2644   | 2644   | 2644   | 5       |
| getTraitNames                          | 186892          | 286157 | 301657 | 321657 | 5       |
| giftCharacter                          | 414719          | 414719 | 414719 | 414719 | 1       |
| giftForFree                            | 43041           | 340216 | 340216 | 637392 | 2       |
| isMinted                               | 698             | 2698   | 2698   | 4698   | 5       |
| latestCharacterId                      | 383             | 1216   | 383    | 2383   | 12      |
| ownedByAddress                         | 1963            | 1963   | 1963   | 1963   | 1       |
| requestIdToDrawing                     | 1109            | 1109   | 1109   | 1109   | 3       |
| rerollInProgress                       | 559             | 1225   | 559    | 2559   | 3       |
| rerollTrait                            | 28335           | 200180 | 234972 | 234972 | 18      |
| results                                | 747             | 747    | 747    | 747    | 1       |
| setPublicMinting                       | 23743           | 43286  | 45877  | 45877  | 17      |
| setRerollPrice                         | 23916           | 37117  | 37117  | 50318  | 2       |
| tokenURI                               | 2718            | 3425   | 3425   | 4132   | 2       |
| uniform                                | 812             | 812    | 812    | 812    | 2       |


| contracts/ScratchVRF.sol:ScratchVRF contract |                 |         |        |         |         |
|----------------------------------------------|-----------------|---------|--------|---------|---------|
| Deployment Cost                              | Deployment Size |         |        |         |         |
| 4525092                                      | 18539           |         |        |         |         |
| Function Name                                | min             | avg     | median | max     | # calls |
| SUBSCRIPTION_ID                              | 295             | 295     | 295    | 295     | 15      |
| baseCost                                     | 406             | 2098    | 2406   | 2406    | 13      |
| bulkPurchase                                 | 22011           | 1016065 | 22049  | 3004135 | 3       |
| buyScratchTicket                             | 182474          | 182474  | 182474 | 182474  | 5       |
| changeBaseCost                               | 23751           | 26187   | 25958  | 28826   | 12      |
| claimPrize                                   | 28077           | 49492   | 59259  | 73131   | 7       |
| giftForFree                                  | 42865           | 103444  | 103444 | 164024  | 2       |
| giftScratchTicket                            | 183007          | 183007  | 183007 | 183007  | 1       |
| isMinted                                     | 709             | 1709    | 1709   | 2709    | 2       |
| latestTicketId                               | 362             | 1362    | 1362   | 2362    | 8       |
| ownedByAddress                               | 1986            | 1986    | 1986   | 1986    | 1       |
| prizes                                       | 501             | 501     | 501    | 501     | 1       |
| toWei                                        | 512             | 512     | 512    | 512     | 256     |
| tokenURI                                     | 2565            | 4207    | 2673   | 6562    | 5       |
| updateBaseURI                                | 24378           | 35604   | 35604  | 46831   | 2       |
| withdrawTokens                               | 54586           | 54592   | 54592  | 54598   | 2       |


| contracts/TicketRouterV3.sol:TicketRouterV3 contract |                 |        |        |        |         |
|------------------------------------------------------|-----------------|--------|--------|--------|---------|
| Deployment Cost                                      | Deployment Size |        |        |        |         |
| 2600756                                              | 12488           |        |        |        |         |
| Function Name                                        | min             | avg    | median | max    | # calls |
| DEFAULT_POOL_FEE                                     | 247             | 247    | 247    | 247    | 1       |
| QUOTER                                               | 248             | 248    | 248    | 248    | 6       |
| SWAP_ROUTER                                          | 270             | 270    | 270    | 270    | 6       |
| VERSE_TOKEN                                          | 293             | 293    | 293    | 293    | 5       |
| VERSE_WETH_POOL_FEE                                  | 291             | 291    | 291    | 291    | 2       |
| WETH                                                 | 292             | 292    | 292    | 292    | 5       |
| buyTickets                                           | 22101           | 141632 | 185872 | 283560 | 5       |
| buyTicketsWithNative                                 | 22055           | 334234 | 370806 | 609841 | 3       |
| buyWithToken                                         | 22762           | 199639 | 186705 | 367361 | 9       |
| getNativePriceForTickets                             | 31474           | 165492 | 187829 | 187829 | 7       |
| getPoolFee                                           | 641             | 1789   | 2651   | 2651   | 7       |
| getTokenPriceForTickets                              | 25499           | 50382  | 27905  | 110787 | 11      |
| receive                                              | 21055           | 21055  | 21055  | 21055  | 1       |
| setCustomPoolFee                                     | 24213           | 38399  | 47775  | 47787  | 13      |


| contracts/flats/VRFCoordinatorV2Mock.sol:VRFCoordinatorV2Mock contract |                 |        |        |        |         |
|------------------------------------------------------------------------|-----------------|--------|--------|--------|---------|
| Deployment Cost                                                        | Deployment Size |        |        |        |         |
| 1946484                                                                | 9244            |        |        |        |         |
| Function Name                                                          | min             | avg    | median | max    | # calls |
| fulfillRandomWords                                                     | 84826           | 211289 | 247309 | 301159 | 59      |
| fulfillRandomWordsWithOverride                                         | 295324          | 295372 | 295324 | 295469 | 3       |
| fundSubscription                                                       | 29251           | 29251  | 29251  | 29251  | 38      |


| contracts/tests/Polygon/FlexibleDrawVRF.t.sol:MockERC20 contract |                 |       |        |       |         |
|------------------------------------------------------------------|-----------------|-------|--------|-------|---------|
| Deployment Cost                                                  | Deployment Size |       |        |       |         |
| 693490                                                           | 3511            |       |        |       |         |
| Function Name                                                    | min             | avg   | median | max   | # calls |
| approve                                                          | 44413           | 44419 | 44413  | 44437 | 16      |
| balanceOf                                                        | 2555            | 2555  | 2555   | 2555  | 2       |
| mint                                                             | 49413           | 60809 | 66501  | 66513 | 33      |


| contracts/tests/Polygon/FlexibleDrawVRF.t.sol:MockERC721Enumerable contract |                 |        |        |        |         |
|-----------------------------------------------------------------------------|-----------------|--------|--------|--------|---------|
| Deployment Cost                                                             | Deployment Size |        |        |        |         |
| 823939                                                                      | 3621            |        |        |        |         |
| Function Name                                                               | min             | avg    | median | max    | # calls |
| balanceOf                                                                   | 535             | 1868   | 2535   | 2535   | 12      |
| mint                                                                        | 137777          | 142817 | 143377 | 143377 | 220     |




Ran 9 test suites in 25.13s (39.34s CPU time): 94 tests passed, 5 failed, 0 skipped (99 total tests)

Failing tests:
Encountered 4 failing tests in contracts/tests/Polygon/BasketSwap.t.sol:TestBasketSwap
[FAIL. Reason: EvmError: Revert] testBasketSwapMixedERC20() (gas: 132026)
[FAIL. Reason: EvmError: Revert] testBasketSwapV2ERC20() (gas: 127678)
[FAIL. Reason: revert: UniswapV2Router: INSUFFICIENT_OUTPUT_AMOUNT] testBasketSwapV2Native() (gas: 3085242)
[FAIL. Reason: EvmError: Revert] testBasketSwapV3ERC20() (gas: 248597)

Encountered 1 failing test in contracts/tests/Polygon/TicketRouterV3NoMock.t.sol:TestTicketRouterV3NoMock_POLYGON
[FAIL. Reason: Error != expected error: TicketRouterV3: INVALID_COUNT != Insufficient token amount] test_ComprehensiveBuyWithToken() (gas: 859993)

Encountered a total of 5 failing tests, 94 tests succeeded
